{"ast":null,"code":"import _regeneratorRuntime from\"/home/filipe/Desktop/AMS/Projeto/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filipe/Desktop/AMS/Projeto/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/filipe/Desktop/AMS/Projeto/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React,{useState,useEffect}from\"react\";// react plugin used to create google maps\n// reactstrap components\nimport{Card,Container,Row}from\"reactstrap\";// core components\nimport Header from\"../../components/Headers/Header.js\";import Maps from\"./Maps_Component.js\";const call_time=2000;const Maps_Page=()=>{const _useState=useState([]),_useState2=_slicedToArray(_useState,2),markers=_useState2[0],setMarkers=_useState2[1];useEffect(()=>{const interval=setInterval(()=>{getAllLocations().then(value=>{setMarkers(value);});},call_time);return()=>clearInterval(interval);},[]);const getAllLocations=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result,all_locations,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/list_accidents\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;all_locations=[];for(i=0;i<result.length;i++){all_locations.push({lat:result[i][\"location\"][\"lat\"],lng:result[i][\"location\"][\"lng\"],id:result[i][\"id\"],status:result[i][\"status\"]});}return _context.abrupt(\"return\",all_locations);case 9:case\"end\":return _context.stop();}},_callee);}));return function getAllLocations(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow border-0\"},/*#__PURE__*/React.createElement(Maps,{markers:markers,zoom:10,mapElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\",borderRadius:\"inherit\"}})}))))));};export default Maps_Page;","map":{"version":3,"sources":["/home/filipe/Desktop/AMS/Projeto/react_frontend/src/views/examples/Maps_Page.js"],"names":["React","useState","useEffect","Card","Container","Row","Header","Maps","call_time","Maps_Page","markers","setMarkers","interval","setInterval","getAllLocations","then","value","clearInterval","fetch","response","json","result","all_locations","i","length","push","lat","lng","id","status","height","borderRadius"],"mappings":"+eAAA;;;;;;;;;;;;;;;;EAiBA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,SAAxB,KAAwC,OAAxC,CACA;AACA;AACA,OAAQC,IAAR,CAAcC,SAAd,CAAyBC,GAAzB,KAAmC,YAAnC,CACA;AACA,MAAOC,CAAAA,MAAP,KAAmB,oCAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,qBAAjB,CAEA,KAAMC,CAAAA,SAAS,CAAG,IAAlB,CAGA,KAAMC,CAAAA,SAAS,CAAG,IAAM,iBAEQR,QAAQ,CAAC,EAAD,CAFhB,wCAEfS,OAFe,eAENC,UAFM,eAItBT,SAAS,CAAC,IAAM,CACd,KAAMU,CAAAA,QAAQ,CAAGC,WAAW,CAC1B,IAAM,CACJC,eAAe,GAAGC,IAAlB,CAAwBC,KAAD,EAAW,CAChCL,UAAU,CAACK,KAAD,CAAV,CACD,CAFD,EAID,CANyB,CAMvBR,SANuB,CAA5B,CAQE,MAAO,IAAMS,aAAa,CAACL,QAAD,CAA1B,CACD,CAVM,CAUL,EAVK,CAAT,CAaA,KAAME,CAAAA,eAAe,0FAAG,4LACDI,CAAAA,KAAK,mBADJ,QAClBC,QADkB,qCAGHA,CAAAA,QAAQ,CAACC,IAAT,EAHG,QAGlBC,MAHkB,eAIlBC,aAJkB,CAIF,EAJE,CAKtB,IAASC,CAAT,CAAW,CAAX,CAAcA,CAAC,CAAGF,MAAM,CAACG,MAAzB,CAAiCD,CAAC,EAAlC,CAAqC,CACnCD,aAAa,CAACG,IAAd,CACE,CACEC,GAAG,CAAEL,MAAM,CAACE,CAAD,CAAN,CAAU,UAAV,EAAsB,KAAtB,CADP,CAEEI,GAAG,CAAEN,MAAM,CAACE,CAAD,CAAN,CAAU,UAAV,EAAsB,KAAtB,CAFP,CAGEK,EAAE,CAAEP,MAAM,CAACE,CAAD,CAAN,CAAU,IAAV,CAHN,CAIEM,MAAM,CAAER,MAAM,CAACE,CAAD,CAAN,CAAU,QAAV,CAJV,CADF,EAQD,CAdqB,gCAefD,aAfe,uDAAH,kBAAfR,CAAAA,eAAe,0CAArB,CAkBA,mBACI,qDACE,oBAAC,MAAD,MADF,cAGE,oBAAC,SAAD,EAAW,SAAS,CAAC,OAArB,CAA6B,KAAK,KAAlC,eACE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,oBAAC,IAAD,EAAM,SAAS,CAAC,iBAAhB,eACE,oBAAC,IAAD,EACE,OAAO,CAAEJ,OADX,CAEE,IAAI,CAAI,EAFV,CAGE,UAAU,cACR,2BAAK,KAAK,CAAE,CAAEoB,MAAM,OAAR,CAAkBC,YAAY,CAAE,SAAhC,CAAZ,EAJJ,EADF,CADF,CADF,CADF,CAHF,CADJ,CAqBC,CAxDH,CA0DA,cAAetB,CAAAA,SAAf","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React, {useState,useEffect} from \"react\";\n// react plugin used to create google maps\n// reactstrap components\nimport {Card, Container, Row} from \"reactstrap\";\n// core components\nimport Header from \"../../components/Headers/Header.js\";\nimport Maps from \"./Maps_Component.js\";\n\nconst call_time = 2000;\n\n\nconst Maps_Page = () => {\n\n  const [markers, setMarkers] = useState([]);\n\n  useEffect(() => {\n    const interval = setInterval(\n      () => {\n        getAllLocations().then((value) => {\n          setMarkers(value)\n        }\n        );\n      }, call_time);\n\n      return () => clearInterval(interval)\n    },[]\n  )\n\n  const getAllLocations = async () => {\n    let response = await fetch(\n      `/list_accidents`);\n    let result = await response.json();\n    let all_locations = [];\n    for (let i=0; i < result.length; i++){\n      all_locations.push(\n        {\n          lat: result[i][\"location\"][\"lat\"],\n          lng: result[i][\"location\"][\"lng\"],\n          id: result[i][\"id\"],\n          status: result[i][\"status\"]\n        }\n      )\n    }\n    return all_locations;\n  }\n\n  return(\n      <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          <Row>\n            <div className=\"col\">\n              <Card className=\"shadow border-0\">\n                <Maps\n                  markers={markers}\n                  zoom = {10}\n                  mapElement={\n                    <div style={{ height: `100%`, borderRadius: \"inherit\" }} />\n                  }\n                />\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>\n    );\n  }\n\nexport default Maps_Page;\n"]},"metadata":{},"sourceType":"module"}