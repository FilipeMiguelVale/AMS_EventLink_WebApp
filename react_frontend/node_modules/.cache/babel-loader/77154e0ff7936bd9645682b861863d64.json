{"ast":null,"code":"import clsx from'clsx';import React from'react';import{Swipeable,LEFT,RIGHT}from'react-swipeable';import throttle from'lodash.throttle';import debounce from'lodash.debounce';import isEqual from'lodash.isequal';import ResizeObserver from'resize-observer-polyfill';import SVG from'./SVG';const screenChangeEvents=['fullscreenchange','MSFullscreenChange','mozfullscreenchange','webkitfullscreenchange'];function isEnterOrSpaceKey(event){const key=parseInt(event.keyCode||event.which||0,10);const ENTER_KEY_CODE=66;const SPACEBAR_KEY_CODE=62;return key===ENTER_KEY_CODE||key===SPACEBAR_KEY_CODE;}export default class ImageGallery extends React.Component{constructor(props){super(props);this.state={currentIndex:props.startIndex,thumbsTranslate:0,currentSlideOffset:0,galleryWidth:0,thumbnailsWrapperWidth:0,thumbnailsWrapperHeight:0,isFullscreen:false,isPlaying:false};this.loadedImages={};this.imageGallery=React.createRef();this.thumbnailsWrapper=React.createRef();this.thumbnails=React.createRef();this.imageGallerySlideWrapper=React.createRef();// bindings\nthis.handleKeyDown=this.handleKeyDown.bind(this);this.handleMouseDown=this.handleMouseDown.bind(this);this.handleOnSwiped=this.handleOnSwiped.bind(this);this.handleScreenChange=this.handleScreenChange.bind(this);this.handleSwiping=this.handleSwiping.bind(this);this.onThumbnailMouseLeave=this.onThumbnailMouseLeave.bind(this);this.handleImageError=this.handleImageError.bind(this);this.pauseOrPlay=this.pauseOrPlay.bind(this);this.renderThumbInner=this.renderThumbInner.bind(this);this.renderItem=this.renderItem.bind(this);this.slideLeft=this.slideLeft.bind(this);this.slideRight=this.slideRight.bind(this);this.toggleFullScreen=this.toggleFullScreen.bind(this);this.togglePlay=this.togglePlay.bind(this);// Used to update the throttle if slideDuration changes\nthis.unthrottledSlideToIndex=this.slideToIndex;this.slideToIndex=throttle(this.unthrottledSlideToIndex,props.slideDuration,{trailing:false});if(props.lazyLoad){this.lazyLoaded=[];}}componentDidMount(){const autoPlay=this.props.autoPlay;if(autoPlay){this.play();}window.addEventListener('keydown',this.handleKeyDown);window.addEventListener('mousedown',this.handleMouseDown);this.initResizeObserver(this.imageGallerySlideWrapper);this.addScreenChangeEvent();}componentDidUpdate(prevProps,prevState){const _this$props=this.props,items=_this$props.items,lazyLoad=_this$props.lazyLoad,slideDuration=_this$props.slideDuration,startIndex=_this$props.startIndex,thumbnailPosition=_this$props.thumbnailPosition,showThumbnails=_this$props.showThumbnails;const currentIndex=this.state.currentIndex;const itemsSizeChanged=prevProps.items.length!==items.length;const itemsChanged=!isEqual(prevProps.items,items);const startIndexUpdated=prevProps.startIndex!==startIndex;const thumbnailsPositionChanged=prevProps.thumbnailPosition!==thumbnailPosition;const showThumbnailsChanged=prevProps.showThumbnails!==showThumbnails;if(thumbnailsPositionChanged){// re-initialize resizeObserver because slides was unmounted and mounted again\nthis.removeResizeObserver();this.initResizeObserver(this.imageGallerySlideWrapper);}if(itemsSizeChanged||showThumbnailsChanged){this.handleResize();}if(prevState.currentIndex!==currentIndex){this.slideThumbnailBar(prevState.currentIndex);}// if slideDuration changes, update slideToIndex throttle\nif(prevProps.slideDuration!==slideDuration){this.slideToIndex=throttle(this.unthrottledSlideToIndex,slideDuration,{trailing:false});}if(lazyLoad&&(!prevProps.lazyLoad||itemsChanged)){this.lazyLoaded=[];}if(startIndexUpdated||itemsChanged){// TODO: this should be fix/removed if all it is doing\n// is resetting the gallery currentIndext state\nthis.setState({currentIndex:startIndex});}}componentWillUnmount(){window.removeEventListener('keydown',this.handleKeyDown);window.removeEventListener('mousedown',this.handleMouseDown);this.removeScreenChangeEvent();this.removeResizeObserver();if(this.playPauseIntervalId){window.clearInterval(this.playPauseIntervalId);this.playPauseIntervalId=null;}if(this.transitionTimer){window.clearTimeout(this.transitionTimer);}}onSliding(){const _this$state=this.state,currentIndex=_this$state.currentIndex,isTransitioning=_this$state.isTransitioning;const _this$props2=this.props,onSlide=_this$props2.onSlide,slideDuration=_this$props2.slideDuration;this.transitionTimer=window.setTimeout(()=>{if(isTransitioning){this.setState({isTransitioning:!isTransitioning});if(onSlide){onSlide(currentIndex);}}},slideDuration+50);}onThumbnailClick(event,index){const onThumbnailClick=this.props.onThumbnailClick;this.slideToIndex(index,event);if(onThumbnailClick){onThumbnailClick(event,index);}}onThumbnailMouseOver(event,index){if(this.thumbnailMouseOverTimer){window.clearTimeout(this.thumbnailMouseOverTimer);this.thumbnailMouseOverTimer=null;}this.thumbnailMouseOverTimer=window.setTimeout(()=>{this.slideToIndex(index);this.pause();},300);}onThumbnailMouseLeave(){if(this.thumbnailMouseOverTimer){const autoPlay=this.props.autoPlay;window.clearTimeout(this.thumbnailMouseOverTimer);this.thumbnailMouseOverTimer=null;if(autoPlay){this.play();}}}setScrollDirection(dir){const _this$state2=this.state,scrollingUpDown=_this$state2.scrollingUpDown,scrollingLeftRight=_this$state2.scrollingLeftRight;if(!scrollingUpDown&&!scrollingLeftRight){if(dir===LEFT||dir===RIGHT){this.setState({scrollingLeftRight:true});}else{this.setState({scrollingUpDown:true});}}}setThumbsTranslate(thumbsTranslate){this.setState({thumbsTranslate});}setModalFullscreen(state){const onScreenChange=this.props.onScreenChange;this.setState({modalFullscreen:state});// manually call because browser does not support screenchange events\nif(onScreenChange){onScreenChange(state);}}getThumbsTranslate(indexDifference){const _this$props3=this.props,disableThumbnailScroll=_this$props3.disableThumbnailScroll,items=_this$props3.items;const _this$state3=this.state,thumbnailsWrapperWidth=_this$state3.thumbnailsWrapperWidth,thumbnailsWrapperHeight=_this$state3.thumbnailsWrapperHeight;let totalScroll;const thumbElement=this.thumbnails&&this.thumbnails.current;if(disableThumbnailScroll)return 0;if(thumbElement){// total scroll required to see the last thumbnail\nif(this.isThumbnailVertical()){if(thumbElement.scrollHeight<=thumbnailsWrapperHeight){return 0;}totalScroll=thumbElement.scrollHeight-thumbnailsWrapperHeight;}else{if(thumbElement.scrollWidth<=thumbnailsWrapperWidth||thumbnailsWrapperWidth<=0){return 0;}totalScroll=thumbElement.scrollWidth-thumbnailsWrapperWidth;}// scroll-x required per index change\nconst perIndexScroll=totalScroll/(items.length-1);return indexDifference*perIndexScroll;}return 0;}getAlignmentClassName(index){// Necessary for lazing loading\nconst currentIndex=this.state.currentIndex;const _this$props4=this.props,infinite=_this$props4.infinite,items=_this$props4.items;let alignment='';const leftClassName='left';const centerClassName='center';const rightClassName='right';switch(index){case currentIndex-1:alignment=\" \".concat(leftClassName);break;case currentIndex:alignment=\" \".concat(centerClassName);break;case currentIndex+1:alignment=\" \".concat(rightClassName);break;default:break;}if(items.length>=3&&infinite){if(index===0&&currentIndex===items.length-1){// set first slide as right slide if were sliding right from last slide\nalignment=\" \".concat(rightClassName);}else if(index===items.length-1&&currentIndex===0){// set last slide as left slide if were sliding left from first slide\nalignment=\" \".concat(leftClassName);}}return alignment;}getTranslateXForTwoSlide(index){// For taking care of infinite swipe when there are only two slides\nconst _this$state4=this.state,currentIndex=_this$state4.currentIndex,currentSlideOffset=_this$state4.currentSlideOffset,previousIndex=_this$state4.previousIndex;const indexChanged=currentIndex!==previousIndex;const firstSlideWasPrevSlide=index===0&&previousIndex===0;const secondSlideWasPrevSlide=index===1&&previousIndex===1;const firstSlideIsNextSlide=index===0&&currentIndex===1;const secondSlideIsNextSlide=index===1&&currentIndex===0;const swipingEnded=currentSlideOffset===0;const baseTranslateX=-100*currentIndex;let translateX=baseTranslateX+index*100+currentSlideOffset;// keep track of user swiping direction\n// important to understand how to translateX based on last direction\nif(currentSlideOffset>0){this.direction='left';}else if(currentSlideOffset<0){this.direction='right';}// when swiping between two slides make sure the next and prev slides\n// are on both left and right\nif(secondSlideIsNextSlide&&currentSlideOffset>0){// swiping right\ntranslateX=-100+currentSlideOffset;}if(firstSlideIsNextSlide&&currentSlideOffset<0){// swiping left\ntranslateX=100+currentSlideOffset;}if(indexChanged){// when indexChanged move the slide to the correct side\nif(firstSlideWasPrevSlide&&swipingEnded&&this.direction==='left'){translateX=100;}else if(secondSlideWasPrevSlide&&swipingEnded&&this.direction==='right'){translateX=-100;}}else{// keep the slide on the correct side if the swipe was not successful\nif(secondSlideIsNextSlide&&swipingEnded&&this.direction==='left'){translateX=-100;}if(firstSlideIsNextSlide&&swipingEnded&&this.direction==='right'){translateX=100;}}return translateX;}getThumbnailBarHeight(){if(this.isThumbnailVertical()){const gallerySlideWrapperHeight=this.state.gallerySlideWrapperHeight;return{height:gallerySlideWrapperHeight};}return{};}getSlideStyle(index){const _this$state5=this.state,currentIndex=_this$state5.currentIndex,currentSlideOffset=_this$state5.currentSlideOffset,slideStyle=_this$state5.slideStyle;const _this$props5=this.props,infinite=_this$props5.infinite,items=_this$props5.items,useTranslate3D=_this$props5.useTranslate3D,isRTL=_this$props5.isRTL;const baseTranslateX=-100*currentIndex;const totalSlides=items.length-1;// calculates where the other slides belong based on currentIndex\n// if it is RTL the base line should be reversed\nlet translateX=(baseTranslateX+index*100)*(isRTL?-1:1)+currentSlideOffset;if(infinite&&items.length>2){if(currentIndex===0&&index===totalSlides){// make the last slide the slide before the first\n// if it is RTL the base line should be reversed\ntranslateX=-100*(isRTL?-1:1)+currentSlideOffset;}else if(currentIndex===totalSlides&&index===0){// make the first slide the slide after the last\n// if it is RTL the base line should be reversed\ntranslateX=100*(isRTL?-1:1)+currentSlideOffset;}}// Special case when there are only 2 items with infinite on\nif(infinite&&items.length===2){translateX=this.getTranslateXForTwoSlide(index);}let translate=\"translate(\".concat(translateX,\"%, 0)\");if(useTranslate3D){translate=\"translate3d(\".concat(translateX,\"%, 0, 0)\");}return Object.assign({},{WebkitTransform:translate,MozTransform:translate,msTransform:translate,OTransform:translate,transform:translate},slideStyle);}getCurrentIndex(){const currentIndex=this.state.currentIndex;return currentIndex;}getThumbnailStyle(){let translate;const _this$props6=this.props,useTranslate3D=_this$props6.useTranslate3D,isRTL=_this$props6.isRTL;const thumbsTranslate=this.state.thumbsTranslate;const verticalTranslateValue=isRTL?thumbsTranslate*-1:thumbsTranslate;if(this.isThumbnailVertical()){translate=\"translate(0, \".concat(thumbsTranslate,\"px)\");if(useTranslate3D){translate=\"translate3d(0, \".concat(thumbsTranslate,\"px, 0)\");}}else{translate=\"translate(\".concat(verticalTranslateValue,\"px, 0)\");if(useTranslate3D){translate=\"translate3d(\".concat(verticalTranslateValue,\"px, 0, 0)\");}}return{WebkitTransform:translate,MozTransform:translate,msTransform:translate,OTransform:translate,transform:translate};}getSlideItems(){const currentIndex=this.state.currentIndex;const _this$props7=this.props,infinite=_this$props7.infinite,items=_this$props7.items,slideOnThumbnailOver=_this$props7.slideOnThumbnailOver,onClick=_this$props7.onClick,lazyLoad=_this$props7.lazyLoad,onTouchMove=_this$props7.onTouchMove,onTouchEnd=_this$props7.onTouchEnd,onTouchStart=_this$props7.onTouchStart,onMouseOver=_this$props7.onMouseOver,onMouseLeave=_this$props7.onMouseLeave,renderItem=_this$props7.renderItem,renderThumbInner=_this$props7.renderThumbInner,showThumbnails=_this$props7.showThumbnails,showBullets=_this$props7.showBullets;const slides=[];const thumbnails=[];const bullets=[];items.forEach((item,index)=>{const alignment=this.getAlignmentClassName(index);const originalClass=item.originalClass?\" \".concat(item.originalClass):'';const thumbnailClass=item.thumbnailClass?\" \".concat(item.thumbnailClass):'';const handleRenderItem=item.renderItem||renderItem||this.renderItem;const handleRenderThumbInner=item.renderThumbInner||renderThumbInner||this.renderThumbInner;const showItem=!lazyLoad||alignment||this.lazyLoaded[index];if(showItem&&lazyLoad&&!this.lazyLoaded[index]){this.lazyLoaded[index]=true;}const slideStyle=this.getSlideStyle(index);const slide=/*#__PURE__*/React.createElement(\"div\",{key:\"slide-\".concat(item.original,\"-\").concat(index),tabIndex:\"-1\",className:\"image-gallery-slide \".concat(alignment,\" \").concat(originalClass),style:slideStyle,onClick:onClick,onKeyUp:this.handleSlideKeyUp,onTouchMove:onTouchMove,onTouchEnd:onTouchEnd,onTouchStart:onTouchStart,onMouseOver:onMouseOver,onFocus:onMouseOver,onMouseLeave:onMouseLeave,role:\"button\"},showItem?handleRenderItem(item):/*#__PURE__*/React.createElement(\"div\",{style:{height:'100%'}}));if(infinite){// don't add some slides while transitioning to avoid background transitions\nif(this.shouldPushSlideOnInfiniteMode(index)){slides.push(slide);}}else{slides.push(slide);}if(showThumbnails){const igThumbnailClass=clsx('image-gallery-thumbnail',thumbnailClass,{active:currentIndex===index});thumbnails.push(/*#__PURE__*/React.createElement(\"button\",{key:\"thumbnail-\".concat(item.original,\"-\").concat(index),type:\"button\",tabIndex:\"0\",\"aria-pressed\":currentIndex===index?'true':'false',\"aria-label\":\"Go to Slide \".concat(index+1),className:igThumbnailClass,onMouseLeave:slideOnThumbnailOver?this.onThumbnailMouseLeave:null,onMouseOver:event=>this.handleThumbnailMouseOver(event,index),onFocus:event=>this.handleThumbnailMouseOver(event,index),onKeyUp:event=>this.handleThumbnailKeyUp(event,index),onClick:event=>this.onThumbnailClick(event,index)},handleRenderThumbInner(item)));}if(showBullets){// generate bullet elements and store them in array\nconst bulletOnClick=event=>{if(item.bulletOnClick){item.bulletOnClick({item,itemIndex:index,currentIndex});}return this.slideToIndex.call(this,index,event);};const igBulletClass=clsx('image-gallery-bullet',item.bulletClass,{active:currentIndex===index});bullets.push(/*#__PURE__*/React.createElement(\"button\",{type:\"button\",key:\"bullet-\".concat(item.original,\"-\").concat(index),className:igBulletClass,onClick:bulletOnClick,\"aria-pressed\":currentIndex===index?'true':'false',\"aria-label\":\"Go to Slide \".concat(index+1)}));}});return{slides,thumbnails,bullets};}ignoreIsTransitioning(){/*\n      Ignore isTransitioning because were not going to sibling slides\n      e.g. center to left or center to right\n    */const items=this.props.items;const _this$state6=this.state,previousIndex=_this$state6.previousIndex,currentIndex=_this$state6.currentIndex;const totalSlides=items.length-1;// we want to show the in between slides transition\nconst slidingMoreThanOneSlideLeftOrRight=Math.abs(previousIndex-currentIndex)>1;const notGoingFromFirstToLast=!(previousIndex===0&&currentIndex===totalSlides);const notGoingFromLastToFirst=!(previousIndex===totalSlides&&currentIndex===0);return slidingMoreThanOneSlideLeftOrRight&&notGoingFromFirstToLast&&notGoingFromLastToFirst;}isFirstOrLastSlide(index){const items=this.props.items;const totalSlides=items.length-1;const isLastSlide=index===totalSlides;const isFirstSlide=index===0;return isLastSlide||isFirstSlide;}slideIsTransitioning(index){/*\n    returns true if the gallery is transitioning and the index is not the\n    previous or currentIndex\n    */const _this$state7=this.state,isTransitioning=_this$state7.isTransitioning,previousIndex=_this$state7.previousIndex,currentIndex=_this$state7.currentIndex;const indexIsNotPreviousOrNextSlide=!(index===previousIndex||index===currentIndex);return isTransitioning&&indexIsNotPreviousOrNextSlide;}shouldPushSlideOnInfiniteMode(index){/*\n      Push (show) slide if slide is the current slide and the next slide\n      OR\n      The slide is going more than one slide left or right, but not going from\n      first to last and not going from last to first\n      Edge case:\n      If you go to the first or last slide, when they're\n      not left, or right of each other they will try to catch up in the background\n      so unless were going from first to last or vice versa we don't want the first\n      or last slide to show up during the transition\n    */return!this.slideIsTransitioning(index)||this.ignoreIsTransitioning()&&!this.isFirstOrLastSlide(index);}slideThumbnailBar(previousIndex){const _this$state8=this.state,thumbsTranslate=_this$state8.thumbsTranslate,currentIndex=_this$state8.currentIndex;if(currentIndex===0){this.setThumbsTranslate(0);}else{const indexDifference=Math.abs(previousIndex-currentIndex);const scroll=this.getThumbsTranslate(indexDifference);if(scroll>0){if(previousIndex<currentIndex){this.setThumbsTranslate(thumbsTranslate-scroll);}else if(previousIndex>currentIndex){this.setThumbsTranslate(thumbsTranslate+scroll);}}}}canSlide(){const items=this.props.items;return items.length>=2;}canSlideLeft(){const _this$props8=this.props,infinite=_this$props8.infinite,isRTL=_this$props8.isRTL;return infinite||(isRTL?this.canSlideNext():this.canSlidePrevious());}canSlideRight(){const _this$props9=this.props,infinite=_this$props9.infinite,isRTL=_this$props9.isRTL;return infinite||(isRTL?this.canSlidePrevious():this.canSlideNext());}canSlidePrevious(){const currentIndex=this.state.currentIndex;return currentIndex>0;}canSlideNext(){const currentIndex=this.state.currentIndex;const items=this.props.items;return currentIndex<items.length-1;}handleSwiping({event,absX,dir}){const _this$props10=this.props,preventDefaultTouchmoveEvent=_this$props10.preventDefaultTouchmoveEvent,disableSwipe=_this$props10.disableSwipe,stopPropagation=_this$props10.stopPropagation;const _this$state9=this.state,galleryWidth=_this$state9.galleryWidth,isTransitioning=_this$state9.isTransitioning,scrollingUpDown=_this$state9.scrollingUpDown,scrollingLeftRight=_this$state9.scrollingLeftRight;if(disableSwipe)return;const swipingTransitionDuration=this.props.swipingTransitionDuration;this.setScrollDirection(dir);if(stopPropagation)event.stopPropagation();if((preventDefaultTouchmoveEvent||scrollingLeftRight)&&event.cancelable){event.preventDefault();}if(!isTransitioning&&!scrollingUpDown){const side=dir===RIGHT?1:-1;let currentSlideOffset=absX/galleryWidth*100;if(Math.abs(currentSlideOffset)>=100){currentSlideOffset=100;}const swipingTransition={transition:\"transform \".concat(swipingTransitionDuration,\"ms ease-out\")};this.setState({currentSlideOffset:side*currentSlideOffset,slideStyle:swipingTransition});}else{// don't move the slide\nthis.setState({currentSlideOffset:0});}}sufficientSwipe(){const currentSlideOffset=this.state.currentSlideOffset;const swipeThreshold=this.props.swipeThreshold;return Math.abs(currentSlideOffset)>swipeThreshold;}handleOnSwiped({event,dir,velocity}){const _this$props11=this.props,disableSwipe=_this$props11.disableSwipe,stopPropagation=_this$props11.stopPropagation,flickThreshold=_this$props11.flickThreshold;const _this$state10=this.state,scrollingUpDown=_this$state10.scrollingUpDown,scrollingLeftRight=_this$state10.scrollingLeftRight;if(disableSwipe)return;const isRTL=this.props.isRTL;if(stopPropagation)event.stopPropagation();if(scrollingUpDown){// user stopped scrollingUpDown\nthis.setState({scrollingUpDown:false});}if(scrollingLeftRight){// user stopped scrollingLeftRight\nthis.setState({scrollingLeftRight:false});}if(!scrollingUpDown){// don't swipe if user is scrolling\n// if it is RTL the direction is reversed\nconst swipeDirection=(dir===LEFT?1:-1)*(isRTL?-1:1);const isFlick=velocity>flickThreshold;this.handleOnSwipedTo(swipeDirection,isFlick);}}handleOnSwipedTo(swipeDirection,isFlick){const _this$state11=this.state,currentIndex=_this$state11.currentIndex,isTransitioning=_this$state11.isTransitioning;let slideTo=currentIndex;if((this.sufficientSwipe()||isFlick)&&!isTransitioning){// slideto the next/prev slide\nslideTo+=swipeDirection;}// If we can't swipe left or right, stay in the current index (noop)\nif(swipeDirection===-1&&!this.canSlideLeft()||swipeDirection===1&&!this.canSlideRight()){slideTo=currentIndex;}this.unthrottledSlideToIndex(slideTo);}handleMouseDown(){// keep track of mouse vs keyboard usage for a11y\nthis.imageGallery.current.classList.add('image-gallery-using-mouse');}handleKeyDown(event){const _this$props12=this.props,disableKeyDown=_this$props12.disableKeyDown,useBrowserFullscreen=_this$props12.useBrowserFullscreen;const isFullscreen=this.state.isFullscreen;// keep track of mouse vs keyboard usage for a11y\nthis.imageGallery.current.classList.remove('image-gallery-using-mouse');if(disableKeyDown)return;const LEFT_ARROW=37;const RIGHT_ARROW=39;const ESC_KEY=27;const key=parseInt(event.keyCode||event.which||0,10);switch(key){case LEFT_ARROW:if(this.canSlideLeft()&&!this.playPauseIntervalId){this.slideLeft(event);}break;case RIGHT_ARROW:if(this.canSlideRight()&&!this.playPauseIntervalId){this.slideRight(event);}break;case ESC_KEY:if(isFullscreen&&!useBrowserFullscreen){this.exitFullScreen();}break;default:break;}}handleImageError(event){const onErrorImageURL=this.props.onErrorImageURL;if(onErrorImageURL&&event.target.src.indexOf(onErrorImageURL)===-1){/* eslint-disable no-param-reassign */event.target.src=onErrorImageURL;/* eslint-enable no-param-reassign */}}removeResizeObserver(){if(this.resizeObserver&&this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current){this.resizeObserver.unobserve(this.imageGallerySlideWrapper.current);}}handleResize(){const currentIndex=this.state.currentIndex;if(this.imageGallery&&this.imageGallery.current){this.setState({galleryWidth:this.imageGallery.current.offsetWidth});}if(this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current){this.setState({gallerySlideWrapperHeight:this.imageGallerySlideWrapper.current.offsetHeight});}if(this.thumbnailsWrapper&&this.thumbnailsWrapper.current){if(this.isThumbnailVertical()){this.setState({thumbnailsWrapperHeight:this.thumbnailsWrapper.current.offsetHeight});}else{this.setState({thumbnailsWrapperWidth:this.thumbnailsWrapper.current.offsetWidth});}}// Adjust thumbnail container when thumbnail width or height is adjusted\nthis.setThumbsTranslate(-this.getThumbsTranslate(currentIndex));}initResizeObserver(element){this.resizeObserver=new ResizeObserver(debounce(entries=>{if(!entries)return;entries.forEach(()=>{this.handleResize();});},300));this.resizeObserver.observe(element.current);}toggleFullScreen(){const isFullscreen=this.state.isFullscreen;if(isFullscreen){this.exitFullScreen();}else{this.fullScreen();}}togglePlay(){if(this.playPauseIntervalId){this.pause();}else{this.play();}}handleScreenChange(){/*\n      handles screen change events that the browser triggers e.g. esc key\n    */const _this$props13=this.props,onScreenChange=_this$props13.onScreenChange,useBrowserFullscreen=_this$props13.useBrowserFullscreen;const fullScreenElement=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;// check if screenchange element is the gallery\nconst isFullscreen=this.imageGallery.current===fullScreenElement;if(onScreenChange)onScreenChange(isFullscreen);if(useBrowserFullscreen)this.setState({isFullscreen});}slideToIndex(index,event){const _this$state12=this.state,currentIndex=_this$state12.currentIndex,isTransitioning=_this$state12.isTransitioning;const _this$props14=this.props,items=_this$props14.items,slideDuration=_this$props14.slideDuration,onBeforeSlide=_this$props14.onBeforeSlide;if(!isTransitioning){if(event){if(this.playPauseIntervalId){// user triggered event while ImageGallery is playing, reset interval\nthis.pause(false);this.play(false);}}const slideCount=items.length-1;let nextIndex=index;if(index<0){nextIndex=slideCount;}else if(index>slideCount){nextIndex=0;}if(onBeforeSlide&&nextIndex!==currentIndex){onBeforeSlide(nextIndex);}this.setState({previousIndex:currentIndex,currentIndex:nextIndex,isTransitioning:nextIndex!==currentIndex,currentSlideOffset:0,slideStyle:{transition:\"all \".concat(slideDuration,\"ms ease-out\")}},this.onSliding);}}slideLeft(event){const isRTL=this.props.isRTL;if(isRTL){this.slideNext(event);}else{this.slidePrevious(event);}}slideRight(event){const isRTL=this.props.isRTL;if(isRTL){this.slidePrevious(event);}else{this.slideNext(event);}}slidePrevious(event){const _this$state13=this.state,currentIndex=_this$state13.currentIndex,currentSlideOffset=_this$state13.currentSlideOffset,isTransitioning=_this$state13.isTransitioning;const items=this.props.items;const nextIndex=currentIndex-1;if(isTransitioning)return;if(items.length===2){/*\n        When there are only 2 slides fake a tiny swipe to get the slides\n        on the correct side for transitioning\n      */this.setState({currentSlideOffset:currentSlideOffset+0.001,// this will reset once index changes\nslideStyle:{transition:'none'}// move the slide over instantly\n},()=>{// add 25ms timeout to avoid delay in moving slides over\nwindow.setTimeout(()=>this.slideToIndex(nextIndex,event),25);});}else{this.slideToIndex(nextIndex,event);}}slideNext(event){const _this$state14=this.state,currentIndex=_this$state14.currentIndex,currentSlideOffset=_this$state14.currentSlideOffset,isTransitioning=_this$state14.isTransitioning;const items=this.props.items;const nextIndex=currentIndex+1;if(isTransitioning)return;if(items.length===2){// same as above for 2 slides\nthis.setState({currentSlideOffset:currentSlideOffset-0.001,slideStyle:{transition:'none'}},()=>{window.setTimeout(()=>this.slideToIndex(nextIndex,event),25);});}else{this.slideToIndex(nextIndex,event);}}handleThumbnailMouseOver(event,index){const slideOnThumbnailOver=this.props.slideOnThumbnailOver;if(slideOnThumbnailOver)this.onThumbnailMouseOver(event,index);}handleThumbnailKeyUp(event,index){// a11y support ^_^\nif(isEnterOrSpaceKey(event))this.onThumbnailClick(event,index);}handleSlideKeyUp(event){// a11y support ^_^\nif(isEnterOrSpaceKey(event)){const onClick=this.props.onClick;onClick(event);}}isThumbnailVertical(){const thumbnailPosition=this.props.thumbnailPosition;return thumbnailPosition==='left'||thumbnailPosition==='right';}addScreenChangeEvent(){screenChangeEvents.forEach(eventName=>{document.addEventListener(eventName,this.handleScreenChange);});}removeScreenChangeEvent(){screenChangeEvents.forEach(eventName=>{document.removeEventListener(eventName,this.handleScreenChange);});}fullScreen(){const useBrowserFullscreen=this.props.useBrowserFullscreen;const gallery=this.imageGallery.current;if(useBrowserFullscreen){if(gallery.requestFullscreen){gallery.requestFullscreen();}else if(gallery.msRequestFullscreen){gallery.msRequestFullscreen();}else if(gallery.mozRequestFullScreen){gallery.mozRequestFullScreen();}else if(gallery.webkitRequestFullscreen){gallery.webkitRequestFullscreen();}else{// fallback to fullscreen modal for unsupported browsers\nthis.setModalFullscreen(true);}}else{this.setModalFullscreen(true);}this.setState({isFullscreen:true});}exitFullScreen(){const isFullscreen=this.state.isFullscreen;const useBrowserFullscreen=this.props.useBrowserFullscreen;if(isFullscreen){if(useBrowserFullscreen){if(document.exitFullscreen){document.exitFullscreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.msExitFullscreen){document.msExitFullscreen();}else{// fallback to fullscreen modal for unsupported browsers\nthis.setModalFullscreen(false);}}else{this.setModalFullscreen(false);}this.setState({isFullscreen:false});}}pauseOrPlay(){const infinite=this.props.infinite;const currentIndex=this.state.currentIndex;if(!infinite&&!this.canSlideRight()){this.pause();}else{this.slideToIndex(currentIndex+1);}}play(shouldCallOnPlay=true){const _this$props15=this.props,onPlay=_this$props15.onPlay,slideInterval=_this$props15.slideInterval,slideDuration=_this$props15.slideDuration;const currentIndex=this.state.currentIndex;if(!this.playPauseIntervalId){this.setState({isPlaying:true});this.playPauseIntervalId=window.setInterval(this.pauseOrPlay,Math.max(slideInterval,slideDuration));if(onPlay&&shouldCallOnPlay){onPlay(currentIndex);}}}pause(shouldCallOnPause=true){const onPause=this.props.onPause;const currentIndex=this.state.currentIndex;if(this.playPauseIntervalId){window.clearInterval(this.playPauseIntervalId);this.playPauseIntervalId=null;this.setState({isPlaying:false});if(onPause&&shouldCallOnPause){onPause(currentIndex);}}}isImageLoaded(item){/*\n      Keep track of images loaded so that onImageLoad prop is not\n      called multiple times when re-render the images\n    */const imageExists=this.loadedImages[item.original];if(imageExists){return true;}// add image as loaded\nthis.loadedImages[item.original]=true;return false;}handleImageLoaded(event,item){const onImageLoad=this.props.onImageLoad;const imageExists=this.loadedImages[item.original];if(!imageExists&&onImageLoad){this.loadedImages[item.original]=true;// prevent from call again\n// image just loaded, call onImageLoad\nonImageLoad(event);}}renderItem(item){const isFullscreen=this.state.isFullscreen;const onImageError=this.props.onImageError;const handleImageError=onImageError||this.handleImageError;const itemSrc=isFullscreen?item.fullscreen||item.original:item.original;return/*#__PURE__*/React.createElement(\"div\",null,item.imageSet?/*#__PURE__*/React.createElement(\"picture\",{onLoad:event=>this.handleImageLoaded(event,item),onError:handleImageError},item.imageSet.map((source,index)=>/*#__PURE__*/React.createElement(\"source\",{key:\"media-\".concat(source.srcSet,\"-\").concat(index),media:source.media,srcSet:source.srcSet,type:source.type})),/*#__PURE__*/React.createElement(\"img\",{className:\"image-gallery-image\",alt:item.originalAlt,src:itemSrc})):/*#__PURE__*/React.createElement(\"img\",{className:\"image-gallery-image\",src:itemSrc,alt:item.originalAlt,srcSet:item.srcSet,sizes:item.sizes,title:item.originalTitle,onLoad:event=>this.handleImageLoaded(event,item),onError:handleImageError}),item.description&&/*#__PURE__*/React.createElement(\"span\",{className:\"image-gallery-description\"},item.description));}renderThumbInner(item){const onThumbnailError=this.props.onThumbnailError;const handleThumbnailError=onThumbnailError||this.handleImageError;return/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-thumbnail-inner\"},/*#__PURE__*/React.createElement(\"img\",{className:\"image-gallery-thumbnail-image\",src:item.thumbnail,alt:item.thumbnailAlt,title:item.thumbnailTitle,onError:handleThumbnailError}),item.thumbnailLabel&&/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-thumbnail-label\"},item.thumbnailLabel));}render(){const _this$state15=this.state,currentIndex=_this$state15.currentIndex,isFullscreen=_this$state15.isFullscreen,modalFullscreen=_this$state15.modalFullscreen,isPlaying=_this$state15.isPlaying;const _this$props16=this.props,additionalClass=_this$props16.additionalClass,indexSeparator=_this$props16.indexSeparator,isRTL=_this$props16.isRTL,items=_this$props16.items,thumbnailPosition=_this$props16.thumbnailPosition,renderFullscreenButton=_this$props16.renderFullscreenButton,renderCustomControls=_this$props16.renderCustomControls,renderLeftNav=_this$props16.renderLeftNav,renderRightNav=_this$props16.renderRightNav,showBullets=_this$props16.showBullets,showFullscreenButton=_this$props16.showFullscreenButton,showIndex=_this$props16.showIndex,showThumbnails=_this$props16.showThumbnails,showNav=_this$props16.showNav,showPlayButton=_this$props16.showPlayButton,renderPlayPauseButton=_this$props16.renderPlayPauseButton;const thumbnailStyle=this.getThumbnailStyle();const _this$getSlideItems=this.getSlideItems(),slides=_this$getSlideItems.slides,thumbnails=_this$getSlideItems.thumbnails,bullets=_this$getSlideItems.bullets;const slideWrapperClass=clsx('image-gallery-slide-wrapper',thumbnailPosition,{'image-gallery-rtl':isRTL});const slideWrapper=/*#__PURE__*/React.createElement(\"div\",{ref:this.imageGallerySlideWrapper,className:slideWrapperClass},renderCustomControls&&renderCustomControls(),this.canSlide()?/*#__PURE__*/React.createElement(React.Fragment,null,showNav&&/*#__PURE__*/React.createElement(React.Fragment,null,renderLeftNav(this.slideLeft,!this.canSlideLeft()),renderRightNav(this.slideRight,!this.canSlideRight())),/*#__PURE__*/React.createElement(Swipeable,{className:\"image-gallery-swipe\",delta:0,onSwiping:this.handleSwiping,onSwiped:this.handleOnSwiped},/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-slides\"},slides))):/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-slides\"},slides),showPlayButton&&renderPlayPauseButton(this.togglePlay,isPlaying),showBullets&&/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-bullets\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-bullets-container\",role:\"navigation\",\"aria-label\":\"Bullet Navigation\"},bullets)),showFullscreenButton&&renderFullscreenButton(this.toggleFullScreen,isFullscreen),showIndex&&/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-index\"},/*#__PURE__*/React.createElement(\"span\",{className:\"image-gallery-index-current\"},currentIndex+1),/*#__PURE__*/React.createElement(\"span\",{className:\"image-gallery-index-separator\"},indexSeparator),/*#__PURE__*/React.createElement(\"span\",{className:\"image-gallery-index-total\"},items.length)));const igClass=clsx('image-gallery',additionalClass,{'fullscreen-modal':modalFullscreen});const igContentClass=clsx('image-gallery-content',thumbnailPosition,{fullscreen:isFullscreen});const thumbnailWrapperClass=clsx('image-gallery-thumbnails-wrapper',thumbnailPosition,{'thumbnails-wrapper-rtl':!this.isThumbnailVertical()&&isRTL});return/*#__PURE__*/React.createElement(\"div\",{ref:this.imageGallery,className:igClass,\"aria-live\":\"polite\"},/*#__PURE__*/React.createElement(\"div\",{className:igContentClass},(thumbnailPosition==='bottom'||thumbnailPosition==='right')&&slideWrapper,showThumbnails&&/*#__PURE__*/React.createElement(\"div\",{className:thumbnailWrapperClass,style:this.getThumbnailBarHeight()},/*#__PURE__*/React.createElement(\"div\",{className:\"image-gallery-thumbnails\",ref:this.thumbnailsWrapper},/*#__PURE__*/React.createElement(\"div\",{ref:this.thumbnails,className:\"image-gallery-thumbnails-container\",style:thumbnailStyle,\"aria-label\":\"Thumbnail Navigation\"},thumbnails))),(thumbnailPosition==='top'||thumbnailPosition==='left')&&slideWrapper));}}ImageGallery.defaultProps={onErrorImageURL:'',additionalClass:'',showNav:true,autoPlay:false,lazyLoad:false,infinite:true,showIndex:false,showBullets:false,showThumbnails:true,showPlayButton:true,showFullscreenButton:true,disableThumbnailScroll:false,disableKeyDown:false,disableSwipe:false,useTranslate3D:true,isRTL:false,useBrowserFullscreen:true,preventDefaultTouchmoveEvent:false,flickThreshold:0.4,stopPropagation:false,indexSeparator:' / ',thumbnailPosition:'bottom',startIndex:0,slideDuration:450,swipingTransitionDuration:0,onSlide:null,onBeforeSlide:null,onScreenChange:null,onPause:null,onPlay:null,onClick:null,onImageLoad:null,onImageError:null,onTouchMove:null,onTouchEnd:null,onTouchStart:null,onMouseOver:null,onMouseLeave:null,onThumbnailError:null,onThumbnailClick:null,renderCustomControls:null,renderThumbInner:null,renderItem:null,slideInterval:3000,slideOnThumbnailOver:false,swipeThreshold:30,renderLeftNav:(onClick,disabled)=>/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-left-nav\",disabled:disabled,onClick:onClick,\"aria-label\":\"Previous Slide\"},/*#__PURE__*/React.createElement(SVG,{icon:\"left\",viewBox:\"6 0 12 24\"})),renderRightNav:(onClick,disabled)=>/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-right-nav\",disabled:disabled,onClick:onClick,\"aria-label\":\"Next Slide\"},/*#__PURE__*/React.createElement(SVG,{icon:\"right\",viewBox:\"6 0 12 24\"})),renderPlayPauseButton:(onClick,isPlaying)=>/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-play-button\",onClick:onClick,\"aria-label\":\"Play or Pause Slideshow\"},/*#__PURE__*/React.createElement(SVG,{strokeWidth:2,icon:isPlaying?'pause':'play'})),renderFullscreenButton:(onClick,isFullscreen)=>/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-fullscreen-button\",onClick:onClick,\"aria-label\":\"Open Fullscreen\"},/*#__PURE__*/React.createElement(SVG,{strokeWidth:2,icon:isFullscreen?'minimize':'maximize'}))};","map":{"version":3,"sources":["/home/filipe/Desktop/PEI/git/PEI/react_frontend/src/views/examples/ImageGallery.jsx"],"names":["clsx","React","Swipeable","LEFT","RIGHT","throttle","debounce","isEqual","ResizeObserver","SVG","screenChangeEvents","isEnterOrSpaceKey","event","key","parseInt","keyCode","which","ENTER_KEY_CODE","SPACEBAR_KEY_CODE","ImageGallery","Component","constructor","props","state","currentIndex","startIndex","thumbsTranslate","currentSlideOffset","galleryWidth","thumbnailsWrapperWidth","thumbnailsWrapperHeight","isFullscreen","isPlaying","loadedImages","imageGallery","createRef","thumbnailsWrapper","thumbnails","imageGallerySlideWrapper","handleKeyDown","bind","handleMouseDown","handleOnSwiped","handleScreenChange","handleSwiping","onThumbnailMouseLeave","handleImageError","pauseOrPlay","renderThumbInner","renderItem","slideLeft","slideRight","toggleFullScreen","togglePlay","unthrottledSlideToIndex","slideToIndex","slideDuration","trailing","lazyLoad","lazyLoaded","componentDidMount","autoPlay","play","window","addEventListener","initResizeObserver","addScreenChangeEvent","componentDidUpdate","prevProps","prevState","items","thumbnailPosition","showThumbnails","itemsSizeChanged","length","itemsChanged","startIndexUpdated","thumbnailsPositionChanged","showThumbnailsChanged","removeResizeObserver","handleResize","slideThumbnailBar","setState","componentWillUnmount","removeEventListener","removeScreenChangeEvent","playPauseIntervalId","clearInterval","transitionTimer","clearTimeout","onSliding","isTransitioning","onSlide","setTimeout","onThumbnailClick","index","onThumbnailMouseOver","thumbnailMouseOverTimer","pause","setScrollDirection","dir","scrollingUpDown","scrollingLeftRight","setThumbsTranslate","setModalFullscreen","onScreenChange","modalFullscreen","getThumbsTranslate","indexDifference","disableThumbnailScroll","totalScroll","thumbElement","current","isThumbnailVertical","scrollHeight","scrollWidth","perIndexScroll","getAlignmentClassName","infinite","alignment","leftClassName","centerClassName","rightClassName","getTranslateXForTwoSlide","previousIndex","indexChanged","firstSlideWasPrevSlide","secondSlideWasPrevSlide","firstSlideIsNextSlide","secondSlideIsNextSlide","swipingEnded","baseTranslateX","translateX","direction","getThumbnailBarHeight","gallerySlideWrapperHeight","height","getSlideStyle","slideStyle","useTranslate3D","isRTL","totalSlides","translate","Object","assign","WebkitTransform","MozTransform","msTransform","OTransform","transform","getCurrentIndex","getThumbnailStyle","verticalTranslateValue","getSlideItems","slideOnThumbnailOver","onClick","onTouchMove","onTouchEnd","onTouchStart","onMouseOver","onMouseLeave","showBullets","slides","bullets","forEach","item","originalClass","thumbnailClass","handleRenderItem","handleRenderThumbInner","showItem","slide","original","handleSlideKeyUp","shouldPushSlideOnInfiniteMode","push","igThumbnailClass","active","handleThumbnailMouseOver","handleThumbnailKeyUp","bulletOnClick","itemIndex","call","igBulletClass","bulletClass","ignoreIsTransitioning","slidingMoreThanOneSlideLeftOrRight","Math","abs","notGoingFromFirstToLast","notGoingFromLastToFirst","isFirstOrLastSlide","isLastSlide","isFirstSlide","slideIsTransitioning","indexIsNotPreviousOrNextSlide","scroll","canSlide","canSlideLeft","canSlideNext","canSlidePrevious","canSlideRight","absX","preventDefaultTouchmoveEvent","disableSwipe","stopPropagation","swipingTransitionDuration","cancelable","preventDefault","side","swipingTransition","transition","sufficientSwipe","swipeThreshold","velocity","flickThreshold","swipeDirection","isFlick","handleOnSwipedTo","slideTo","classList","add","disableKeyDown","useBrowserFullscreen","remove","LEFT_ARROW","RIGHT_ARROW","ESC_KEY","exitFullScreen","onErrorImageURL","target","src","indexOf","resizeObserver","unobserve","offsetWidth","offsetHeight","element","entries","observe","fullScreen","fullScreenElement","document","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","onBeforeSlide","slideCount","nextIndex","slideNext","slidePrevious","eventName","gallery","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","shouldCallOnPlay","onPlay","slideInterval","setInterval","max","shouldCallOnPause","onPause","isImageLoaded","imageExists","handleImageLoaded","onImageLoad","onImageError","itemSrc","fullscreen","imageSet","map","source","srcSet","media","type","originalAlt","sizes","originalTitle","description","onThumbnailError","handleThumbnailError","thumbnail","thumbnailAlt","thumbnailTitle","thumbnailLabel","render","additionalClass","indexSeparator","renderFullscreenButton","renderCustomControls","renderLeftNav","renderRightNav","showFullscreenButton","showIndex","showNav","showPlayButton","renderPlayPauseButton","thumbnailStyle","slideWrapperClass","slideWrapper","igClass","igContentClass","thumbnailWrapperClass","defaultProps","disabled"],"mappings":"AAAA,MAAOA,CAAAA,IAAP,KAAiB,MAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,IAApB,CAA0BC,KAA1B,KAAuC,iBAAvC,CACA,MAAOC,CAAAA,QAAP,KAAqB,iBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,iBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,gBAApB,CACA,MAAOC,CAAAA,cAAP,KAA2B,0BAA3B,CASA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CAEA,KAAMC,CAAAA,kBAAkB,CAAG,CACzB,kBADyB,CAEzB,oBAFyB,CAGzB,qBAHyB,CAIzB,wBAJyB,CAA3B,CAYA,QAASC,CAAAA,iBAAT,CAA2BC,KAA3B,CAAkC,CAChC,KAAMC,CAAAA,GAAG,CAAGC,QAAQ,CAACF,KAAK,CAACG,OAAN,EAAiBH,KAAK,CAACI,KAAvB,EAAgC,CAAjC,CAAoC,EAApC,CAApB,CACA,KAAMC,CAAAA,cAAc,CAAG,EAAvB,CACA,KAAMC,CAAAA,iBAAiB,CAAG,EAA1B,CACA,MAAOL,CAAAA,GAAG,GAAKI,cAAR,EAA0BJ,GAAG,GAAKK,iBAAzC,CACD,CAED,cAAe,MAAMC,CAAAA,YAAN,QAA2BlB,CAAAA,KAAK,CAACmB,SAAU,CAqKxDC,WAAW,CAACC,KAAD,CAAQ,CACjB,MAAMA,KAAN,EACA,KAAKC,KAAL,CAAa,CACXC,YAAY,CAAEF,KAAK,CAACG,UADT,CAEXC,eAAe,CAAE,CAFN,CAGXC,kBAAkB,CAAE,CAHT,CAIXC,YAAY,CAAE,CAJH,CAKXC,sBAAsB,CAAE,CALb,CAMXC,uBAAuB,CAAE,CANd,CAOXC,YAAY,CAAE,KAPH,CAQXC,SAAS,CAAE,KARA,CAAb,CAUA,KAAKC,YAAL,CAAoB,EAApB,CACA,KAAKC,YAAL,CAAoBjC,KAAK,CAACkC,SAAN,EAApB,CACA,KAAKC,iBAAL,CAAyBnC,KAAK,CAACkC,SAAN,EAAzB,CACA,KAAKE,UAAL,CAAkBpC,KAAK,CAACkC,SAAN,EAAlB,CACA,KAAKG,wBAAL,CAAgCrC,KAAK,CAACkC,SAAN,EAAhC,CAEA;AACA,KAAKI,aAAL,CAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB,CACA,KAAKC,eAAL,CAAuB,KAAKA,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAAvB,CACA,KAAKE,cAAL,CAAsB,KAAKA,cAAL,CAAoBF,IAApB,CAAyB,IAAzB,CAAtB,CACA,KAAKG,kBAAL,CAA0B,KAAKA,kBAAL,CAAwBH,IAAxB,CAA6B,IAA7B,CAA1B,CACA,KAAKI,aAAL,CAAqB,KAAKA,aAAL,CAAmBJ,IAAnB,CAAwB,IAAxB,CAArB,CACA,KAAKK,qBAAL,CAA6B,KAAKA,qBAAL,CAA2BL,IAA3B,CAAgC,IAAhC,CAA7B,CACA,KAAKM,gBAAL,CAAwB,KAAKA,gBAAL,CAAsBN,IAAtB,CAA2B,IAA3B,CAAxB,CACA,KAAKO,WAAL,CAAmB,KAAKA,WAAL,CAAiBP,IAAjB,CAAsB,IAAtB,CAAnB,CACA,KAAKQ,gBAAL,CAAwB,KAAKA,gBAAL,CAAsBR,IAAtB,CAA2B,IAA3B,CAAxB,CACA,KAAKS,UAAL,CAAkB,KAAKA,UAAL,CAAgBT,IAAhB,CAAqB,IAArB,CAAlB,CACA,KAAKU,SAAL,CAAiB,KAAKA,SAAL,CAAeV,IAAf,CAAoB,IAApB,CAAjB,CACA,KAAKW,UAAL,CAAkB,KAAKA,UAAL,CAAgBX,IAAhB,CAAqB,IAArB,CAAlB,CACA,KAAKY,gBAAL,CAAwB,KAAKA,gBAAL,CAAsBZ,IAAtB,CAA2B,IAA3B,CAAxB,CACA,KAAKa,UAAL,CAAkB,KAAKA,UAAL,CAAgBb,IAAhB,CAAqB,IAArB,CAAlB,CAEA;AACA,KAAKc,uBAAL,CAA+B,KAAKC,YAApC,CACA,KAAKA,YAAL,CAAoBlD,QAAQ,CAC1B,KAAKiD,uBADqB,CACIhC,KAAK,CAACkC,aADV,CACyB,CAAEC,QAAQ,CAAE,KAAZ,CADzB,CAA5B,CAIA,GAAInC,KAAK,CAACoC,QAAV,CAAoB,CAClB,KAAKC,UAAL,CAAkB,EAAlB,CACD,CACF,CAEDC,iBAAiB,EAAG,MACVC,CAAAA,QADU,CACG,KAAKvC,KADR,CACVuC,QADU,CAElB,GAAIA,QAAJ,CAAc,CACZ,KAAKC,IAAL,GACD,CACDC,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmC,KAAKzB,aAAxC,EACAwB,MAAM,CAACC,gBAAP,CAAwB,WAAxB,CAAqC,KAAKvB,eAA1C,EACA,KAAKwB,kBAAL,CAAwB,KAAK3B,wBAA7B,EACA,KAAK4B,oBAAL,GACD,CAEDC,kBAAkB,CAACC,SAAD,CAAYC,SAAZ,CAAuB,mBAQnC,KAAK/C,KAR8B,CAErCgD,KAFqC,aAErCA,KAFqC,CAGrCZ,QAHqC,aAGrCA,QAHqC,CAIrCF,aAJqC,aAIrCA,aAJqC,CAKrC/B,UALqC,aAKrCA,UALqC,CAMrC8C,iBANqC,aAMrCA,iBANqC,CAOrCC,cAPqC,aAOrCA,cAPqC,MAS/BhD,CAAAA,YAT+B,CASd,KAAKD,KATS,CAS/BC,YAT+B,CAUvC,KAAMiD,CAAAA,gBAAgB,CAAGL,SAAS,CAACE,KAAV,CAAgBI,MAAhB,GAA2BJ,KAAK,CAACI,MAA1D,CACA,KAAMC,CAAAA,YAAY,CAAG,CAACpE,OAAO,CAAC6D,SAAS,CAACE,KAAX,CAAkBA,KAAlB,CAA7B,CACA,KAAMM,CAAAA,iBAAiB,CAAGR,SAAS,CAAC3C,UAAV,GAAyBA,UAAnD,CACA,KAAMoD,CAAAA,yBAAyB,CAAGT,SAAS,CAACG,iBAAV,GAAgCA,iBAAlE,CACA,KAAMO,CAAAA,qBAAqB,CAAGV,SAAS,CAACI,cAAV,GAA6BA,cAA3D,CAEA,GAAIK,yBAAJ,CAA+B,CAC7B;AACA,KAAKE,oBAAL,GACA,KAAKd,kBAAL,CAAwB,KAAK3B,wBAA7B,EACD,CAED,GAAImC,gBAAgB,EAAIK,qBAAxB,CAA+C,CAC7C,KAAKE,YAAL,GACD,CACD,GAAIX,SAAS,CAAC7C,YAAV,GAA2BA,YAA/B,CAA6C,CAC3C,KAAKyD,iBAAL,CAAuBZ,SAAS,CAAC7C,YAAjC,EACD,CACD;AACA,GAAI4C,SAAS,CAACZ,aAAV,GAA4BA,aAAhC,CAA+C,CAC7C,KAAKD,YAAL,CAAoBlD,QAAQ,CAC1B,KAAKiD,uBADqB,CACIE,aADJ,CACmB,CAAEC,QAAQ,CAAE,KAAZ,CADnB,CAA5B,CAGD,CACD,GAAIC,QAAQ,GAAK,CAACU,SAAS,CAACV,QAAX,EAAuBiB,YAA5B,CAAZ,CAAuD,CACrD,KAAKhB,UAAL,CAAkB,EAAlB,CACD,CAED,GAAIiB,iBAAiB,EAAID,YAAzB,CAAuC,CACrC;AACA;AACA,KAAKO,QAAL,CAAc,CAAE1D,YAAY,CAAEC,UAAhB,CAAd,EACD,CACF,CAED0D,oBAAoB,EAAG,CACrBpB,MAAM,CAACqB,mBAAP,CAA2B,SAA3B,CAAsC,KAAK7C,aAA3C,EACAwB,MAAM,CAACqB,mBAAP,CAA2B,WAA3B,CAAwC,KAAK3C,eAA7C,EACA,KAAK4C,uBAAL,GACA,KAAKN,oBAAL,GACA,GAAI,KAAKO,mBAAT,CAA8B,CAC5BvB,MAAM,CAACwB,aAAP,CAAqB,KAAKD,mBAA1B,EACA,KAAKA,mBAAL,CAA2B,IAA3B,CACD,CACD,GAAI,KAAKE,eAAT,CAA0B,CACxBzB,MAAM,CAAC0B,YAAP,CAAoB,KAAKD,eAAzB,EACD,CACF,CAEDE,SAAS,EAAG,mBACgC,KAAKnE,KADrC,CACFC,YADE,aACFA,YADE,CACYmE,eADZ,aACYA,eADZ,oBAEyB,KAAKrE,KAF9B,CAEFsE,OAFE,cAEFA,OAFE,CAEOpC,aAFP,cAEOA,aAFP,CAGV,KAAKgC,eAAL,CAAuBzB,MAAM,CAAC8B,UAAP,CAAkB,IAAM,CAC7C,GAAIF,eAAJ,CAAqB,CACnB,KAAKT,QAAL,CAAc,CAAES,eAAe,CAAE,CAACA,eAApB,CAAd,EACA,GAAIC,OAAJ,CAAa,CACXA,OAAO,CAACpE,YAAD,CAAP,CACD,CACF,CACF,CAPsB,CAOpBgC,aAAa,CAAG,EAPI,CAAvB,CAQD,CAEDsC,gBAAgB,CAAClF,KAAD,CAAQmF,KAAR,CAAe,MACrBD,CAAAA,gBADqB,CACA,KAAKxE,KADL,CACrBwE,gBADqB,CAE7B,KAAKvC,YAAL,CAAkBwC,KAAlB,CAAyBnF,KAAzB,EACA,GAAIkF,gBAAJ,CAAsB,CACpBA,gBAAgB,CAAClF,KAAD,CAAQmF,KAAR,CAAhB,CACD,CACF,CAEDC,oBAAoB,CAACpF,KAAD,CAAQmF,KAAR,CAAe,CACjC,GAAI,KAAKE,uBAAT,CAAkC,CAChClC,MAAM,CAAC0B,YAAP,CAAoB,KAAKQ,uBAAzB,EACA,KAAKA,uBAAL,CAA+B,IAA/B,CACD,CACD,KAAKA,uBAAL,CAA+BlC,MAAM,CAAC8B,UAAP,CAAkB,IAAM,CACrD,KAAKtC,YAAL,CAAkBwC,KAAlB,EACA,KAAKG,KAAL,GACD,CAH8B,CAG5B,GAH4B,CAA/B,CAID,CAEDrD,qBAAqB,EAAG,CACtB,GAAI,KAAKoD,uBAAT,CAAkC,MACxBpC,CAAAA,QADwB,CACX,KAAKvC,KADM,CACxBuC,QADwB,CAEhCE,MAAM,CAAC0B,YAAP,CAAoB,KAAKQ,uBAAzB,EACA,KAAKA,uBAAL,CAA+B,IAA/B,CACA,GAAIpC,QAAJ,CAAc,CACZ,KAAKC,IAAL,GACD,CACF,CACF,CAEDqC,kBAAkB,CAACC,GAAD,CAAM,oBAC0B,KAAK7E,KAD/B,CACd8E,eADc,cACdA,eADc,CACGC,kBADH,cACGA,kBADH,CAGtB,GAAI,CAACD,eAAD,EAAoB,CAACC,kBAAzB,CAA6C,CAC3C,GAAIF,GAAG,GAAKjG,IAAR,EAAgBiG,GAAG,GAAKhG,KAA5B,CAAmC,CACjC,KAAK8E,QAAL,CAAc,CAAEoB,kBAAkB,CAAE,IAAtB,CAAd,EACD,CAFD,IAEO,CACL,KAAKpB,QAAL,CAAc,CAAEmB,eAAe,CAAE,IAAnB,CAAd,EACD,CACF,CACF,CAEDE,kBAAkB,CAAC7E,eAAD,CAAkB,CAClC,KAAKwD,QAAL,CAAc,CAAExD,eAAF,CAAd,EACD,CAED8E,kBAAkB,CAACjF,KAAD,CAAQ,MAChBkF,CAAAA,cADgB,CACG,KAAKnF,KADR,CAChBmF,cADgB,CAExB,KAAKvB,QAAL,CAAc,CAAEwB,eAAe,CAAEnF,KAAnB,CAAd,EACA;AACA,GAAIkF,cAAJ,CAAoB,CAClBA,cAAc,CAAClF,KAAD,CAAd,CACD,CACF,CAEDoF,kBAAkB,CAACC,eAAD,CAAkB,oBACQ,KAAKtF,KADb,CAC1BuF,sBAD0B,cAC1BA,sBAD0B,CACFvC,KADE,cACFA,KADE,oBAE0B,KAAK/C,KAF/B,CAE1BM,sBAF0B,cAE1BA,sBAF0B,CAEFC,uBAFE,cAEFA,uBAFE,CAGlC,GAAIgF,CAAAA,WAAJ,CACA,KAAMC,CAAAA,YAAY,CAAG,KAAK1E,UAAL,EAAmB,KAAKA,UAAL,CAAgB2E,OAAxD,CAEA,GAAIH,sBAAJ,CAA4B,MAAO,EAAP,CAE5B,GAAIE,YAAJ,CAAkB,CAChB;AACA,GAAI,KAAKE,mBAAL,EAAJ,CAAgC,CAC9B,GAAIF,YAAY,CAACG,YAAb,EAA6BpF,uBAAjC,CAA0D,CACxD,MAAO,EAAP,CACD,CACDgF,WAAW,CAAGC,YAAY,CAACG,YAAb,CAA4BpF,uBAA1C,CACD,CALD,IAKO,CACL,GAAIiF,YAAY,CAACI,WAAb,EAA4BtF,sBAA5B,EAAsDA,sBAAsB,EAAI,CAApF,CAAuF,CACrF,MAAO,EAAP,CACD,CACDiF,WAAW,CAAGC,YAAY,CAACI,WAAb,CAA2BtF,sBAAzC,CACD,CACD;AACA,KAAMuF,CAAAA,cAAc,CAAGN,WAAW,EAAIxC,KAAK,CAACI,MAAN,CAAe,CAAnB,CAAlC,CACA,MAAOkC,CAAAA,eAAe,CAAGQ,cAAzB,CACD,CACD,MAAO,EAAP,CACD,CAEDC,qBAAqB,CAACtB,KAAD,CAAQ,CAC3B;AAD2B,KAEnBvE,CAAAA,YAFmB,CAEF,KAAKD,KAFH,CAEnBC,YAFmB,oBAGC,KAAKF,KAHN,CAGnBgG,QAHmB,cAGnBA,QAHmB,CAGThD,KAHS,cAGTA,KAHS,CAI3B,GAAIiD,CAAAA,SAAS,CAAG,EAAhB,CACA,KAAMC,CAAAA,aAAa,CAAG,MAAtB,CACA,KAAMC,CAAAA,eAAe,CAAG,QAAxB,CACA,KAAMC,CAAAA,cAAc,CAAG,OAAvB,CAEA,OAAQ3B,KAAR,EACE,IAAMvE,CAAAA,YAAY,CAAG,CAArB,CACE+F,SAAS,YAAOC,aAAP,CAAT,CACA,MACF,IAAMhG,CAAAA,YAAN,CACE+F,SAAS,YAAOE,eAAP,CAAT,CACA,MACF,IAAMjG,CAAAA,YAAY,CAAG,CAArB,CACE+F,SAAS,YAAOG,cAAP,CAAT,CACA,MACF,QACE,MAXJ,CAcA,GAAIpD,KAAK,CAACI,MAAN,EAAgB,CAAhB,EAAqB4C,QAAzB,CAAmC,CACjC,GAAIvB,KAAK,GAAK,CAAV,EAAevE,YAAY,GAAK8C,KAAK,CAACI,MAAN,CAAe,CAAnD,CAAsD,CACpD;AACA6C,SAAS,YAAOG,cAAP,CAAT,CACD,CAHD,IAGO,IAAI3B,KAAK,GAAKzB,KAAK,CAACI,MAAN,CAAe,CAAzB,EAA8BlD,YAAY,GAAK,CAAnD,CAAsD,CAC3D;AACA+F,SAAS,YAAOC,aAAP,CAAT,CACD,CACF,CAED,MAAOD,CAAAA,SAAP,CACD,CAEDI,wBAAwB,CAAC5B,KAAD,CAAQ,CAC9B;AAD8B,mBAE8B,KAAKxE,KAFnC,CAEtBC,YAFsB,cAEtBA,YAFsB,CAERG,kBAFQ,cAERA,kBAFQ,CAEYiG,aAFZ,cAEYA,aAFZ,CAG9B,KAAMC,CAAAA,YAAY,CAAGrG,YAAY,GAAKoG,aAAtC,CACA,KAAME,CAAAA,sBAAsB,CAAG/B,KAAK,GAAK,CAAV,EAAe6B,aAAa,GAAK,CAAhE,CACA,KAAMG,CAAAA,uBAAuB,CAAGhC,KAAK,GAAK,CAAV,EAAe6B,aAAa,GAAK,CAAjE,CACA,KAAMI,CAAAA,qBAAqB,CAAGjC,KAAK,GAAK,CAAV,EAAevE,YAAY,GAAK,CAA9D,CACA,KAAMyG,CAAAA,sBAAsB,CAAGlC,KAAK,GAAK,CAAV,EAAevE,YAAY,GAAK,CAA/D,CACA,KAAM0G,CAAAA,YAAY,CAAGvG,kBAAkB,GAAK,CAA5C,CACA,KAAMwG,CAAAA,cAAc,CAAG,CAAC,GAAD,CAAO3G,YAA9B,CACA,GAAI4G,CAAAA,UAAU,CAAGD,cAAc,CAAIpC,KAAK,CAAG,GAA1B,CAAiCpE,kBAAlD,CAEA;AACA;AACA,GAAIA,kBAAkB,CAAG,CAAzB,CAA4B,CAC1B,KAAK0G,SAAL,CAAiB,MAAjB,CACD,CAFD,IAEO,IAAI1G,kBAAkB,CAAG,CAAzB,CAA4B,CACjC,KAAK0G,SAAL,CAAiB,OAAjB,CACD,CAGD;AACA;AACA,GAAIJ,sBAAsB,EAAItG,kBAAkB,CAAG,CAAnD,CAAsD,CAAE;AACtDyG,UAAU,CAAG,CAAC,GAAD,CAAOzG,kBAApB,CACD,CACD,GAAIqG,qBAAqB,EAAIrG,kBAAkB,CAAG,CAAlD,CAAqD,CAAE;AACrDyG,UAAU,CAAG,IAAMzG,kBAAnB,CACD,CAED,GAAIkG,YAAJ,CAAkB,CAChB;AACA,GAAIC,sBAAsB,EAAII,YAA1B,EAA0C,KAAKG,SAAL,GAAmB,MAAjE,CAAyE,CACvED,UAAU,CAAG,GAAb,CACD,CAFD,IAEO,IAAIL,uBAAuB,EAAIG,YAA3B,EAA2C,KAAKG,SAAL,GAAmB,OAAlE,CAA2E,CAChFD,UAAU,CAAG,CAAC,GAAd,CACD,CACF,CAPD,IAOO,CACL;AACA,GAAIH,sBAAsB,EAAIC,YAA1B,EAA0C,KAAKG,SAAL,GAAmB,MAAjE,CAAyE,CACvED,UAAU,CAAG,CAAC,GAAd,CACD,CACD,GAAIJ,qBAAqB,EAAIE,YAAzB,EAAyC,KAAKG,SAAL,GAAmB,OAAhE,CAAyE,CACvED,UAAU,CAAG,GAAb,CACD,CACF,CAED,MAAOA,CAAAA,UAAP,CACD,CAEDE,qBAAqB,EAAG,CACtB,GAAI,KAAKrB,mBAAL,EAAJ,CAAgC,MACtBsB,CAAAA,yBADsB,CACQ,KAAKhH,KADb,CACtBgH,yBADsB,CAE9B,MAAO,CAAEC,MAAM,CAAED,yBAAV,CAAP,CACD,CACD,MAAO,EAAP,CACD,CAEDE,aAAa,CAAC1C,KAAD,CAAQ,oBACsC,KAAKxE,KAD3C,CACXC,YADW,cACXA,YADW,CACGG,kBADH,cACGA,kBADH,CACuB+G,UADvB,cACuBA,UADvB,oBAOf,KAAKpH,KAPU,CAGjBgG,QAHiB,cAGjBA,QAHiB,CAIjBhD,KAJiB,cAIjBA,KAJiB,CAKjBqE,cALiB,cAKjBA,cALiB,CAMjBC,KANiB,cAMjBA,KANiB,CAQnB,KAAMT,CAAAA,cAAc,CAAG,CAAC,GAAD,CAAO3G,YAA9B,CACA,KAAMqH,CAAAA,WAAW,CAAGvE,KAAK,CAACI,MAAN,CAAe,CAAnC,CAEA;AACA;AACA,GAAI0D,CAAAA,UAAU,CAAG,CAACD,cAAc,CAAIpC,KAAK,CAAG,GAA3B,GAAoC6C,KAAK,CAAG,CAAC,CAAJ,CAAQ,CAAjD,EAAsDjH,kBAAvE,CAEA,GAAI2F,QAAQ,EAAIhD,KAAK,CAACI,MAAN,CAAe,CAA/B,CAAkC,CAChC,GAAIlD,YAAY,GAAK,CAAjB,EAAsBuE,KAAK,GAAK8C,WAApC,CAAiD,CAC/C;AACA;AACAT,UAAU,CAAG,CAAC,GAAD,EAAQQ,KAAK,CAAG,CAAC,CAAJ,CAAQ,CAArB,EAA0BjH,kBAAvC,CACD,CAJD,IAIO,IAAIH,YAAY,GAAKqH,WAAjB,EAAgC9C,KAAK,GAAK,CAA9C,CAAiD,CACtD;AACA;AACAqC,UAAU,CAAG,KAAOQ,KAAK,CAAG,CAAC,CAAJ,CAAQ,CAApB,EAAyBjH,kBAAtC,CACD,CACF,CAED;AACA,GAAI2F,QAAQ,EAAIhD,KAAK,CAACI,MAAN,GAAiB,CAAjC,CAAoC,CAClC0D,UAAU,CAAG,KAAKT,wBAAL,CAA8B5B,KAA9B,CAAb,CACD,CAED,GAAI+C,CAAAA,SAAS,qBAAgBV,UAAhB,SAAb,CAEA,GAAIO,cAAJ,CAAoB,CAClBG,SAAS,uBAAkBV,UAAlB,YAAT,CACD,CAED,MAAOW,CAAAA,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkB,CACvBC,eAAe,CAAEH,SADM,CAEvBI,YAAY,CAAEJ,SAFS,CAGvBK,WAAW,CAAEL,SAHU,CAIvBM,UAAU,CAAEN,SAJW,CAKvBO,SAAS,CAAEP,SALY,CAAlB,CAMJJ,UANI,CAAP,CAOD,CAEDY,eAAe,EAAG,MACR9H,CAAAA,YADQ,CACS,KAAKD,KADd,CACRC,YADQ,CAEhB,MAAOA,CAAAA,YAAP,CACD,CAED+H,iBAAiB,EAAG,CAClB,GAAIT,CAAAA,SAAJ,CADkB,mBAEgB,KAAKxH,KAFrB,CAEVqH,cAFU,cAEVA,cAFU,CAEMC,KAFN,cAEMA,KAFN,MAGVlH,CAAAA,eAHU,CAGU,KAAKH,KAHf,CAGVG,eAHU,CAIlB,KAAM8H,CAAAA,sBAAsB,CAAGZ,KAAK,CAAGlH,eAAe,CAAG,CAAC,CAAtB,CAA0BA,eAA9D,CAEA,GAAI,KAAKuF,mBAAL,EAAJ,CAAgC,CAC9B6B,SAAS,wBAAmBpH,eAAnB,OAAT,CACA,GAAIiH,cAAJ,CAAoB,CAClBG,SAAS,0BAAqBpH,eAArB,UAAT,CACD,CACF,CALD,IAKO,CACLoH,SAAS,qBAAgBU,sBAAhB,UAAT,CACA,GAAIb,cAAJ,CAAoB,CAClBG,SAAS,uBAAkBU,sBAAlB,aAAT,CACD,CACF,CACD,MAAO,CACLP,eAAe,CAAEH,SADZ,CAELI,YAAY,CAAEJ,SAFT,CAGLK,WAAW,CAAEL,SAHR,CAILM,UAAU,CAAEN,SAJP,CAKLO,SAAS,CAAEP,SALN,CAAP,CAOD,CAEDW,aAAa,EAAG,MACNjI,CAAAA,YADM,CACW,KAAKD,KADhB,CACNC,YADM,oBAiBV,KAAKF,KAjBK,CAGZgG,QAHY,cAGZA,QAHY,CAIZhD,KAJY,cAIZA,KAJY,CAKZoF,oBALY,cAKZA,oBALY,CAMZC,OANY,cAMZA,OANY,CAOZjG,QAPY,cAOZA,QAPY,CAQZkG,WARY,cAQZA,WARY,CASZC,UATY,cASZA,UATY,CAUZC,YAVY,cAUZA,YAVY,CAWZC,WAXY,cAWZA,WAXY,CAYZC,YAZY,cAYZA,YAZY,CAaZ/G,UAbY,cAaZA,UAbY,CAcZD,gBAdY,cAcZA,gBAdY,CAeZwB,cAfY,cAeZA,cAfY,CAgBZyF,WAhBY,cAgBZA,WAhBY,CAmBd,KAAMC,CAAAA,MAAM,CAAG,EAAf,CACA,KAAM7H,CAAAA,UAAU,CAAG,EAAnB,CACA,KAAM8H,CAAAA,OAAO,CAAG,EAAhB,CAEA7F,KAAK,CAAC8F,OAAN,CAAc,CAACC,IAAD,CAAOtE,KAAP,GAAiB,CAC7B,KAAMwB,CAAAA,SAAS,CAAG,KAAKF,qBAAL,CAA2BtB,KAA3B,CAAlB,CACA,KAAMuE,CAAAA,aAAa,CAAGD,IAAI,CAACC,aAAL,YAAyBD,IAAI,CAACC,aAA9B,EAAgD,EAAtE,CACA,KAAMC,CAAAA,cAAc,CAAGF,IAAI,CAACE,cAAL,YAA0BF,IAAI,CAACE,cAA/B,EAAkD,EAAzE,CACA,KAAMC,CAAAA,gBAAgB,CAAGH,IAAI,CAACpH,UAAL,EAAmBA,UAAnB,EAAiC,KAAKA,UAA/D,CACA,KAAMwH,CAAAA,sBAAsB,CAAGJ,IAAI,CAACrH,gBAAL,EAC1BA,gBAD0B,EACN,KAAKA,gBAD9B,CAGA,KAAM0H,CAAAA,QAAQ,CAAG,CAAChH,QAAD,EAAa6D,SAAb,EAA0B,KAAK5D,UAAL,CAAgBoC,KAAhB,CAA3C,CACA,GAAI2E,QAAQ,EAAIhH,QAAZ,EAAwB,CAAC,KAAKC,UAAL,CAAgBoC,KAAhB,CAA7B,CAAqD,CACnD,KAAKpC,UAAL,CAAgBoC,KAAhB,EAAyB,IAAzB,CACD,CAED,KAAM2C,CAAAA,UAAU,CAAG,KAAKD,aAAL,CAAmB1C,KAAnB,CAAnB,CAEA,KAAM4E,CAAAA,KAAK,cACT,2BACE,GAAG,iBAAWN,IAAI,CAACO,QAAhB,aAA4B7E,KAA5B,CADL,CAEE,QAAQ,CAAC,IAFX,CAGE,SAAS,+BAAyBwB,SAAzB,aAAsC+C,aAAtC,CAHX,CAIE,KAAK,CAAE5B,UAJT,CAKE,OAAO,CAAEiB,OALX,CAME,OAAO,CAAE,KAAKkB,gBANhB,CAOE,WAAW,CAAEjB,WAPf,CAQE,UAAU,CAAEC,UARd,CASE,YAAY,CAAEC,YAThB,CAUE,WAAW,CAAEC,WAVf,CAWE,OAAO,CAAEA,WAXX,CAYE,YAAY,CAAEC,YAZhB,CAaE,IAAI,CAAC,QAbP,EAeGU,QAAQ,CAAGF,gBAAgB,CAACH,IAAD,CAAnB,cAA4B,2BAAK,KAAK,CAAE,CAAE7B,MAAM,CAAE,MAAV,CAAZ,EAfvC,CADF,CAoBA,GAAIlB,QAAJ,CAAc,CACZ;AACA,GAAI,KAAKwD,6BAAL,CAAmC/E,KAAnC,CAAJ,CAA+C,CAC7CmE,MAAM,CAACa,IAAP,CAAYJ,KAAZ,EACD,CACF,CALD,IAKO,CACLT,MAAM,CAACa,IAAP,CAAYJ,KAAZ,EACD,CAED,GAAInG,cAAJ,CAAoB,CAClB,KAAMwG,CAAAA,gBAAgB,CAAGhL,IAAI,CAC3B,yBAD2B,CAE3BuK,cAF2B,CAG3B,CAAEU,MAAM,CAAEzJ,YAAY,GAAKuE,KAA3B,CAH2B,CAA7B,CAKA1D,UAAU,CAAC0I,IAAX,cACE,8BACE,GAAG,qBAAeV,IAAI,CAACO,QAApB,aAAgC7E,KAAhC,CADL,CAEE,IAAI,CAAC,QAFP,CAGE,QAAQ,CAAC,GAHX,CAIE,eAAcvE,YAAY,GAAKuE,KAAjB,CAAyB,MAAzB,CAAkC,OAJlD,CAKE,mCAA2BA,KAAK,CAAG,CAAnC,CALF,CAME,SAAS,CAAEiF,gBANb,CAOE,YAAY,CAAEtB,oBAAoB,CAAG,KAAK7G,qBAAR,CAAgC,IAPpE,CAQE,WAAW,CAAEjC,KAAK,EAAI,KAAKsK,wBAAL,CAA8BtK,KAA9B,CAAqCmF,KAArC,CARxB,CASE,OAAO,CAAEnF,KAAK,EAAI,KAAKsK,wBAAL,CAA8BtK,KAA9B,CAAqCmF,KAArC,CATpB,CAUE,OAAO,CAAEnF,KAAK,EAAI,KAAKuK,oBAAL,CAA0BvK,KAA1B,CAAiCmF,KAAjC,CAVpB,CAWE,OAAO,CAAEnF,KAAK,EAAI,KAAKkF,gBAAL,CAAsBlF,KAAtB,CAA6BmF,KAA7B,CAXpB,EAaG0E,sBAAsB,CAACJ,IAAD,CAbzB,CADF,EAiBD,CAED,GAAIJ,WAAJ,CAAiB,CACf;AACA,KAAMmB,CAAAA,aAAa,CAAIxK,KAAD,EAAW,CAC/B,GAAIyJ,IAAI,CAACe,aAAT,CAAwB,CACtBf,IAAI,CAACe,aAAL,CAAmB,CAAEf,IAAF,CAAQgB,SAAS,CAAEtF,KAAnB,CAA0BvE,YAA1B,CAAnB,EACD,CACD,MAAO,MAAK+B,YAAL,CAAkB+H,IAAlB,CAAuB,IAAvB,CAA6BvF,KAA7B,CAAoCnF,KAApC,CAAP,CACD,CALD,CAMA,KAAM2K,CAAAA,aAAa,CAAGvL,IAAI,CACxB,sBADwB,CAExBqK,IAAI,CAACmB,WAFmB,CAGxB,CAAEP,MAAM,CAAEzJ,YAAY,GAAKuE,KAA3B,CAHwB,CAA1B,CAKAoE,OAAO,CAACY,IAAR,cACE,8BACE,IAAI,CAAC,QADP,CAEE,GAAG,kBAAYV,IAAI,CAACO,QAAjB,aAA6B7E,KAA7B,CAFL,CAGE,SAAS,CAAEwF,aAHb,CAIE,OAAO,CAAEH,aAJX,CAKE,eAAc5J,YAAY,GAAKuE,KAAjB,CAAyB,MAAzB,CAAkC,OALlD,CAME,mCAA2BA,KAAK,CAAG,CAAnC,CANF,EADF,EAUD,CACF,CA7FD,EA+FA,MAAO,CACLmE,MADK,CAEL7H,UAFK,CAGL8H,OAHK,CAAP,CAKD,CAEDsB,qBAAqB,EAAG,CACtB;;;MADsB,KAKdnH,CAAAA,KALc,CAKJ,KAAKhD,KALD,CAKdgD,KALc,oBAMkB,KAAK/C,KANvB,CAMdqG,aANc,cAMdA,aANc,CAMCpG,YAND,cAMCA,YAND,CAOtB,KAAMqH,CAAAA,WAAW,CAAGvE,KAAK,CAACI,MAAN,CAAe,CAAnC,CACA;AACA,KAAMgH,CAAAA,kCAAkC,CAAGC,IAAI,CAACC,GAAL,CAAShE,aAAa,CAAGpG,YAAzB,EAAyC,CAApF,CACA,KAAMqK,CAAAA,uBAAuB,CAAG,EAAEjE,aAAa,GAAK,CAAlB,EAAuBpG,YAAY,GAAKqH,WAA1C,CAAhC,CACA,KAAMiD,CAAAA,uBAAuB,CAAG,EAAElE,aAAa,GAAKiB,WAAlB,EAAiCrH,YAAY,GAAK,CAApD,CAAhC,CAEA,MAAOkK,CAAAA,kCAAkC,EACpCG,uBADE,EAEFC,uBAFL,CAGD,CAEDC,kBAAkB,CAAChG,KAAD,CAAQ,MAChBzB,CAAAA,KADgB,CACN,KAAKhD,KADC,CAChBgD,KADgB,CAExB,KAAMuE,CAAAA,WAAW,CAAGvE,KAAK,CAACI,MAAN,CAAe,CAAnC,CACA,KAAMsH,CAAAA,WAAW,CAAGjG,KAAK,GAAK8C,WAA9B,CACA,KAAMoD,CAAAA,YAAY,CAAGlG,KAAK,GAAK,CAA/B,CACA,MAAOiG,CAAAA,WAAW,EAAIC,YAAtB,CACD,CAGDC,oBAAoB,CAACnG,KAAD,CAAQ,CAC1B;;;MAD0B,mBAK+B,KAAKxE,KALpC,CAKlBoE,eALkB,cAKlBA,eALkB,CAKDiC,aALC,cAKDA,aALC,CAKcpG,YALd,cAKcA,YALd,CAM1B,KAAM2K,CAAAA,6BAA6B,CAAG,EAAEpG,KAAK,GAAK6B,aAAV,EAA2B7B,KAAK,GAAKvE,YAAvC,CAAtC,CACA,MAAOmE,CAAAA,eAAe,EAAIwG,6BAA1B,CACD,CAEDrB,6BAA6B,CAAC/E,KAAD,CAAQ,CACnC;;;;;;;;;;MAWA,MAAO,CAAC,KAAKmG,oBAAL,CAA0BnG,KAA1B,CAAD,EACD,KAAK0F,qBAAL,IAAgC,CAAC,KAAKM,kBAAL,CAAwBhG,KAAxB,CADvC,CAED,CAEDd,iBAAiB,CAAC2C,aAAD,CAAgB,oBACW,KAAKrG,KADhB,CACvBG,eADuB,cACvBA,eADuB,CACNF,YADM,cACNA,YADM,CAE/B,GAAIA,YAAY,GAAK,CAArB,CAAwB,CACtB,KAAK+E,kBAAL,CAAwB,CAAxB,EACD,CAFD,IAEO,CACL,KAAMK,CAAAA,eAAe,CAAG+E,IAAI,CAACC,GAAL,CAAShE,aAAa,CAAGpG,YAAzB,CAAxB,CACA,KAAM4K,CAAAA,MAAM,CAAG,KAAKzF,kBAAL,CAAwBC,eAAxB,CAAf,CACA,GAAIwF,MAAM,CAAG,CAAb,CAAgB,CACd,GAAIxE,aAAa,CAAGpG,YAApB,CAAkC,CAChC,KAAK+E,kBAAL,CAAwB7E,eAAe,CAAG0K,MAA1C,EACD,CAFD,IAEO,IAAIxE,aAAa,CAAGpG,YAApB,CAAkC,CACvC,KAAK+E,kBAAL,CAAwB7E,eAAe,CAAG0K,MAA1C,EACD,CACF,CACF,CACF,CAEDC,QAAQ,EAAG,MACD/H,CAAAA,KADC,CACS,KAAKhD,KADd,CACDgD,KADC,CAET,MAAOA,CAAAA,KAAK,CAACI,MAAN,EAAgB,CAAvB,CACD,CAED4H,YAAY,EAAG,oBACe,KAAKhL,KADpB,CACLgG,QADK,cACLA,QADK,CACKsB,KADL,cACKA,KADL,CAEb,MAAOtB,CAAAA,QAAQ,GAAKsB,KAAK,CAAG,KAAK2D,YAAL,EAAH,CAAyB,KAAKC,gBAAL,EAAnC,CAAf,CACD,CAEDC,aAAa,EAAG,oBACc,KAAKnL,KADnB,CACNgG,QADM,cACNA,QADM,CACIsB,KADJ,cACIA,KADJ,CAEd,MAAOtB,CAAAA,QAAQ,GAAKsB,KAAK,CAAG,KAAK4D,gBAAL,EAAH,CAA6B,KAAKD,YAAL,EAAvC,CAAf,CACD,CAEDC,gBAAgB,EAAG,MACThL,CAAAA,YADS,CACQ,KAAKD,KADb,CACTC,YADS,CAEjB,MAAOA,CAAAA,YAAY,CAAG,CAAtB,CACD,CAED+K,YAAY,EAAG,MACL/K,CAAAA,YADK,CACY,KAAKD,KADjB,CACLC,YADK,MAEL8C,CAAAA,KAFK,CAEK,KAAKhD,KAFV,CAELgD,KAFK,CAGb,MAAO9C,CAAAA,YAAY,CAAG8C,KAAK,CAACI,MAAN,CAAe,CAArC,CACD,CAED9B,aAAa,CAAC,CAAEhC,KAAF,CAAS8L,IAAT,CAAetG,GAAf,CAAD,CAAuB,qBACsC,KAAK9E,KAD3C,CAC1BqL,4BAD0B,eAC1BA,4BAD0B,CACIC,YADJ,eACIA,YADJ,CACkBC,eADlB,eACkBA,eADlB,oBAO9B,KAAKtL,KAPyB,CAGhCK,YAHgC,cAGhCA,YAHgC,CAIhC+D,eAJgC,cAIhCA,eAJgC,CAKhCU,eALgC,cAKhCA,eALgC,CAMhCC,kBANgC,cAMhCA,kBANgC,CASlC,GAAIsG,YAAJ,CAAkB,OATgB,KAU1BE,CAAAA,yBAV0B,CAUI,KAAKxL,KAVT,CAU1BwL,yBAV0B,CAWlC,KAAK3G,kBAAL,CAAwBC,GAAxB,EACA,GAAIyG,eAAJ,CAAqBjM,KAAK,CAACiM,eAAN,GACrB,GAAI,CAACF,4BAA4B,EAAIrG,kBAAjC,GAAwD1F,KAAK,CAACmM,UAAlE,CAA8E,CAC5EnM,KAAK,CAACoM,cAAN,GACD,CACD,GAAI,CAACrH,eAAD,EAAoB,CAACU,eAAzB,CAA0C,CACxC,KAAM4G,CAAAA,IAAI,CAAG7G,GAAG,GAAKhG,KAAR,CAAgB,CAAhB,CAAoB,CAAC,CAAlC,CAEA,GAAIuB,CAAAA,kBAAkB,CAAI+K,IAAI,CAAG9K,YAAP,CAAsB,GAAhD,CACA,GAAI+J,IAAI,CAACC,GAAL,CAASjK,kBAAT,GAAgC,GAApC,CAAyC,CACvCA,kBAAkB,CAAG,GAArB,CACD,CAED,KAAMuL,CAAAA,iBAAiB,CAAG,CACxBC,UAAU,qBAAeL,yBAAf,eADc,CAA1B,CAIA,KAAK5H,QAAL,CAAc,CACZvD,kBAAkB,CAAEsL,IAAI,CAAGtL,kBADf,CAEZ+G,UAAU,CAAEwE,iBAFA,CAAd,EAID,CAhBD,IAgBO,CACL;AACA,KAAKhI,QAAL,CAAc,CAAEvD,kBAAkB,CAAE,CAAtB,CAAd,EACD,CACF,CAEDyL,eAAe,EAAG,MACRzL,CAAAA,kBADQ,CACe,KAAKJ,KADpB,CACRI,kBADQ,MAER0L,CAAAA,cAFQ,CAEW,KAAK/L,KAFhB,CAER+L,cAFQ,CAGhB,MAAO1B,CAAAA,IAAI,CAACC,GAAL,CAASjK,kBAAT,EAA+B0L,cAAtC,CACD,CAED3K,cAAc,CAAC,CAAE9B,KAAF,CAASwF,GAAT,CAAckH,QAAd,CAAD,CAA2B,qBACmB,KAAKhM,KADxB,CAC/BsL,YAD+B,eAC/BA,YAD+B,CACjBC,eADiB,eACjBA,eADiB,CACAU,cADA,eACAA,cADA,qBAES,KAAKhM,KAFd,CAE/B8E,eAF+B,eAE/BA,eAF+B,CAEdC,kBAFc,eAEdA,kBAFc,CAIvC,GAAIsG,YAAJ,CAAkB,OAJqB,KAM/BhE,CAAAA,KAN+B,CAMrB,KAAKtH,KANgB,CAM/BsH,KAN+B,CAOvC,GAAIiE,eAAJ,CAAqBjM,KAAK,CAACiM,eAAN,GACrB,GAAIxG,eAAJ,CAAqB,CACnB;AACA,KAAKnB,QAAL,CAAc,CAAEmB,eAAe,CAAE,KAAnB,CAAd,EACD,CAED,GAAIC,kBAAJ,CAAwB,CACtB;AACA,KAAKpB,QAAL,CAAc,CAAEoB,kBAAkB,CAAE,KAAtB,CAAd,EACD,CAED,GAAI,CAACD,eAAL,CAAsB,CAAE;AACtB;AACA,KAAMmH,CAAAA,cAAc,CAAG,CAACpH,GAAG,GAAKjG,IAAR,CAAe,CAAf,CAAmB,CAAC,CAArB,GAA2ByI,KAAK,CAAG,CAAC,CAAJ,CAAQ,CAAxC,CAAvB,CACA,KAAM6E,CAAAA,OAAO,CAAGH,QAAQ,CAAGC,cAA3B,CACA,KAAKG,gBAAL,CAAsBF,cAAtB,CAAsCC,OAAtC,EACD,CACF,CAEDC,gBAAgB,CAACF,cAAD,CAAiBC,OAAjB,CAA0B,qBACE,KAAKlM,KADP,CAChCC,YADgC,eAChCA,YADgC,CAClBmE,eADkB,eAClBA,eADkB,CAExC,GAAIgI,CAAAA,OAAO,CAAGnM,YAAd,CAEA,GAAI,CAAC,KAAK4L,eAAL,IAA0BK,OAA3B,GAAuC,CAAC9H,eAA5C,CAA6D,CAC3D;AACAgI,OAAO,EAAIH,cAAX,CACD,CAED;AACA,GAAKA,cAAc,GAAK,CAAC,CAApB,EAAyB,CAAC,KAAKlB,YAAL,EAA3B,EACIkB,cAAc,GAAK,CAAnB,EAAwB,CAAC,KAAKf,aAAL,EADjC,CACwD,CACtDkB,OAAO,CAAGnM,YAAV,CACD,CAED,KAAK8B,uBAAL,CAA6BqK,OAA7B,EACD,CAEDlL,eAAe,EAAG,CAChB;AACA,KAAKP,YAAL,CAAkB8E,OAAlB,CAA0B4G,SAA1B,CAAoCC,GAApC,CAAwC,2BAAxC,EACD,CAEDtL,aAAa,CAAC3B,KAAD,CAAQ,qBAC8B,KAAKU,KADnC,CACXwM,cADW,eACXA,cADW,CACKC,oBADL,eACKA,oBADL,MAEXhM,CAAAA,YAFW,CAEM,KAAKR,KAFX,CAEXQ,YAFW,CAGnB;AACA,KAAKG,YAAL,CAAkB8E,OAAlB,CAA0B4G,SAA1B,CAAoCI,MAApC,CAA2C,2BAA3C,EAEA,GAAIF,cAAJ,CAAoB,OACpB,KAAMG,CAAAA,UAAU,CAAG,EAAnB,CACA,KAAMC,CAAAA,WAAW,CAAG,EAApB,CACA,KAAMC,CAAAA,OAAO,CAAG,EAAhB,CACA,KAAMtN,CAAAA,GAAG,CAAGC,QAAQ,CAACF,KAAK,CAACG,OAAN,EAAiBH,KAAK,CAACI,KAAvB,EAAgC,CAAjC,CAAoC,EAApC,CAApB,CAEA,OAAQH,GAAR,EACE,IAAKoN,CAAAA,UAAL,CACE,GAAI,KAAK3B,YAAL,IAAuB,CAAC,KAAKhH,mBAAjC,CAAsD,CACpD,KAAKpC,SAAL,CAAetC,KAAf,EACD,CACD,MACF,IAAKsN,CAAAA,WAAL,CACE,GAAI,KAAKzB,aAAL,IAAwB,CAAC,KAAKnH,mBAAlC,CAAuD,CACrD,KAAKnC,UAAL,CAAgBvC,KAAhB,EACD,CACD,MACF,IAAKuN,CAAAA,OAAL,CACE,GAAIpM,YAAY,EAAI,CAACgM,oBAArB,CAA2C,CACzC,KAAKK,cAAL,GACD,CACD,MACF,QACE,MAjBJ,CAmBD,CAEDtL,gBAAgB,CAAClC,KAAD,CAAQ,MACdyN,CAAAA,eADc,CACM,KAAK/M,KADX,CACd+M,eADc,CAEtB,GAAIA,eAAe,EAAIzN,KAAK,CAAC0N,MAAN,CAAaC,GAAb,CAAiBC,OAAjB,CAAyBH,eAAzB,IAA8C,CAAC,CAAtE,CAAyE,CACvE,sCACAzN,KAAK,CAAC0N,MAAN,CAAaC,GAAb,CAAmBF,eAAnB,CACA,qCACD,CACF,CAEDtJ,oBAAoB,EAAG,CACrB,GAAI,KAAK0J,cAAL,EACG,KAAKnM,wBADR,EACoC,KAAKA,wBAAL,CAA8B0E,OADtE,CAC+E,CAC7E,KAAKyH,cAAL,CAAoBC,SAApB,CAA8B,KAAKpM,wBAAL,CAA8B0E,OAA5D,EACD,CACF,CAEDhC,YAAY,EAAG,MACLxD,CAAAA,YADK,CACY,KAAKD,KADjB,CACLC,YADK,CAEb,GAAI,KAAKU,YAAL,EAAqB,KAAKA,YAAL,CAAkB8E,OAA3C,CAAoD,CAClD,KAAK9B,QAAL,CAAc,CAAEtD,YAAY,CAAE,KAAKM,YAAL,CAAkB8E,OAAlB,CAA0B2H,WAA1C,CAAd,EACD,CAED,GAAI,KAAKrM,wBAAL,EAAiC,KAAKA,wBAAL,CAA8B0E,OAAnE,CAA4E,CAC1E,KAAK9B,QAAL,CAAc,CACZqD,yBAAyB,CAAE,KAAKjG,wBAAL,CAA8B0E,OAA9B,CAAsC4H,YADrD,CAAd,EAGD,CAED,GAAI,KAAKxM,iBAAL,EAA0B,KAAKA,iBAAL,CAAuB4E,OAArD,CAA8D,CAC5D,GAAI,KAAKC,mBAAL,EAAJ,CAAgC,CAC9B,KAAK/B,QAAL,CAAc,CAAEpD,uBAAuB,CAAE,KAAKM,iBAAL,CAAuB4E,OAAvB,CAA+B4H,YAA1D,CAAd,EACD,CAFD,IAEO,CACL,KAAK1J,QAAL,CAAc,CAAErD,sBAAsB,CAAE,KAAKO,iBAAL,CAAuB4E,OAAvB,CAA+B2H,WAAzD,CAAd,EACD,CACF,CAED;AACA,KAAKpI,kBAAL,CAAwB,CAAC,KAAKI,kBAAL,CAAwBnF,YAAxB,CAAzB,EACD,CAEDyC,kBAAkB,CAAC4K,OAAD,CAAU,CAC1B,KAAKJ,cAAL,CAAsB,GAAIjO,CAAAA,cAAJ,CAAmBF,QAAQ,CAAEwO,OAAD,EAAa,CAC7D,GAAI,CAACA,OAAL,CAAc,OACdA,OAAO,CAAC1E,OAAR,CAAgB,IAAM,CACpB,KAAKpF,YAAL,GACD,CAFD,EAGD,CALgD,CAK9C,GAL8C,CAA3B,CAAtB,CAMA,KAAKyJ,cAAL,CAAoBM,OAApB,CAA4BF,OAAO,CAAC7H,OAApC,EACD,CAED5D,gBAAgB,EAAG,MACTrB,CAAAA,YADS,CACQ,KAAKR,KADb,CACTQ,YADS,CAEjB,GAAIA,YAAJ,CAAkB,CAChB,KAAKqM,cAAL,GACD,CAFD,IAEO,CACL,KAAKY,UAAL,GACD,CACF,CAED3L,UAAU,EAAG,CACX,GAAI,KAAKiC,mBAAT,CAA8B,CAC5B,KAAKY,KAAL,GACD,CAFD,IAEO,CACL,KAAKpC,IAAL,GACD,CACF,CAGDnB,kBAAkB,EAAG,CACnB;;MADmB,oBAI8B,KAAKrB,KAJnC,CAIXmF,cAJW,eAIXA,cAJW,CAIKsH,oBAJL,eAIKA,oBAJL,CAKnB,KAAMkB,CAAAA,iBAAiB,CAAGC,QAAQ,CAACC,iBAAT,EACrBD,QAAQ,CAACE,mBADY,EAErBF,QAAQ,CAACG,oBAFY,EAGrBH,QAAQ,CAACI,uBAHd,CAKA;AACA,KAAMvN,CAAAA,YAAY,CAAG,KAAKG,YAAL,CAAkB8E,OAAlB,GAA8BiI,iBAAnD,CACA,GAAIxI,cAAJ,CAAoBA,cAAc,CAAC1E,YAAD,CAAd,CACpB,GAAIgM,oBAAJ,CAA0B,KAAK7I,QAAL,CAAc,CAAEnD,YAAF,CAAd,EAC3B,CAEDwB,YAAY,CAACwC,KAAD,CAAQnF,KAAR,CAAe,qBACiB,KAAKW,KADtB,CACjBC,YADiB,eACjBA,YADiB,CACHmE,eADG,eACHA,eADG,qBAEuB,KAAKrE,KAF5B,CAEjBgD,KAFiB,eAEjBA,KAFiB,CAEVd,aAFU,eAEVA,aAFU,CAEK+L,aAFL,eAEKA,aAFL,CAIzB,GAAI,CAAC5J,eAAL,CAAsB,CACpB,GAAI/E,KAAJ,CAAW,CACT,GAAI,KAAK0E,mBAAT,CAA8B,CAC5B;AACA,KAAKY,KAAL,CAAW,KAAX,EACA,KAAKpC,IAAL,CAAU,KAAV,EACD,CACF,CAED,KAAM0L,CAAAA,UAAU,CAAGlL,KAAK,CAACI,MAAN,CAAe,CAAlC,CACA,GAAI+K,CAAAA,SAAS,CAAG1J,KAAhB,CACA,GAAIA,KAAK,CAAG,CAAZ,CAAe,CACb0J,SAAS,CAAGD,UAAZ,CACD,CAFD,IAEO,IAAIzJ,KAAK,CAAGyJ,UAAZ,CAAwB,CAC7BC,SAAS,CAAG,CAAZ,CACD,CAED,GAAIF,aAAa,EAAIE,SAAS,GAAKjO,YAAnC,CAAiD,CAC/C+N,aAAa,CAACE,SAAD,CAAb,CACD,CAED,KAAKvK,QAAL,CAAc,CACZ0C,aAAa,CAAEpG,YADH,CAEZA,YAAY,CAAEiO,SAFF,CAGZ9J,eAAe,CAAE8J,SAAS,GAAKjO,YAHnB,CAIZG,kBAAkB,CAAE,CAJR,CAKZ+G,UAAU,CAAE,CAAEyE,UAAU,eAAS3J,aAAT,eAAZ,CALA,CAAd,CAMG,KAAKkC,SANR,EAOD,CACF,CAEDxC,SAAS,CAACtC,KAAD,CAAQ,MACPgI,CAAAA,KADO,CACG,KAAKtH,KADR,CACPsH,KADO,CAEf,GAAIA,KAAJ,CAAW,CACT,KAAK8G,SAAL,CAAe9O,KAAf,EACD,CAFD,IAEO,CACL,KAAK+O,aAAL,CAAmB/O,KAAnB,EACD,CACF,CAEDuC,UAAU,CAACvC,KAAD,CAAQ,MACRgI,CAAAA,KADQ,CACE,KAAKtH,KADP,CACRsH,KADQ,CAEhB,GAAIA,KAAJ,CAAW,CACT,KAAK+G,aAAL,CAAmB/O,KAAnB,EACD,CAFD,IAEO,CACL,KAAK8O,SAAL,CAAe9O,KAAf,EACD,CACF,CAED+O,aAAa,CAAC/O,KAAD,CAAQ,qBAC2C,KAAKW,KADhD,CACXC,YADW,eACXA,YADW,CACGG,kBADH,eACGA,kBADH,CACuBgE,eADvB,eACuBA,eADvB,MAEXrB,CAAAA,KAFW,CAED,KAAKhD,KAFJ,CAEXgD,KAFW,CAGnB,KAAMmL,CAAAA,SAAS,CAAGjO,YAAY,CAAG,CAAjC,CAEA,GAAImE,eAAJ,CAAqB,OAErB,GAAIrB,KAAK,CAACI,MAAN,GAAiB,CAArB,CAAwB,CACtB;;;QAIA,KAAKQ,QAAL,CAAc,CACZvD,kBAAkB,CAAEA,kBAAkB,CAAG,KAD7B,CACoC;AAChD+G,UAAU,CAAE,CAAEyE,UAAU,CAAE,MAAd,CAAwB;AAFxB,CAAd,CAGG,IAAM,CACP;AACApJ,MAAM,CAAC8B,UAAP,CAAkB,IAAM,KAAKtC,YAAL,CAAkBkM,SAAlB,CAA6B7O,KAA7B,CAAxB,CAA6D,EAA7D,EACD,CAND,EAOD,CAZD,IAYO,CACL,KAAK2C,YAAL,CAAkBkM,SAAlB,CAA6B7O,KAA7B,EACD,CACF,CAED8O,SAAS,CAAC9O,KAAD,CAAQ,qBAC+C,KAAKW,KADpD,CACPC,YADO,eACPA,YADO,CACOG,kBADP,eACOA,kBADP,CAC2BgE,eAD3B,eAC2BA,eAD3B,MAEPrB,CAAAA,KAFO,CAEG,KAAKhD,KAFR,CAEPgD,KAFO,CAGf,KAAMmL,CAAAA,SAAS,CAAGjO,YAAY,CAAG,CAAjC,CAEA,GAAImE,eAAJ,CAAqB,OAErB,GAAIrB,KAAK,CAACI,MAAN,GAAiB,CAArB,CAAwB,CACtB;AACA,KAAKQ,QAAL,CAAc,CACZvD,kBAAkB,CAAEA,kBAAkB,CAAG,KAD7B,CAEZ+G,UAAU,CAAE,CAAEyE,UAAU,CAAE,MAAd,CAFA,CAAd,CAGG,IAAM,CACPpJ,MAAM,CAAC8B,UAAP,CAAkB,IAAM,KAAKtC,YAAL,CAAkBkM,SAAlB,CAA6B7O,KAA7B,CAAxB,CAA6D,EAA7D,EACD,CALD,EAMD,CARD,IAQO,CACL,KAAK2C,YAAL,CAAkBkM,SAAlB,CAA6B7O,KAA7B,EACD,CACF,CAEDsK,wBAAwB,CAACtK,KAAD,CAAQmF,KAAR,CAAe,MAC7B2D,CAAAA,oBAD6B,CACJ,KAAKpI,KADD,CAC7BoI,oBAD6B,CAErC,GAAIA,oBAAJ,CAA0B,KAAK1D,oBAAL,CAA0BpF,KAA1B,CAAiCmF,KAAjC,EAC3B,CAEDoF,oBAAoB,CAACvK,KAAD,CAAQmF,KAAR,CAAe,CACjC;AACA,GAAIpF,iBAAiB,CAACC,KAAD,CAArB,CAA8B,KAAKkF,gBAAL,CAAsBlF,KAAtB,CAA6BmF,KAA7B,EAC/B,CAED8E,gBAAgB,CAACjK,KAAD,CAAQ,CACtB;AACA,GAAID,iBAAiB,CAACC,KAAD,CAArB,CAA8B,MACpB+I,CAAAA,OADoB,CACR,KAAKrI,KADG,CACpBqI,OADoB,CAE5BA,OAAO,CAAC/I,KAAD,CAAP,CACD,CACF,CAEDqG,mBAAmB,EAAG,MACZ1C,CAAAA,iBADY,CACU,KAAKjD,KADf,CACZiD,iBADY,CAEpB,MAAOA,CAAAA,iBAAiB,GAAK,MAAtB,EAAgCA,iBAAiB,GAAK,OAA7D,CACD,CAEDL,oBAAoB,EAAG,CACrBxD,kBAAkB,CAAC0J,OAAnB,CAA4BwF,SAAD,EAAe,CACxCV,QAAQ,CAAClL,gBAAT,CAA0B4L,SAA1B,CAAqC,KAAKjN,kBAA1C,EACD,CAFD,EAGD,CAED0C,uBAAuB,EAAG,CACxB3E,kBAAkB,CAAC0J,OAAnB,CAA4BwF,SAAD,EAAe,CACxCV,QAAQ,CAAC9J,mBAAT,CAA6BwK,SAA7B,CAAwC,KAAKjN,kBAA7C,EACD,CAFD,EAGD,CAEDqM,UAAU,EAAG,MACHjB,CAAAA,oBADG,CACsB,KAAKzM,KAD3B,CACHyM,oBADG,CAEX,KAAM8B,CAAAA,OAAO,CAAG,KAAK3N,YAAL,CAAkB8E,OAAlC,CACA,GAAI+G,oBAAJ,CAA0B,CACxB,GAAI8B,OAAO,CAACC,iBAAZ,CAA+B,CAC7BD,OAAO,CAACC,iBAAR,GACD,CAFD,IAEO,IAAID,OAAO,CAACE,mBAAZ,CAAiC,CACtCF,OAAO,CAACE,mBAAR,GACD,CAFM,IAEA,IAAIF,OAAO,CAACG,oBAAZ,CAAkC,CACvCH,OAAO,CAACG,oBAAR,GACD,CAFM,IAEA,IAAIH,OAAO,CAACI,uBAAZ,CAAqC,CAC1CJ,OAAO,CAACI,uBAAR,GACD,CAFM,IAEA,CACL;AACA,KAAKzJ,kBAAL,CAAwB,IAAxB,EACD,CACF,CAbD,IAaO,CACL,KAAKA,kBAAL,CAAwB,IAAxB,EACD,CACD,KAAKtB,QAAL,CAAc,CAAEnD,YAAY,CAAE,IAAhB,CAAd,EACD,CAEDqM,cAAc,EAAG,MACPrM,CAAAA,YADO,CACU,KAAKR,KADf,CACPQ,YADO,MAEPgM,CAAAA,oBAFO,CAEkB,KAAKzM,KAFvB,CAEPyM,oBAFO,CAGf,GAAIhM,YAAJ,CAAkB,CAChB,GAAIgM,oBAAJ,CAA0B,CACxB,GAAImB,QAAQ,CAACgB,cAAb,CAA6B,CAC3BhB,QAAQ,CAACgB,cAAT,GACD,CAFD,IAEO,IAAIhB,QAAQ,CAACiB,oBAAb,CAAmC,CACxCjB,QAAQ,CAACiB,oBAAT,GACD,CAFM,IAEA,IAAIjB,QAAQ,CAACkB,mBAAb,CAAkC,CACvClB,QAAQ,CAACkB,mBAAT,GACD,CAFM,IAEA,IAAIlB,QAAQ,CAACmB,gBAAb,CAA+B,CACpCnB,QAAQ,CAACmB,gBAAT,GACD,CAFM,IAEA,CACL;AACA,KAAK7J,kBAAL,CAAwB,KAAxB,EACD,CACF,CAbD,IAaO,CACL,KAAKA,kBAAL,CAAwB,KAAxB,EACD,CACD,KAAKtB,QAAL,CAAc,CAAEnD,YAAY,CAAE,KAAhB,CAAd,EACD,CACF,CAEDgB,WAAW,EAAG,MACJuE,CAAAA,QADI,CACS,KAAKhG,KADd,CACJgG,QADI,MAEJ9F,CAAAA,YAFI,CAEa,KAAKD,KAFlB,CAEJC,YAFI,CAGZ,GAAI,CAAC8F,QAAD,EAAa,CAAC,KAAKmF,aAAL,EAAlB,CAAwC,CACtC,KAAKvG,KAAL,GACD,CAFD,IAEO,CACL,KAAK3C,YAAL,CAAkB/B,YAAY,CAAG,CAAjC,EACD,CACF,CAEDsC,IAAI,CAACwM,gBAAgB,CAAG,IAApB,CAA0B,qBAKxB,KAAKhP,KALmB,CAE1BiP,MAF0B,eAE1BA,MAF0B,CAG1BC,aAH0B,eAG1BA,aAH0B,CAI1BhN,aAJ0B,eAI1BA,aAJ0B,MAMpBhC,CAAAA,YANoB,CAMH,KAAKD,KANF,CAMpBC,YANoB,CAO5B,GAAI,CAAC,KAAK8D,mBAAV,CAA+B,CAC7B,KAAKJ,QAAL,CAAc,CAAElD,SAAS,CAAE,IAAb,CAAd,EACA,KAAKsD,mBAAL,CAA2BvB,MAAM,CAAC0M,WAAP,CACzB,KAAK1N,WADoB,CAEzB4I,IAAI,CAAC+E,GAAL,CAASF,aAAT,CAAwBhN,aAAxB,CAFyB,CAA3B,CAIA,GAAI+M,MAAM,EAAID,gBAAd,CAAgC,CAC9BC,MAAM,CAAC/O,YAAD,CAAN,CACD,CACF,CACF,CAED0E,KAAK,CAACyK,iBAAiB,CAAG,IAArB,CAA2B,MACtBC,CAAAA,OADsB,CACV,KAAKtP,KADK,CACtBsP,OADsB,MAEtBpP,CAAAA,YAFsB,CAEL,KAAKD,KAFA,CAEtBC,YAFsB,CAG9B,GAAI,KAAK8D,mBAAT,CAA8B,CAC5BvB,MAAM,CAACwB,aAAP,CAAqB,KAAKD,mBAA1B,EACA,KAAKA,mBAAL,CAA2B,IAA3B,CACA,KAAKJ,QAAL,CAAc,CAAElD,SAAS,CAAE,KAAb,CAAd,EACA,GAAI4O,OAAO,EAAID,iBAAf,CAAkC,CAChCC,OAAO,CAACpP,YAAD,CAAP,CACD,CACF,CACF,CAEDqP,aAAa,CAACxG,IAAD,CAAO,CAClB;;;MAIA,KAAMyG,CAAAA,WAAW,CAAG,KAAK7O,YAAL,CAAkBoI,IAAI,CAACO,QAAvB,CAApB,CACA,GAAIkG,WAAJ,CAAiB,CACf,MAAO,KAAP,CACD,CACD;AACA,KAAK7O,YAAL,CAAkBoI,IAAI,CAACO,QAAvB,EAAmC,IAAnC,CACA,MAAO,MAAP,CACD,CAEDmG,iBAAiB,CAACnQ,KAAD,CAAQyJ,IAAR,CAAc,MACrB2G,CAAAA,WADqB,CACL,KAAK1P,KADA,CACrB0P,WADqB,CAE7B,KAAMF,CAAAA,WAAW,CAAG,KAAK7O,YAAL,CAAkBoI,IAAI,CAACO,QAAvB,CAApB,CACA,GAAI,CAACkG,WAAD,EAAgBE,WAApB,CAAiC,CAC/B,KAAK/O,YAAL,CAAkBoI,IAAI,CAACO,QAAvB,EAAmC,IAAnC,CAAyC;AACzC;AACAoG,WAAW,CAACpQ,KAAD,CAAX,CACD,CACF,CAEDqC,UAAU,CAACoH,IAAD,CAAO,MACPtI,CAAAA,YADO,CACU,KAAKR,KADf,CACPQ,YADO,MAEPkP,CAAAA,YAFO,CAEU,KAAK3P,KAFf,CAEP2P,YAFO,CAGf,KAAMnO,CAAAA,gBAAgB,CAAGmO,YAAY,EAAI,KAAKnO,gBAA9C,CACA,KAAMoO,CAAAA,OAAO,CAAGnP,YAAY,CAAIsI,IAAI,CAAC8G,UAAL,EAAmB9G,IAAI,CAACO,QAA5B,CAAwCP,IAAI,CAACO,QAAzE,CAEA,mBACE,+BAEIP,IAAI,CAAC+G,QAAL,cACE,+BACE,MAAM,CAAExQ,KAAK,EAAI,KAAKmQ,iBAAL,CAAuBnQ,KAAvB,CAA8ByJ,IAA9B,CADnB,CAEE,OAAO,CAAEvH,gBAFX,EAKIuH,IAAI,CAAC+G,QAAL,CAAcC,GAAd,CAAkB,CAACC,MAAD,CAASvL,KAAT,gBAChB,8BACE,GAAG,iBAAWuL,MAAM,CAACC,MAAlB,aAA4BxL,KAA5B,CADL,CAEE,KAAK,CAAEuL,MAAM,CAACE,KAFhB,CAGE,MAAM,CAAEF,MAAM,CAACC,MAHjB,CAIE,IAAI,CAAED,MAAM,CAACG,IAJf,EADF,CALJ,cAcE,2BACE,SAAS,CAAC,qBADZ,CAEE,GAAG,CAAEpH,IAAI,CAACqH,WAFZ,CAGE,GAAG,CAAER,OAHP,EAdF,CADF,cAsBE,2BACE,SAAS,CAAC,qBADZ,CAEE,GAAG,CAAEA,OAFP,CAGE,GAAG,CAAE7G,IAAI,CAACqH,WAHZ,CAIE,MAAM,CAAErH,IAAI,CAACkH,MAJf,CAKE,KAAK,CAAElH,IAAI,CAACsH,KALd,CAME,KAAK,CAAEtH,IAAI,CAACuH,aANd,CAOE,MAAM,CAAEhR,KAAK,EAAI,KAAKmQ,iBAAL,CAAuBnQ,KAAvB,CAA8ByJ,IAA9B,CAPnB,CAQE,OAAO,CAAEvH,gBARX,EAxBN,CAsCIuH,IAAI,CAACwH,WAAL,eACE,4BAAM,SAAS,CAAC,2BAAhB,EACGxH,IAAI,CAACwH,WADR,CAvCN,CADF,CA+CD,CAED7O,gBAAgB,CAACqH,IAAD,CAAO,MACbyH,CAAAA,gBADa,CACQ,KAAKxQ,KADb,CACbwQ,gBADa,CAErB,KAAMC,CAAAA,oBAAoB,CAAGD,gBAAgB,EAAI,KAAKhP,gBAAtD,CAEA,mBACE,2BAAK,SAAS,CAAC,+BAAf,eACE,2BACE,SAAS,CAAC,+BADZ,CAEE,GAAG,CAAEuH,IAAI,CAAC2H,SAFZ,CAGE,GAAG,CAAE3H,IAAI,CAAC4H,YAHZ,CAIE,KAAK,CAAE5H,IAAI,CAAC6H,cAJd,CAKE,OAAO,CAAEH,oBALX,EADF,CASI1H,IAAI,CAAC8H,cAAL,eACE,2BAAK,SAAS,CAAC,+BAAf,EACG9H,IAAI,CAAC8H,cADR,CAVN,CADF,CAkBD,CAEDC,MAAM,EAAG,qBAMH,KAAK7Q,KANF,CAELC,YAFK,eAELA,YAFK,CAGLO,YAHK,eAGLA,YAHK,CAIL2E,eAJK,eAILA,eAJK,CAKL1E,SALK,eAKLA,SALK,qBAyBH,KAAKV,KAzBF,CASL+Q,eATK,eASLA,eATK,CAULC,cAVK,eAULA,cAVK,CAWL1J,KAXK,eAWLA,KAXK,CAYLtE,KAZK,eAYLA,KAZK,CAaLC,iBAbK,eAaLA,iBAbK,CAcLgO,sBAdK,eAcLA,sBAdK,CAeLC,oBAfK,eAeLA,oBAfK,CAgBLC,aAhBK,eAgBLA,aAhBK,CAiBLC,cAjBK,eAiBLA,cAjBK,CAkBLzI,WAlBK,eAkBLA,WAlBK,CAmBL0I,oBAnBK,eAmBLA,oBAnBK,CAoBLC,SApBK,eAoBLA,SApBK,CAqBLpO,cArBK,eAqBLA,cArBK,CAsBLqO,OAtBK,eAsBLA,OAtBK,CAuBLC,cAvBK,eAuBLA,cAvBK,CAwBLC,qBAxBK,eAwBLA,qBAxBK,CA2BP,KAAMC,CAAAA,cAAc,CAAG,KAAKzJ,iBAAL,EAAvB,CA3BO,0BA4BiC,KAAKE,aAAL,EA5BjC,CA4BCS,MA5BD,qBA4BCA,MA5BD,CA4BS7H,UA5BT,qBA4BSA,UA5BT,CA4BqB8H,OA5BrB,qBA4BqBA,OA5BrB,CA6BP,KAAM8I,CAAAA,iBAAiB,CAAGjT,IAAI,CAC5B,6BAD4B,CAE5BuE,iBAF4B,CAG5B,CAAE,oBAAqBqE,KAAvB,CAH4B,CAA9B,CAMA,KAAMsK,CAAAA,YAAY,cAChB,2BAAK,GAAG,CAAE,KAAK5Q,wBAAf,CAAyC,SAAS,CAAE2Q,iBAApD,EACGT,oBAAoB,EAAIA,oBAAoB,EAD/C,CAGI,KAAKnG,QAAL,gBACE,oBAAC,KAAD,CAAO,QAAP,MAEIwG,OAAO,eACL,oBAAC,KAAD,CAAO,QAAP,MACGJ,aAAa,CAAC,KAAKvP,SAAN,CAAiB,CAAC,KAAKoJ,YAAL,EAAlB,CADhB,CAEGoG,cAAc,CAAC,KAAKvP,UAAN,CAAkB,CAAC,KAAKsJ,aAAL,EAAnB,CAFjB,CAHN,cASE,oBAAC,SAAD,EACE,SAAS,CAAC,qBADZ,CAEE,KAAK,CAAE,CAFT,CAGE,SAAS,CAAE,KAAK7J,aAHlB,CAIE,QAAQ,CAAE,KAAKF,cAJjB,eAME,2BAAK,SAAS,CAAC,sBAAf,EACGwH,MADH,CANF,CATF,CADF,cAsBE,2BAAK,SAAS,CAAC,sBAAf,EACGA,MADH,CAzBN,CA8BG4I,cAAc,EAAIC,qBAAqB,CAAC,KAAK1P,UAAN,CAAkBrB,SAAlB,CA9B1C,CAgCIiI,WAAW,eACT,2BAAK,SAAS,CAAC,uBAAf,eACE,2BACE,SAAS,CAAC,iCADZ,CAEE,IAAI,CAAC,YAFP,CAGE,aAAW,mBAHb,EAKGE,OALH,CADF,CAjCN,CA4CGwI,oBAAoB,EAAIJ,sBAAsB,CAAC,KAAKnP,gBAAN,CAAwBrB,YAAxB,CA5CjD,CA8CI6Q,SAAS,eACP,2BAAK,SAAS,CAAC,qBAAf,eACE,4BAAM,SAAS,CAAC,6BAAhB,EACGpR,YAAY,CAAG,CADlB,CADF,cAIE,4BAAM,SAAS,CAAC,+BAAhB,EACG8Q,cADH,CAJF,cAOE,4BAAM,SAAS,CAAC,2BAAhB,EACGhO,KAAK,CAACI,MADT,CAPF,CA/CN,CADF,CAgEA,KAAMyO,CAAAA,OAAO,CAAGnT,IAAI,CAAC,eAAD,CAAkBqS,eAAlB,CAAmC,CAAE,mBAAoB3L,eAAtB,CAAnC,CAApB,CACA,KAAM0M,CAAAA,cAAc,CAAGpT,IAAI,CAAC,uBAAD,CAA0BuE,iBAA1B,CAA6C,CAAE4M,UAAU,CAAEpP,YAAd,CAA7C,CAA3B,CACA,KAAMsR,CAAAA,qBAAqB,CAAGrT,IAAI,CAChC,kCADgC,CAEhCuE,iBAFgC,CAGhC,CAAE,yBAA0B,CAAC,KAAK0C,mBAAL,EAAD,EAA+B2B,KAA3D,CAHgC,CAAlC,CAKA,mBACE,2BACE,GAAG,CAAE,KAAK1G,YADZ,CAEE,SAAS,CAAEiR,OAFb,CAGE,YAAU,QAHZ,eAKE,2BAAK,SAAS,CAAEC,cAAhB,EACG,CAAC7O,iBAAiB,GAAK,QAAtB,EAAkCA,iBAAiB,GAAK,OAAzD,GAAqE2O,YADxE,CAGI1O,cAAc,eACZ,2BACE,SAAS,CAAE6O,qBADb,CAEE,KAAK,CAAE,KAAK/K,qBAAL,EAFT,eAIE,2BACE,SAAS,CAAC,0BADZ,CAEE,GAAG,CAAE,KAAKlG,iBAFZ,eAIE,2BACE,GAAG,CAAE,KAAKC,UADZ,CAEE,SAAS,CAAC,oCAFZ,CAGE,KAAK,CAAE2Q,cAHT,CAIE,aAAW,sBAJb,EAMG3Q,UANH,CAJF,CAJF,CAJN,CAwBG,CAACkC,iBAAiB,GAAK,KAAtB,EAA+BA,iBAAiB,GAAK,MAAtD,GAAiE2O,YAxBpE,CALF,CADF,CAmCD,CAn6CuD,CAArC/R,Y,CA0EZmS,Y,CAAe,CACpBjF,eAAe,CAAE,EADG,CAEpBgE,eAAe,CAAE,EAFG,CAGpBQ,OAAO,CAAE,IAHW,CAIpBhP,QAAQ,CAAE,KAJU,CAKpBH,QAAQ,CAAE,KALU,CAMpB4D,QAAQ,CAAE,IANU,CAOpBsL,SAAS,CAAE,KAPS,CAQpB3I,WAAW,CAAE,KARO,CASpBzF,cAAc,CAAE,IATI,CAUpBsO,cAAc,CAAE,IAVI,CAWpBH,oBAAoB,CAAE,IAXF,CAYpB9L,sBAAsB,CAAE,KAZJ,CAapBiH,cAAc,CAAE,KAbI,CAcpBlB,YAAY,CAAE,KAdM,CAepBjE,cAAc,CAAE,IAfI,CAgBpBC,KAAK,CAAE,KAhBa,CAiBpBmF,oBAAoB,CAAE,IAjBF,CAkBpBpB,4BAA4B,CAAE,KAlBV,CAmBpBY,cAAc,CAAE,GAnBI,CAoBpBV,eAAe,CAAE,KApBG,CAqBpByF,cAAc,CAAE,KArBI,CAsBpB/N,iBAAiB,CAAE,QAtBC,CAuBpB9C,UAAU,CAAE,CAvBQ,CAwBpB+B,aAAa,CAAE,GAxBK,CAyBpBsJ,yBAAyB,CAAE,CAzBP,CA0BpBlH,OAAO,CAAE,IA1BW,CA2BpB2J,aAAa,CAAE,IA3BK,CA4BpB9I,cAAc,CAAE,IA5BI,CA6BpBmK,OAAO,CAAE,IA7BW,CA8BpBL,MAAM,CAAE,IA9BY,CA+BpB5G,OAAO,CAAE,IA/BW,CAgCpBqH,WAAW,CAAE,IAhCO,CAiCpBC,YAAY,CAAE,IAjCM,CAkCpBrH,WAAW,CAAE,IAlCO,CAmCpBC,UAAU,CAAE,IAnCQ,CAoCpBC,YAAY,CAAE,IApCM,CAqCpBC,WAAW,CAAE,IArCO,CAsCpBC,YAAY,CAAE,IAtCM,CAuCpB8H,gBAAgB,CAAE,IAvCE,CAwCpBhM,gBAAgB,CAAE,IAxCE,CAyCpB0M,oBAAoB,CAAE,IAzCF,CA0CpBxP,gBAAgB,CAAE,IA1CE,CA2CpBC,UAAU,CAAE,IA3CQ,CA4CpBuN,aAAa,CAAE,IA5CK,CA6CpB9G,oBAAoB,CAAE,KA7CF,CA8CpB2D,cAAc,CAAE,EA9CI,CA+CpBoF,aAAa,CAAE,CAAC9I,OAAD,CAAU4J,QAAV,gBACb,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,2CAFZ,CAGE,QAAQ,CAAEA,QAHZ,CAIE,OAAO,CAAE5J,OAJX,CAKE,aAAW,gBALb,eAOE,oBAAC,GAAD,EAAK,IAAI,CAAC,MAAV,CAAiB,OAAO,CAAC,WAAzB,EAPF,CAhDkB,CA0DpB+I,cAAc,CAAE,CAAC/I,OAAD,CAAU4J,QAAV,gBACd,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,4CAFZ,CAGE,QAAQ,CAAEA,QAHZ,CAIE,OAAO,CAAE5J,OAJX,CAKE,aAAW,YALb,eAOE,oBAAC,GAAD,EAAK,IAAI,CAAC,OAAV,CAAkB,OAAO,CAAC,WAA1B,EAPF,CA3DkB,CAqEpBoJ,qBAAqB,CAAE,CAACpJ,OAAD,CAAU3H,SAAV,gBACrB,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,8CAFZ,CAGE,OAAO,CAAE2H,OAHX,CAIE,aAAW,yBAJb,eAME,oBAAC,GAAD,EAAK,WAAW,CAAE,CAAlB,CAAqB,IAAI,CAAE3H,SAAS,CAAG,OAAH,CAAa,MAAjD,EANF,CAtEkB,CA+EpBuQ,sBAAsB,CAAE,CAAC5I,OAAD,CAAU5H,YAAV,gBACtB,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,oDAFZ,CAGE,OAAO,CAAE4H,OAHX,CAIE,aAAW,iBAJb,eAME,oBAAC,GAAD,EAAK,WAAW,CAAE,CAAlB,CAAqB,IAAI,CAAE5H,YAAY,CAAG,UAAH,CAAgB,UAAvD,EANF,CAhFkB,C","sourcesContent":["import clsx from 'clsx';\nimport React from 'react';\nimport { Swipeable, LEFT, RIGHT } from 'react-swipeable';\nimport throttle from 'lodash.throttle';\nimport debounce from 'lodash.debounce';\nimport isEqual from 'lodash.isequal';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport {\n  arrayOf,\n  bool,\n  func,\n  number,\n  shape,\n  string,\n} from 'prop-types';\nimport SVG from './SVG';\n\nconst screenChangeEvents = [\n  'fullscreenchange',\n  'MSFullscreenChange',\n  'mozfullscreenchange',\n  'webkitfullscreenchange',\n];\n\nconst imageSetType = arrayOf(shape({\n  srcSet: string,\n  media: string,\n}));\n\nfunction isEnterOrSpaceKey(event) {\n  const key = parseInt(event.keyCode || event.which || 0, 10);\n  const ENTER_KEY_CODE = 66;\n  const SPACEBAR_KEY_CODE = 62;\n  return key === ENTER_KEY_CODE || key === SPACEBAR_KEY_CODE;\n}\n\nexport default class ImageGallery extends React.Component {\n  static propTypes = {\n    flickThreshold: number,\n    items: arrayOf(shape({\n      bulletClass: string,\n      bulletOnClick: func,\n      description: string,\n      original: string.isRequired,\n      fullscreen: string,\n      originalAlt: string,\n      originalTitle: string,\n      thumbnail: string,\n      thumbnailAlt: string,\n      thumbnailLabel: string,\n      thumbnailTitle: string,\n      originalClass: string,\n      thumbnailClass: string,\n      renderItem: func,\n      renderThumbInner: func,\n      imageSet: imageSetType,\n      srcSet: string,\n      sizes: string,\n    })).isRequired,\n    showNav: bool,\n    autoPlay: bool,\n    lazyLoad: bool,\n    infinite: bool,\n    showIndex: bool,\n    showBullets: bool,\n    showThumbnails: bool,\n    showPlayButton: bool,\n    showFullscreenButton: bool,\n    disableThumbnailScroll: bool,\n    disableKeyDown: bool,\n    disableSwipe: bool,\n    useBrowserFullscreen: bool,\n    preventDefaultTouchmoveEvent: bool,\n    onErrorImageURL: string,\n    indexSeparator: string,\n    thumbnailPosition: string,\n    startIndex: number,\n    slideDuration: number,\n    slideInterval: number,\n    slideOnThumbnailOver: bool,\n    swipeThreshold: number,\n    swipingTransitionDuration: number,\n    onSlide: func,\n    onBeforeSlide: func,\n    onScreenChange: func,\n    onPause: func,\n    onPlay: func,\n    onClick: func,\n    onImageLoad: func,\n    onImageError: func,\n    onTouchMove: func,\n    onTouchEnd: func,\n    onTouchStart: func,\n    onMouseOver: func,\n    onMouseLeave: func,\n    onThumbnailError: func,\n    onThumbnailClick: func,\n    renderCustomControls: func,\n    renderLeftNav: func,\n    renderRightNav: func,\n    renderPlayPauseButton: func,\n    renderFullscreenButton: func,\n    renderItem: func,\n    renderThumbInner: func,\n    stopPropagation: bool,\n    additionalClass: string,\n    useTranslate3D: bool,\n    isRTL: bool,\n  };\n\n  static defaultProps = {\n    onErrorImageURL: '',\n    additionalClass: '',\n    showNav: true,\n    autoPlay: false,\n    lazyLoad: false,\n    infinite: true,\n    showIndex: false,\n    showBullets: false,\n    showThumbnails: true,\n    showPlayButton: true,\n    showFullscreenButton: true,\n    disableThumbnailScroll: false,\n    disableKeyDown: false,\n    disableSwipe: false,\n    useTranslate3D: true,\n    isRTL: false,\n    useBrowserFullscreen: true,\n    preventDefaultTouchmoveEvent: false,\n    flickThreshold: 0.4,\n    stopPropagation: false,\n    indexSeparator: ' / ',\n    thumbnailPosition: 'bottom',\n    startIndex: 0,\n    slideDuration: 450,\n    swipingTransitionDuration: 0,\n    onSlide: null,\n    onBeforeSlide: null,\n    onScreenChange: null,\n    onPause: null,\n    onPlay: null,\n    onClick: null,\n    onImageLoad: null,\n    onImageError: null,\n    onTouchMove: null,\n    onTouchEnd: null,\n    onTouchStart: null,\n    onMouseOver: null,\n    onMouseLeave: null,\n    onThumbnailError: null,\n    onThumbnailClick: null,\n    renderCustomControls: null,\n    renderThumbInner: null,\n    renderItem: null,\n    slideInterval: 3000,\n    slideOnThumbnailOver: false,\n    swipeThreshold: 30,\n    renderLeftNav: (onClick, disabled) => (\n      <button\n        type=\"button\"\n        className=\"image-gallery-icon image-gallery-left-nav\"\n        disabled={disabled}\n        onClick={onClick}\n        aria-label=\"Previous Slide\"\n      >\n        <SVG icon=\"left\" viewBox=\"6 0 12 24\" />\n      </button>\n    ),\n    renderRightNav: (onClick, disabled) => (\n      <button\n        type=\"button\"\n        className=\"image-gallery-icon image-gallery-right-nav\"\n        disabled={disabled}\n        onClick={onClick}\n        aria-label=\"Next Slide\"\n      >\n        <SVG icon=\"right\" viewBox=\"6 0 12 24\" />\n      </button>\n    ),\n    renderPlayPauseButton: (onClick, isPlaying) => (\n      <button\n        type=\"button\"\n        className=\"image-gallery-icon image-gallery-play-button\"\n        onClick={onClick}\n        aria-label=\"Play or Pause Slideshow\"\n      >\n        <SVG strokeWidth={2} icon={isPlaying ? 'pause' : 'play'} />\n      </button>\n    ),\n    renderFullscreenButton: (onClick, isFullscreen) => (\n      <button\n        type=\"button\"\n        className=\"image-gallery-icon image-gallery-fullscreen-button\"\n        onClick={onClick}\n        aria-label=\"Open Fullscreen\"\n      >\n        <SVG strokeWidth={2} icon={isFullscreen ? 'minimize' : 'maximize'} />\n      </button>\n    ),\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentIndex: props.startIndex,\n      thumbsTranslate: 0,\n      currentSlideOffset: 0,\n      galleryWidth: 0,\n      thumbnailsWrapperWidth: 0,\n      thumbnailsWrapperHeight: 0,\n      isFullscreen: false,\n      isPlaying: false,\n    };\n    this.loadedImages = {};\n    this.imageGallery = React.createRef();\n    this.thumbnailsWrapper = React.createRef();\n    this.thumbnails = React.createRef();\n    this.imageGallerySlideWrapper = React.createRef();\n\n    // bindings\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleOnSwiped = this.handleOnSwiped.bind(this);\n    this.handleScreenChange = this.handleScreenChange.bind(this);\n    this.handleSwiping = this.handleSwiping.bind(this);\n    this.onThumbnailMouseLeave = this.onThumbnailMouseLeave.bind(this);\n    this.handleImageError = this.handleImageError.bind(this);\n    this.pauseOrPlay = this.pauseOrPlay.bind(this);\n    this.renderThumbInner = this.renderThumbInner.bind(this);\n    this.renderItem = this.renderItem.bind(this);\n    this.slideLeft = this.slideLeft.bind(this);\n    this.slideRight = this.slideRight.bind(this);\n    this.toggleFullScreen = this.toggleFullScreen.bind(this);\n    this.togglePlay = this.togglePlay.bind(this);\n\n    // Used to update the throttle if slideDuration changes\n    this.unthrottledSlideToIndex = this.slideToIndex;\n    this.slideToIndex = throttle(\n      this.unthrottledSlideToIndex, props.slideDuration, { trailing: false },\n    );\n\n    if (props.lazyLoad) {\n      this.lazyLoaded = [];\n    }\n  }\n\n  componentDidMount() {\n    const { autoPlay } = this.props;\n    if (autoPlay) {\n      this.play();\n    }\n    window.addEventListener('keydown', this.handleKeyDown);\n    window.addEventListener('mousedown', this.handleMouseDown);\n    this.initResizeObserver(this.imageGallerySlideWrapper);\n    this.addScreenChangeEvent();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      items,\n      lazyLoad,\n      slideDuration,\n      startIndex,\n      thumbnailPosition,\n      showThumbnails,\n    } = this.props;\n    const { currentIndex } = this.state;\n    const itemsSizeChanged = prevProps.items.length !== items.length;\n    const itemsChanged = !isEqual(prevProps.items, items);\n    const startIndexUpdated = prevProps.startIndex !== startIndex;\n    const thumbnailsPositionChanged = prevProps.thumbnailPosition !== thumbnailPosition;\n    const showThumbnailsChanged = prevProps.showThumbnails !== showThumbnails;\n\n    if (thumbnailsPositionChanged) {\n      // re-initialize resizeObserver because slides was unmounted and mounted again\n      this.removeResizeObserver();\n      this.initResizeObserver(this.imageGallerySlideWrapper);\n    }\n\n    if (itemsSizeChanged || showThumbnailsChanged) {\n      this.handleResize();\n    }\n    if (prevState.currentIndex !== currentIndex) {\n      this.slideThumbnailBar(prevState.currentIndex);\n    }\n    // if slideDuration changes, update slideToIndex throttle\n    if (prevProps.slideDuration !== slideDuration) {\n      this.slideToIndex = throttle(\n        this.unthrottledSlideToIndex, slideDuration, { trailing: false },\n      );\n    }\n    if (lazyLoad && (!prevProps.lazyLoad || itemsChanged)) {\n      this.lazyLoaded = [];\n    }\n\n    if (startIndexUpdated || itemsChanged) {\n      // TODO: this should be fix/removed if all it is doing\n      // is resetting the gallery currentIndext state\n      this.setState({ currentIndex: startIndex });\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n    window.removeEventListener('mousedown', this.handleMouseDown);\n    this.removeScreenChangeEvent();\n    this.removeResizeObserver();\n    if (this.playPauseIntervalId) {\n      window.clearInterval(this.playPauseIntervalId);\n      this.playPauseIntervalId = null;\n    }\n    if (this.transitionTimer) {\n      window.clearTimeout(this.transitionTimer);\n    }\n  }\n\n  onSliding() {\n    const { currentIndex, isTransitioning } = this.state;\n    const { onSlide, slideDuration } = this.props;\n    this.transitionTimer = window.setTimeout(() => {\n      if (isTransitioning) {\n        this.setState({ isTransitioning: !isTransitioning });\n        if (onSlide) {\n          onSlide(currentIndex);\n        }\n      }\n    }, slideDuration + 50);\n  }\n\n  onThumbnailClick(event, index) {\n    const { onThumbnailClick } = this.props;\n    this.slideToIndex(index, event);\n    if (onThumbnailClick) {\n      onThumbnailClick(event, index);\n    }\n  }\n\n  onThumbnailMouseOver(event, index) {\n    if (this.thumbnailMouseOverTimer) {\n      window.clearTimeout(this.thumbnailMouseOverTimer);\n      this.thumbnailMouseOverTimer = null;\n    }\n    this.thumbnailMouseOverTimer = window.setTimeout(() => {\n      this.slideToIndex(index);\n      this.pause();\n    }, 300);\n  }\n\n  onThumbnailMouseLeave() {\n    if (this.thumbnailMouseOverTimer) {\n      const { autoPlay } = this.props;\n      window.clearTimeout(this.thumbnailMouseOverTimer);\n      this.thumbnailMouseOverTimer = null;\n      if (autoPlay) {\n        this.play();\n      }\n    }\n  }\n\n  setScrollDirection(dir) {\n    const { scrollingUpDown, scrollingLeftRight } = this.state;\n\n    if (!scrollingUpDown && !scrollingLeftRight) {\n      if (dir === LEFT || dir === RIGHT) {\n        this.setState({ scrollingLeftRight: true });\n      } else {\n        this.setState({ scrollingUpDown: true });\n      }\n    }\n  }\n\n  setThumbsTranslate(thumbsTranslate) {\n    this.setState({ thumbsTranslate });\n  }\n\n  setModalFullscreen(state) {\n    const { onScreenChange } = this.props;\n    this.setState({ modalFullscreen: state });\n    // manually call because browser does not support screenchange events\n    if (onScreenChange) {\n      onScreenChange(state);\n    }\n  }\n\n  getThumbsTranslate(indexDifference) {\n    const { disableThumbnailScroll, items } = this.props;\n    const { thumbnailsWrapperWidth, thumbnailsWrapperHeight } = this.state;\n    let totalScroll;\n    const thumbElement = this.thumbnails && this.thumbnails.current;\n\n    if (disableThumbnailScroll) return 0;\n\n    if (thumbElement) {\n      // total scroll required to see the last thumbnail\n      if (this.isThumbnailVertical()) {\n        if (thumbElement.scrollHeight <= thumbnailsWrapperHeight) {\n          return 0;\n        }\n        totalScroll = thumbElement.scrollHeight - thumbnailsWrapperHeight;\n      } else {\n        if (thumbElement.scrollWidth <= thumbnailsWrapperWidth || thumbnailsWrapperWidth <= 0) {\n          return 0;\n        }\n        totalScroll = thumbElement.scrollWidth - thumbnailsWrapperWidth;\n      }\n      // scroll-x required per index change\n      const perIndexScroll = totalScroll / (items.length - 1);\n      return indexDifference * perIndexScroll;\n    }\n    return 0;\n  }\n\n  getAlignmentClassName(index) {\n    // Necessary for lazing loading\n    const { currentIndex } = this.state;\n    const { infinite, items } = this.props;\n    let alignment = '';\n    const leftClassName = 'left';\n    const centerClassName = 'center';\n    const rightClassName = 'right';\n\n    switch (index) {\n      case (currentIndex - 1):\n        alignment = ` ${leftClassName}`;\n        break;\n      case (currentIndex):\n        alignment = ` ${centerClassName}`;\n        break;\n      case (currentIndex + 1):\n        alignment = ` ${rightClassName}`;\n        break;\n      default:\n        break;\n    }\n\n    if (items.length >= 3 && infinite) {\n      if (index === 0 && currentIndex === items.length - 1) {\n        // set first slide as right slide if were sliding right from last slide\n        alignment = ` ${rightClassName}`;\n      } else if (index === items.length - 1 && currentIndex === 0) {\n        // set last slide as left slide if were sliding left from first slide\n        alignment = ` ${leftClassName}`;\n      }\n    }\n\n    return alignment;\n  }\n\n  getTranslateXForTwoSlide(index) {\n    // For taking care of infinite swipe when there are only two slides\n    const { currentIndex, currentSlideOffset, previousIndex } = this.state;\n    const indexChanged = currentIndex !== previousIndex;\n    const firstSlideWasPrevSlide = index === 0 && previousIndex === 0;\n    const secondSlideWasPrevSlide = index === 1 && previousIndex === 1;\n    const firstSlideIsNextSlide = index === 0 && currentIndex === 1;\n    const secondSlideIsNextSlide = index === 1 && currentIndex === 0;\n    const swipingEnded = currentSlideOffset === 0;\n    const baseTranslateX = -100 * currentIndex;\n    let translateX = baseTranslateX + (index * 100) + currentSlideOffset;\n\n    // keep track of user swiping direction\n    // important to understand how to translateX based on last direction\n    if (currentSlideOffset > 0) {\n      this.direction = 'left';\n    } else if (currentSlideOffset < 0) {\n      this.direction = 'right';\n    }\n\n\n    // when swiping between two slides make sure the next and prev slides\n    // are on both left and right\n    if (secondSlideIsNextSlide && currentSlideOffset > 0) { // swiping right\n      translateX = -100 + currentSlideOffset;\n    }\n    if (firstSlideIsNextSlide && currentSlideOffset < 0) { // swiping left\n      translateX = 100 + currentSlideOffset;\n    }\n\n    if (indexChanged) {\n      // when indexChanged move the slide to the correct side\n      if (firstSlideWasPrevSlide && swipingEnded && this.direction === 'left') {\n        translateX = 100;\n      } else if (secondSlideWasPrevSlide && swipingEnded && this.direction === 'right') {\n        translateX = -100;\n      }\n    } else {\n      // keep the slide on the correct side if the swipe was not successful\n      if (secondSlideIsNextSlide && swipingEnded && this.direction === 'left') {\n        translateX = -100;\n      }\n      if (firstSlideIsNextSlide && swipingEnded && this.direction === 'right') {\n        translateX = 100;\n      }\n    }\n\n    return translateX;\n  }\n\n  getThumbnailBarHeight() {\n    if (this.isThumbnailVertical()) {\n      const { gallerySlideWrapperHeight } = this.state;\n      return { height: gallerySlideWrapperHeight };\n    }\n    return {};\n  }\n\n  getSlideStyle(index) {\n    const { currentIndex, currentSlideOffset, slideStyle } = this.state;\n    const {\n      infinite,\n      items,\n      useTranslate3D,\n      isRTL,\n    } = this.props;\n    const baseTranslateX = -100 * currentIndex;\n    const totalSlides = items.length - 1;\n\n    // calculates where the other slides belong based on currentIndex\n    // if it is RTL the base line should be reversed\n    let translateX = (baseTranslateX + (index * 100)) * (isRTL ? -1 : 1) + currentSlideOffset;\n\n    if (infinite && items.length > 2) {\n      if (currentIndex === 0 && index === totalSlides) {\n        // make the last slide the slide before the first\n        // if it is RTL the base line should be reversed\n        translateX = -100 * (isRTL ? -1 : 1) + currentSlideOffset;\n      } else if (currentIndex === totalSlides && index === 0) {\n        // make the first slide the slide after the last\n        // if it is RTL the base line should be reversed\n        translateX = 100 * (isRTL ? -1 : 1) + currentSlideOffset;\n      }\n    }\n\n    // Special case when there are only 2 items with infinite on\n    if (infinite && items.length === 2) {\n      translateX = this.getTranslateXForTwoSlide(index);\n    }\n\n    let translate = `translate(${translateX}%, 0)`;\n\n    if (useTranslate3D) {\n      translate = `translate3d(${translateX}%, 0, 0)`;\n    }\n\n    return Object.assign({}, {\n      WebkitTransform: translate,\n      MozTransform: translate,\n      msTransform: translate,\n      OTransform: translate,\n      transform: translate,\n    }, slideStyle);\n  }\n\n  getCurrentIndex() {\n    const { currentIndex } = this.state;\n    return currentIndex;\n  }\n\n  getThumbnailStyle() {\n    let translate;\n    const { useTranslate3D, isRTL } = this.props;\n    const { thumbsTranslate } = this.state;\n    const verticalTranslateValue = isRTL ? thumbsTranslate * -1 : thumbsTranslate;\n\n    if (this.isThumbnailVertical()) {\n      translate = `translate(0, ${thumbsTranslate}px)`;\n      if (useTranslate3D) {\n        translate = `translate3d(0, ${thumbsTranslate}px, 0)`;\n      }\n    } else {\n      translate = `translate(${verticalTranslateValue}px, 0)`;\n      if (useTranslate3D) {\n        translate = `translate3d(${verticalTranslateValue}px, 0, 0)`;\n      }\n    }\n    return {\n      WebkitTransform: translate,\n      MozTransform: translate,\n      msTransform: translate,\n      OTransform: translate,\n      transform: translate,\n    };\n  }\n\n  getSlideItems() {\n    const { currentIndex } = this.state;\n    const {\n      infinite,\n      items,\n      slideOnThumbnailOver,\n      onClick,\n      lazyLoad,\n      onTouchMove,\n      onTouchEnd,\n      onTouchStart,\n      onMouseOver,\n      onMouseLeave,\n      renderItem,\n      renderThumbInner,\n      showThumbnails,\n      showBullets,\n    } = this.props;\n\n    const slides = [];\n    const thumbnails = [];\n    const bullets = [];\n\n    items.forEach((item, index) => {\n      const alignment = this.getAlignmentClassName(index);\n      const originalClass = item.originalClass ? ` ${item.originalClass}` : '';\n      const thumbnailClass = item.thumbnailClass ? ` ${item.thumbnailClass}` : '';\n      const handleRenderItem = item.renderItem || renderItem || this.renderItem;\n      const handleRenderThumbInner = item.renderThumbInner\n        || renderThumbInner || this.renderThumbInner;\n\n      const showItem = !lazyLoad || alignment || this.lazyLoaded[index];\n      if (showItem && lazyLoad && !this.lazyLoaded[index]) {\n        this.lazyLoaded[index] = true;\n      }\n\n      const slideStyle = this.getSlideStyle(index);\n\n      const slide = (\n        <div\n          key={`slide-${item.original}-${index}`}\n          tabIndex=\"-1\"\n          className={`image-gallery-slide ${alignment} ${originalClass}`}\n          style={slideStyle}\n          onClick={onClick}\n          onKeyUp={this.handleSlideKeyUp}\n          onTouchMove={onTouchMove}\n          onTouchEnd={onTouchEnd}\n          onTouchStart={onTouchStart}\n          onMouseOver={onMouseOver}\n          onFocus={onMouseOver}\n          onMouseLeave={onMouseLeave}\n          role=\"button\"\n        >\n          {showItem ? handleRenderItem(item) : <div style={{ height: '100%' }} />}\n        </div>\n      );\n\n      if (infinite) {\n        // don't add some slides while transitioning to avoid background transitions\n        if (this.shouldPushSlideOnInfiniteMode(index)) {\n          slides.push(slide);\n        }\n      } else {\n        slides.push(slide);\n      }\n\n      if (showThumbnails) {\n        const igThumbnailClass = clsx(\n          'image-gallery-thumbnail',\n          thumbnailClass,\n          { active: currentIndex === index },\n        );\n        thumbnails.push(\n          <button\n            key={`thumbnail-${item.original}-${index}`}\n            type=\"button\"\n            tabIndex=\"0\"\n            aria-pressed={currentIndex === index ? 'true' : 'false'}\n            aria-label={`Go to Slide ${index + 1}`}\n            className={igThumbnailClass}\n            onMouseLeave={slideOnThumbnailOver ? this.onThumbnailMouseLeave : null}\n            onMouseOver={event => this.handleThumbnailMouseOver(event, index)}\n            onFocus={event => this.handleThumbnailMouseOver(event, index)}\n            onKeyUp={event => this.handleThumbnailKeyUp(event, index)}\n            onClick={event => this.onThumbnailClick(event, index)}\n          >\n            {handleRenderThumbInner(item)}\n          </button>,\n        );\n      }\n\n      if (showBullets) {\n        // generate bullet elements and store them in array\n        const bulletOnClick = (event) => {\n          if (item.bulletOnClick) {\n            item.bulletOnClick({ item, itemIndex: index, currentIndex });\n          }\n          return this.slideToIndex.call(this, index, event);\n        };\n        const igBulletClass = clsx(\n          'image-gallery-bullet',\n          item.bulletClass,\n          { active: currentIndex === index },\n        );\n        bullets.push(\n          <button\n            type=\"button\"\n            key={`bullet-${item.original}-${index}`}\n            className={igBulletClass}\n            onClick={bulletOnClick}\n            aria-pressed={currentIndex === index ? 'true' : 'false'}\n            aria-label={`Go to Slide ${index + 1}`}\n          />,\n        );\n      }\n    });\n\n    return {\n      slides,\n      thumbnails,\n      bullets,\n    };\n  }\n\n  ignoreIsTransitioning() {\n    /*\n      Ignore isTransitioning because were not going to sibling slides\n      e.g. center to left or center to right\n    */\n    const { items } = this.props;\n    const { previousIndex, currentIndex } = this.state;\n    const totalSlides = items.length - 1;\n    // we want to show the in between slides transition\n    const slidingMoreThanOneSlideLeftOrRight = Math.abs(previousIndex - currentIndex) > 1;\n    const notGoingFromFirstToLast = !(previousIndex === 0 && currentIndex === totalSlides);\n    const notGoingFromLastToFirst = !(previousIndex === totalSlides && currentIndex === 0);\n\n    return slidingMoreThanOneSlideLeftOrRight\n      && notGoingFromFirstToLast\n      && notGoingFromLastToFirst;\n  }\n\n  isFirstOrLastSlide(index) {\n    const { items } = this.props;\n    const totalSlides = items.length - 1;\n    const isLastSlide = index === totalSlides;\n    const isFirstSlide = index === 0;\n    return isLastSlide || isFirstSlide;\n  }\n\n\n  slideIsTransitioning(index) {\n    /*\n    returns true if the gallery is transitioning and the index is not the\n    previous or currentIndex\n    */\n    const { isTransitioning, previousIndex, currentIndex } = this.state;\n    const indexIsNotPreviousOrNextSlide = !(index === previousIndex || index === currentIndex);\n    return isTransitioning && indexIsNotPreviousOrNextSlide;\n  }\n\n  shouldPushSlideOnInfiniteMode(index) {\n    /*\n      Push (show) slide if slide is the current slide and the next slide\n      OR\n      The slide is going more than one slide left or right, but not going from\n      first to last and not going from last to first\n      Edge case:\n      If you go to the first or last slide, when they're\n      not left, or right of each other they will try to catch up in the background\n      so unless were going from first to last or vice versa we don't want the first\n      or last slide to show up during the transition\n    */\n    return !this.slideIsTransitioning(index)\n      || (this.ignoreIsTransitioning() && !this.isFirstOrLastSlide(index));\n  }\n\n  slideThumbnailBar(previousIndex) {\n    const { thumbsTranslate, currentIndex } = this.state;\n    if (currentIndex === 0) {\n      this.setThumbsTranslate(0);\n    } else {\n      const indexDifference = Math.abs(previousIndex - currentIndex);\n      const scroll = this.getThumbsTranslate(indexDifference);\n      if (scroll > 0) {\n        if (previousIndex < currentIndex) {\n          this.setThumbsTranslate(thumbsTranslate - scroll);\n        } else if (previousIndex > currentIndex) {\n          this.setThumbsTranslate(thumbsTranslate + scroll);\n        }\n      }\n    }\n  }\n\n  canSlide() {\n    const { items } = this.props;\n    return items.length >= 2;\n  }\n\n  canSlideLeft() {\n    const { infinite, isRTL } = this.props;\n    return infinite || (isRTL ? this.canSlideNext() : this.canSlidePrevious());\n  }\n\n  canSlideRight() {\n    const { infinite, isRTL } = this.props;\n    return infinite || (isRTL ? this.canSlidePrevious() : this.canSlideNext());\n  }\n\n  canSlidePrevious() {\n    const { currentIndex } = this.state;\n    return currentIndex > 0;\n  }\n\n  canSlideNext() {\n    const { currentIndex } = this.state;\n    const { items } = this.props;\n    return currentIndex < items.length - 1;\n  }\n\n  handleSwiping({ event, absX, dir }) {\n    const { preventDefaultTouchmoveEvent, disableSwipe, stopPropagation } = this.props;\n    const {\n      galleryWidth,\n      isTransitioning,\n      scrollingUpDown,\n      scrollingLeftRight,\n    } = this.state;\n\n    if (disableSwipe) return;\n    const { swipingTransitionDuration } = this.props;\n    this.setScrollDirection(dir);\n    if (stopPropagation) event.stopPropagation();\n    if ((preventDefaultTouchmoveEvent || scrollingLeftRight) && event.cancelable) {\n      event.preventDefault();\n    }\n    if (!isTransitioning && !scrollingUpDown) {\n      const side = dir === RIGHT ? 1 : -1;\n\n      let currentSlideOffset = (absX / galleryWidth * 100);\n      if (Math.abs(currentSlideOffset) >= 100) {\n        currentSlideOffset = 100;\n      }\n\n      const swipingTransition = {\n        transition: `transform ${swipingTransitionDuration}ms ease-out`,\n      };\n\n      this.setState({\n        currentSlideOffset: side * currentSlideOffset,\n        slideStyle: swipingTransition,\n      });\n    } else {\n      // don't move the slide\n      this.setState({ currentSlideOffset: 0 });\n    }\n  }\n\n  sufficientSwipe() {\n    const { currentSlideOffset } = this.state;\n    const { swipeThreshold } = this.props;\n    return Math.abs(currentSlideOffset) > swipeThreshold;\n  }\n\n  handleOnSwiped({ event, dir, velocity }) {\n    const { disableSwipe, stopPropagation, flickThreshold } = this.props;\n    const { scrollingUpDown, scrollingLeftRight } = this.state;\n\n    if (disableSwipe) return;\n\n    const { isRTL } = this.props;\n    if (stopPropagation) event.stopPropagation();\n    if (scrollingUpDown) {\n      // user stopped scrollingUpDown\n      this.setState({ scrollingUpDown: false });\n    }\n\n    if (scrollingLeftRight) {\n      // user stopped scrollingLeftRight\n      this.setState({ scrollingLeftRight: false });\n    }\n\n    if (!scrollingUpDown) { // don't swipe if user is scrolling\n      // if it is RTL the direction is reversed\n      const swipeDirection = (dir === LEFT ? 1 : -1) * (isRTL ? -1 : 1);\n      const isFlick = velocity > flickThreshold;\n      this.handleOnSwipedTo(swipeDirection, isFlick);\n    }\n  }\n\n  handleOnSwipedTo(swipeDirection, isFlick) {\n    const { currentIndex, isTransitioning } = this.state;\n    let slideTo = currentIndex;\n\n    if ((this.sufficientSwipe() || isFlick) && !isTransitioning) {\n      // slideto the next/prev slide\n      slideTo += swipeDirection;\n    }\n\n    // If we can't swipe left or right, stay in the current index (noop)\n    if ((swipeDirection === -1 && !this.canSlideLeft())\n        || (swipeDirection === 1 && !this.canSlideRight())) {\n      slideTo = currentIndex;\n    }\n\n    this.unthrottledSlideToIndex(slideTo);\n  }\n\n  handleMouseDown() {\n    // keep track of mouse vs keyboard usage for a11y\n    this.imageGallery.current.classList.add('image-gallery-using-mouse');\n  }\n\n  handleKeyDown(event) {\n    const { disableKeyDown, useBrowserFullscreen } = this.props;\n    const { isFullscreen } = this.state;\n    // keep track of mouse vs keyboard usage for a11y\n    this.imageGallery.current.classList.remove('image-gallery-using-mouse');\n\n    if (disableKeyDown) return;\n    const LEFT_ARROW = 37;\n    const RIGHT_ARROW = 39;\n    const ESC_KEY = 27;\n    const key = parseInt(event.keyCode || event.which || 0, 10);\n\n    switch (key) {\n      case LEFT_ARROW:\n        if (this.canSlideLeft() && !this.playPauseIntervalId) {\n          this.slideLeft(event);\n        }\n        break;\n      case RIGHT_ARROW:\n        if (this.canSlideRight() && !this.playPauseIntervalId) {\n          this.slideRight(event);\n        }\n        break;\n      case ESC_KEY:\n        if (isFullscreen && !useBrowserFullscreen) {\n          this.exitFullScreen();\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  handleImageError(event) {\n    const { onErrorImageURL } = this.props;\n    if (onErrorImageURL && event.target.src.indexOf(onErrorImageURL) === -1) {\n      /* eslint-disable no-param-reassign */\n      event.target.src = onErrorImageURL;\n      /* eslint-enable no-param-reassign */\n    }\n  }\n\n  removeResizeObserver() {\n    if (this.resizeObserver\n        && this.imageGallerySlideWrapper && this.imageGallerySlideWrapper.current) {\n      this.resizeObserver.unobserve(this.imageGallerySlideWrapper.current);\n    }\n  }\n\n  handleResize() {\n    const { currentIndex } = this.state;\n    if (this.imageGallery && this.imageGallery.current) {\n      this.setState({ galleryWidth: this.imageGallery.current.offsetWidth });\n    }\n\n    if (this.imageGallerySlideWrapper && this.imageGallerySlideWrapper.current) {\n      this.setState({\n        gallerySlideWrapperHeight: this.imageGallerySlideWrapper.current.offsetHeight,\n      });\n    }\n\n    if (this.thumbnailsWrapper && this.thumbnailsWrapper.current) {\n      if (this.isThumbnailVertical()) {\n        this.setState({ thumbnailsWrapperHeight: this.thumbnailsWrapper.current.offsetHeight });\n      } else {\n        this.setState({ thumbnailsWrapperWidth: this.thumbnailsWrapper.current.offsetWidth });\n      }\n    }\n\n    // Adjust thumbnail container when thumbnail width or height is adjusted\n    this.setThumbsTranslate(-this.getThumbsTranslate(currentIndex));\n  }\n\n  initResizeObserver(element) {\n    this.resizeObserver = new ResizeObserver(debounce((entries) => {\n      if (!entries) return;\n      entries.forEach(() => {\n        this.handleResize();\n      });\n    }, 300));\n    this.resizeObserver.observe(element.current);\n  }\n\n  toggleFullScreen() {\n    const { isFullscreen } = this.state;\n    if (isFullscreen) {\n      this.exitFullScreen();\n    } else {\n      this.fullScreen();\n    }\n  }\n\n  togglePlay() {\n    if (this.playPauseIntervalId) {\n      this.pause();\n    } else {\n      this.play();\n    }\n  }\n\n\n  handleScreenChange() {\n    /*\n      handles screen change events that the browser triggers e.g. esc key\n    */\n    const { onScreenChange, useBrowserFullscreen } = this.props;\n    const fullScreenElement = document.fullscreenElement\n      || document.msFullscreenElement\n      || document.mozFullScreenElement\n      || document.webkitFullscreenElement;\n\n    // check if screenchange element is the gallery\n    const isFullscreen = this.imageGallery.current === fullScreenElement;\n    if (onScreenChange) onScreenChange(isFullscreen);\n    if (useBrowserFullscreen) this.setState({ isFullscreen });\n  }\n\n  slideToIndex(index, event) {\n    const { currentIndex, isTransitioning } = this.state;\n    const { items, slideDuration, onBeforeSlide } = this.props;\n\n    if (!isTransitioning) {\n      if (event) {\n        if (this.playPauseIntervalId) {\n          // user triggered event while ImageGallery is playing, reset interval\n          this.pause(false);\n          this.play(false);\n        }\n      }\n\n      const slideCount = items.length - 1;\n      let nextIndex = index;\n      if (index < 0) {\n        nextIndex = slideCount;\n      } else if (index > slideCount) {\n        nextIndex = 0;\n      }\n\n      if (onBeforeSlide && nextIndex !== currentIndex) {\n        onBeforeSlide(nextIndex);\n      }\n\n      this.setState({\n        previousIndex: currentIndex,\n        currentIndex: nextIndex,\n        isTransitioning: nextIndex !== currentIndex,\n        currentSlideOffset: 0,\n        slideStyle: { transition: `all ${slideDuration}ms ease-out` },\n      }, this.onSliding);\n    }\n  }\n\n  slideLeft(event) {\n    const { isRTL } = this.props;\n    if (isRTL) {\n      this.slideNext(event);\n    } else {\n      this.slidePrevious(event);\n    }\n  }\n\n  slideRight(event) {\n    const { isRTL } = this.props;\n    if (isRTL) {\n      this.slidePrevious(event);\n    } else {\n      this.slideNext(event);\n    }\n  }\n\n  slidePrevious(event) {\n    const { currentIndex, currentSlideOffset, isTransitioning } = this.state;\n    const { items } = this.props;\n    const nextIndex = currentIndex - 1;\n\n    if (isTransitioning) return;\n\n    if (items.length === 2) {\n      /*\n        When there are only 2 slides fake a tiny swipe to get the slides\n        on the correct side for transitioning\n      */\n      this.setState({\n        currentSlideOffset: currentSlideOffset + 0.001, // this will reset once index changes\n        slideStyle: { transition: 'none' }, // move the slide over instantly\n      }, () => {\n        // add 25ms timeout to avoid delay in moving slides over\n        window.setTimeout(() => this.slideToIndex(nextIndex, event), 25);\n      });\n    } else {\n      this.slideToIndex(nextIndex, event);\n    }\n  }\n\n  slideNext(event) {\n    const { currentIndex, currentSlideOffset, isTransitioning } = this.state;\n    const { items } = this.props;\n    const nextIndex = currentIndex + 1;\n\n    if (isTransitioning) return;\n\n    if (items.length === 2) {\n      // same as above for 2 slides\n      this.setState({\n        currentSlideOffset: currentSlideOffset - 0.001,\n        slideStyle: { transition: 'none' },\n      }, () => {\n        window.setTimeout(() => this.slideToIndex(nextIndex, event), 25);\n      });\n    } else {\n      this.slideToIndex(nextIndex, event);\n    }\n  }\n\n  handleThumbnailMouseOver(event, index) {\n    const { slideOnThumbnailOver } = this.props;\n    if (slideOnThumbnailOver) this.onThumbnailMouseOver(event, index);\n  }\n\n  handleThumbnailKeyUp(event, index) {\n    // a11y support ^_^\n    if (isEnterOrSpaceKey(event)) this.onThumbnailClick(event, index);\n  }\n\n  handleSlideKeyUp(event) {\n    // a11y support ^_^\n    if (isEnterOrSpaceKey(event)) {\n      const { onClick } = this.props;\n      onClick(event);\n    }\n  }\n\n  isThumbnailVertical() {\n    const { thumbnailPosition } = this.props;\n    return thumbnailPosition === 'left' || thumbnailPosition === 'right';\n  }\n\n  addScreenChangeEvent() {\n    screenChangeEvents.forEach((eventName) => {\n      document.addEventListener(eventName, this.handleScreenChange);\n    });\n  }\n\n  removeScreenChangeEvent() {\n    screenChangeEvents.forEach((eventName) => {\n      document.removeEventListener(eventName, this.handleScreenChange);\n    });\n  }\n\n  fullScreen() {\n    const { useBrowserFullscreen } = this.props;\n    const gallery = this.imageGallery.current;\n    if (useBrowserFullscreen) {\n      if (gallery.requestFullscreen) {\n        gallery.requestFullscreen();\n      } else if (gallery.msRequestFullscreen) {\n        gallery.msRequestFullscreen();\n      } else if (gallery.mozRequestFullScreen) {\n        gallery.mozRequestFullScreen();\n      } else if (gallery.webkitRequestFullscreen) {\n        gallery.webkitRequestFullscreen();\n      } else {\n        // fallback to fullscreen modal for unsupported browsers\n        this.setModalFullscreen(true);\n      }\n    } else {\n      this.setModalFullscreen(true);\n    }\n    this.setState({ isFullscreen: true });\n  }\n\n  exitFullScreen() {\n    const { isFullscreen } = this.state;\n    const { useBrowserFullscreen } = this.props;\n    if (isFullscreen) {\n      if (useBrowserFullscreen) {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else {\n          // fallback to fullscreen modal for unsupported browsers\n          this.setModalFullscreen(false);\n        }\n      } else {\n        this.setModalFullscreen(false);\n      }\n      this.setState({ isFullscreen: false });\n    }\n  }\n\n  pauseOrPlay() {\n    const { infinite } = this.props;\n    const { currentIndex } = this.state;\n    if (!infinite && !this.canSlideRight()) {\n      this.pause();\n    } else {\n      this.slideToIndex(currentIndex + 1);\n    }\n  }\n\n  play(shouldCallOnPlay = true) {\n    const {\n      onPlay,\n      slideInterval,\n      slideDuration,\n    } = this.props;\n    const { currentIndex } = this.state;\n    if (!this.playPauseIntervalId) {\n      this.setState({ isPlaying: true });\n      this.playPauseIntervalId = window.setInterval(\n        this.pauseOrPlay,\n        Math.max(slideInterval, slideDuration),\n      );\n      if (onPlay && shouldCallOnPlay) {\n        onPlay(currentIndex);\n      }\n    }\n  }\n\n  pause(shouldCallOnPause = true) {\n    const { onPause } = this.props;\n    const { currentIndex } = this.state;\n    if (this.playPauseIntervalId) {\n      window.clearInterval(this.playPauseIntervalId);\n      this.playPauseIntervalId = null;\n      this.setState({ isPlaying: false });\n      if (onPause && shouldCallOnPause) {\n        onPause(currentIndex);\n      }\n    }\n  }\n\n  isImageLoaded(item) {\n    /*\n      Keep track of images loaded so that onImageLoad prop is not\n      called multiple times when re-render the images\n    */\n    const imageExists = this.loadedImages[item.original];\n    if (imageExists) {\n      return true;\n    }\n    // add image as loaded\n    this.loadedImages[item.original] = true;\n    return false;\n  }\n\n  handleImageLoaded(event, item) {\n    const { onImageLoad } = this.props;\n    const imageExists = this.loadedImages[item.original];\n    if (!imageExists && onImageLoad) {\n      this.loadedImages[item.original] = true; // prevent from call again\n      // image just loaded, call onImageLoad\n      onImageLoad(event);\n    }\n  }\n\n  renderItem(item) {\n    const { isFullscreen } = this.state;\n    const { onImageError } = this.props;\n    const handleImageError = onImageError || this.handleImageError;\n    const itemSrc = isFullscreen ? (item.fullscreen || item.original) : item.original;\n\n    return (\n      <div>\n        {\n          item.imageSet ? (\n            <picture\n              onLoad={event => this.handleImageLoaded(event, item)}\n              onError={handleImageError}\n            >\n              {\n                item.imageSet.map((source, index) => (\n                  <source\n                    key={`media-${source.srcSet}-${index}`}\n                    media={source.media}\n                    srcSet={source.srcSet}\n                    type={source.type}\n                  />\n                ))\n              }\n              <img\n                className=\"image-gallery-image\"\n                alt={item.originalAlt}\n                src={itemSrc}\n              />\n            </picture>\n          ) : (\n            <img\n              className=\"image-gallery-image\"\n              src={itemSrc}\n              alt={item.originalAlt}\n              srcSet={item.srcSet}\n              sizes={item.sizes}\n              title={item.originalTitle}\n              onLoad={event => this.handleImageLoaded(event, item)}\n              onError={handleImageError}\n            />\n          )\n        }\n\n        {\n          item.description && (\n            <span className=\"image-gallery-description\">\n              {item.description}\n            </span>\n          )\n        }\n      </div>\n    );\n  }\n\n  renderThumbInner(item) {\n    const { onThumbnailError } = this.props;\n    const handleThumbnailError = onThumbnailError || this.handleImageError;\n\n    return (\n      <div className=\"image-gallery-thumbnail-inner\">\n        <img\n          className=\"image-gallery-thumbnail-image\"\n          src={item.thumbnail}\n          alt={item.thumbnailAlt}\n          title={item.thumbnailTitle}\n          onError={handleThumbnailError}\n        />\n        {\n          item.thumbnailLabel && (\n            <div className=\"image-gallery-thumbnail-label\">\n              {item.thumbnailLabel}\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      currentIndex,\n      isFullscreen,\n      modalFullscreen,\n      isPlaying,\n    } = this.state;\n\n    const {\n      additionalClass,\n      indexSeparator, // deprecate soon, and allow custom render\n      isRTL,\n      items,\n      thumbnailPosition,\n      renderFullscreenButton,\n      renderCustomControls,\n      renderLeftNav,\n      renderRightNav,\n      showBullets,\n      showFullscreenButton,\n      showIndex,\n      showThumbnails,\n      showNav,\n      showPlayButton,\n      renderPlayPauseButton,\n    } = this.props;\n\n    const thumbnailStyle = this.getThumbnailStyle();\n    const { slides, thumbnails, bullets } = this.getSlideItems();\n    const slideWrapperClass = clsx(\n      'image-gallery-slide-wrapper',\n      thumbnailPosition,\n      { 'image-gallery-rtl': isRTL },\n    );\n\n    const slideWrapper = (\n      <div ref={this.imageGallerySlideWrapper} className={slideWrapperClass}>\n        {renderCustomControls && renderCustomControls()}\n        {\n          this.canSlide() ? (\n            <React.Fragment>\n              {\n                showNav && (\n                  <React.Fragment>\n                    {renderLeftNav(this.slideLeft, !this.canSlideLeft())}\n                    {renderRightNav(this.slideRight, !this.canSlideRight())}\n                  </React.Fragment>\n                )\n              }\n              <Swipeable\n                className=\"image-gallery-swipe\"\n                delta={0}\n                onSwiping={this.handleSwiping}\n                onSwiped={this.handleOnSwiped}\n              >\n                <div className=\"image-gallery-slides\">\n                  {slides}\n                </div>\n              </Swipeable>\n            </React.Fragment>\n          ) : (\n            <div className=\"image-gallery-slides\">\n              {slides}\n            </div>\n          )\n        }\n        {showPlayButton && renderPlayPauseButton(this.togglePlay, isPlaying)}\n        {\n          showBullets && (\n            <div className=\"image-gallery-bullets\">\n              <div\n                className=\"image-gallery-bullets-container\"\n                role=\"navigation\"\n                aria-label=\"Bullet Navigation\"\n              >\n                {bullets}\n              </div>\n            </div>\n          )\n        }\n        {showFullscreenButton && renderFullscreenButton(this.toggleFullScreen, isFullscreen)}\n        {\n          showIndex && (\n            <div className=\"image-gallery-index\">\n              <span className=\"image-gallery-index-current\">\n                {currentIndex + 1}\n              </span>\n              <span className=\"image-gallery-index-separator\">\n                {indexSeparator}\n              </span>\n              <span className=\"image-gallery-index-total\">\n                {items.length}\n              </span>\n            </div>\n          )\n        }\n      </div>\n    );\n\n    const igClass = clsx('image-gallery', additionalClass, { 'fullscreen-modal': modalFullscreen });\n    const igContentClass = clsx('image-gallery-content', thumbnailPosition, { fullscreen: isFullscreen });\n    const thumbnailWrapperClass = clsx(\n      'image-gallery-thumbnails-wrapper',\n      thumbnailPosition,\n      { 'thumbnails-wrapper-rtl': !this.isThumbnailVertical() && isRTL },\n    );\n    return (\n      <div\n        ref={this.imageGallery}\n        className={igClass}\n        aria-live=\"polite\"\n      >\n        <div className={igContentClass}>\n          {(thumbnailPosition === 'bottom' || thumbnailPosition === 'right') && slideWrapper}\n          {\n            showThumbnails && (\n              <div\n                className={thumbnailWrapperClass}\n                style={this.getThumbnailBarHeight()}\n              >\n                <div\n                  className=\"image-gallery-thumbnails\"\n                  ref={this.thumbnailsWrapper}\n                >\n                  <div\n                    ref={this.thumbnails}\n                    className=\"image-gallery-thumbnails-container\"\n                    style={thumbnailStyle}\n                    aria-label=\"Thumbnail Navigation\"\n                  >\n                    {thumbnails}\n                  </div>\n                </div>\n              </div>\n            )\n          }\n          {(thumbnailPosition === 'top' || thumbnailPosition === 'left') && slideWrapper}\n        </div>\n\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}