{"ast":null,"code":"import _regeneratorRuntime from\"/home/filipe/Desktop/AMS/Projeto/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filipe/Desktop/AMS/Projeto/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React from\"react\";import ImageGallery from'./ImageGallery';import\"../../assets/css/custom.css\";// reactstrap components\nimport{Card,CardHeader,CardBody,Container,Row,Col,CardTitle,Button,UncontrolledCollapse,ButtonDropdown,DropdownToggle,DropdownMenu,DropdownItem,Badge}from\"reactstrap\";// core components\nimport Header from\"../../components/Headers/Header.js\";import Maps from\"./Maps_Component.js\";import{Redirect}from\"react-router-dom\";const PREFIX_URL='https://raw.githubusercontent.com/xiaolin/react-image-gallery/master/static/';const MEDIA_URL='/media/';function fix_date(st){let date=st.split('T');let year=date[0];let time=date[1].split('.')[0];return year+\" \"+time;}class EventDetails extends React.Component{constructor(props){var _this;super(props);_this=this;this.get_data=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response,result,resp,res,media,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/event/\".concat(id));case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;_this.setState(prevState=>({event_data:{car:result['cars'],location:{address:result['location']['address'],coords:{lat:result['location']['lat'],lng:result['location']['lng']}},damage:result['damage'],date:fix_date(result['date']),n_cars_involved:result['n_cars_involved'],n_people_involved:result['n_people'],n_people_injured:parseInt(result['n_people_injured']),status:result['status']},video_total:parseInt(result['video_total']),dropDownValue:_this.init_text_dropdown(parseInt(result['status']))}));_context.next=9;return fetch(\"/Nmedia/\".concat(id,\"/photos\"));case 9:resp=_context.sent;_context.next=12;return resp.json();case 12:res=_context.sent;_this.numImg=parseInt(res);media=[];if(_this.state.video_total>0){for(i=1;i<_this.state.video_total+1;i++){media.push({thumbnail:\"/media/\".concat(id,\"/video/\").concat(i,\"T.jpg\"),original:\"/media/\".concat(id,\"/video/\").concat(i,\"T.jpg\"),source:\"/media/\".concat(id,\"/video/\").concat(i,\".mp4\"),renderItem:_this._renderVideo.bind(_this)});}}else{media.push({thumbnail:\"/media/novideo.png\",original:\"/media/novideo.png\"});}for(i=0;i<_this.numImg;i++){media.push({thumbnail:\"/media/\".concat(id,\"/photos/\").concat(i,\".jpeg\"),original:\"/media/\".concat(id,\"/photos/\").concat(i,\".jpeg\")});}_this.setState(prevState=>_this.images=media);case 18:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();this.renderCars=(value,index)=>{return/*#__PURE__*/React.createElement(CardBody,{className:\"border rounded\"},/*#__PURE__*/React.createElement(CardTitle,{tag:\"h4\",className:\"text-uppercase text-muted mb-0\"},\"Car \",index+1),/*#__PURE__*/React.createElement(CardBody,{className:\"align-content-center\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold\"},\"Activated ABS\"),/*#__PURE__*/React.createElement(\"span\",null,\": \",String(value['ABS']))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold\"},\"Fired Airbag\"),/*#__PURE__*/React.createElement(\"span\",null,\": \",String(value['airbag']))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold\"},\"Passengers\"),/*#__PURE__*/React.createElement(\"span\",null,\": \",value['n_people'],\" \")),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold\"},\"Overturned\"),/*#__PURE__*/React.createElement(\"span\",null,\": \",String(value['overturned']))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold\"},\"Temperature\"),/*#__PURE__*/React.createElement(\"span\",null,\": \",value['temperature'])),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold\"},\"Collision velocity\"),/*#__PURE__*/React.createElement(\"span\",null,\": \",value['velocity']))));};this.onGoBack=()=>{return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/events\"});};this.handleClick=(e,id,value)=>{e.preventDefault();let new_injured=this.state.event_data.n_people_injured+value;if(new_injured>=0){this.setState(()=>this.state.event_data.n_people_injured=new_injured);this.set_injured(id,new_injured);}};this.timer=null;this.toggle=this.toggle.bind(this);this.changeValue=this.changeValue.bind(this);this.state={showIndex:false,showBullets:true,infinite:true,showThumbnails:true,showFullscreenButton:true,showGalleryFullscreenButton:true,showPlayButton:false,showGalleryPlayButton:false,showNav:true,isRTL:false,slideDuration:5,slideInterval:2000,slideOnThumbnailOver:false,thumbnailPosition:'left',showVideo:{},video_total:0,photos_total:0,event_data:{car:[],location:{address:\" \",coords:{lat:40,lng:30}},damage:0.0,date:\" \",n_cars_involved:0,n_people_involved:0,n_people_injured:0},dropDownValue:0,dropDownOpen:false};this.numImg=0;this.images=[{thumbnail:\"\",original:\"\",source:'',renderItem:this._renderVideo.bind(this)},{original:\"\",thumbnail:\"\",imageSet:[{srcSet:\"\".concat(PREFIX_URL,\"image_set_cropped.jpg\"),media:'(max-width: 1280px)'},{srcSet:\"\".concat(PREFIX_URL,\"image_set_default.jpg\"),media:'(min-width: 1280px)'}]},{original:\"\".concat(PREFIX_URL,\"1.jpg\"),thumbnail:\"\".concat(PREFIX_URL,\"1t.jpg\"),originalClass:'featured-slide',thumbnailClass:'featured-thumb'}];}componentDidMount(){let id=this.props.match.params['id'];this.get_data(id);this.timer=setInterval(()=>this.get_data(id),5000);}componentDidUpdate(prevProps,prevState){if(this.state.slideInterval!==prevState.slideInterval||this.state.slideDuration!==prevState.slideDuration){// refresh setInterval\nthis._imageGallery.pause();this._imageGallery.play();};}componentWillUnmount(){clearInterval(this.timer);this.timer=null;}_onImageClick(event){console.debug('clicked on image',event.target,'at index',this._imageGallery.getCurrentIndex());}_onImageLoad(event){console.debug('loaded image',event.target.src);}_onSlide(index){this._resetVideo();console.debug('slid to index',index);}_onPause(index){console.debug('paused on index',index);}_onScreenChange(fullScreenElement){console.debug('isFullScreen?',!!fullScreenElement);}_onPlay(index){console.debug('playing from index',index);}_resetVideo(){this.setState({showVideo:{}});if(this.state.showPlayButton){this.setState({showGalleryPlayButton:true});}if(this.state.showFullscreenButton){this.setState({showGalleryFullscreenButton:true});}}_toggleShowVideo(url){this.state.showVideo[url]=!Boolean(this.state.showVideo[url]);this.setState({showVideo:this.state.showVideo});if(this.state.showVideo[url]){if(this.state.showPlayButton){this.setState({showGalleryPlayButton:false});}if(this.state.showFullscreenButton){this.setState({showGalleryFullscreenButton:false});}}}_renderVideo(item){return/*#__PURE__*/React.createElement(\"div\",null,this.state.showVideo[item.source]?/*#__PURE__*/React.createElement(\"div\",{className:\"video-wrapper\"},/*#__PURE__*/React.createElement(\"a\",{className:\"close-video\",onClick:this._toggleShowVideo.bind(this,item.source)}),/*#__PURE__*/React.createElement(\"video\",{autoPlay:true,controls:true},\"// width='100%' // height='100%'\",/*#__PURE__*/React.createElement(\"source\",{src:item.source,type:\"video/mp4\"}),\"// frameBorder='0' // allowFullScreen >\")):/*#__PURE__*/React.createElement(\"a\",{onClick:this._toggleShowVideo.bind(this,item.source)},/*#__PURE__*/React.createElement(\"div\",{className:\"play-button\"}),/*#__PURE__*/React.createElement(\"img\",{className:\"image-gallery-image\",src:item.original}),item.description&&/*#__PURE__*/React.createElement(\"span\",{className:\"image-gallery-description\",style:{right:'0',left:'initial',height:'100%'}},item.description)));}/* Status dropdown functions */toggle(){this.setState({dropDownOpen:!this.state.dropDownOpen});}changeValue(e){this.updateDBToSelectedStatus(e.currentTarget.textContent);this.setState({dropDownValue:e.currentTarget.textContent});}getBarColor(damage){if(damage<30){return\"h2 font-weight-bold mb-0 text-success\";}else if(damage<45){return\"h2 font-weight-bold mb-0 text-teal\";}else if(damage<75){return\"h2 font-weight-bold mb-0 text-orange\";}else{return\"h2 font-weight-bold mb-0 text-red\";}}setStatusColor(){if(this.state.dropDownValue===\"event resolved\"){return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-lime\"}));}if(this.state.dropDownValue===\"Emergency services are on their way\"){return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-yellow\"}));}else{return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-red\"}));}}init_text_dropdown(id){if(id===2){return\"event resolved\";}else if(id===1){return\"Emergency services are on their way\";}else{return\"event still not answered\";}}updateDBToSelectedStatus(value){if(value===\"event resolved\"){fetch(\"/set_event_status/\".concat(this.props.match.params['id']),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"status\":2})});}if(value===\"Emergency services are on their way\"){fetch(\"/set_event_status/\".concat(this.props.match.params['id']),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"status\":1})});}else{fetch(\"/set_event_status/\".concat(this.props.match.params['id']),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"status\":0})});}}set_injured(id,value){fetch(\"/set_event_injured/\".concat(id),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"injured\":\"\".concat(value)})});}render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\" mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\" col\"},/*#__PURE__*/React.createElement(Card,{className:\" shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\" bg-transparent\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-info text-white rounded-circle shadow\",href:\"/#admin/events\",onClick:this.onGoBack()},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-left\"})),/*#__PURE__*/React.createElement(\"h2\",{className:\" mt-2 ml-4 \"},\"Event Details\"))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mr-2\"},this.setStatusColor()),/*#__PURE__*/React.createElement(\"div\",{className:\"mr-2 \"},/*#__PURE__*/React.createElement(ButtonDropdown,{className:\"dropdown-width\",isOpen:this.state.dropDownOpen,toggle:this.toggle},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true},this.state.dropDownValue),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{onClick:this.changeValue},\"event still not answered\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:this.changeValue},\"Emergency services are on their way\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:this.changeValue},\"event resolved\")))))))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,{className:\"h-75 \"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"img\",{src:require(\"../../assets/img/brand/event.png\"),style:{height:\"100%\",width:\"100%\"}}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Address:\"),\" \",this.state.event_data.location.address))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Lat:\"),\" \",this.state.event_data.location.coords.lat)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Lng:\"),\" \",this.state.event_data.location.coords.lng)))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(ImageGallery,{ref:i=>this._imageGallery=i,items:this.images,lazyLoad:false,onClick:this._onImageClick.bind(this),onImageLoad:this._onImageLoad,onSlide:this._onSlide.bind(this),onPause:this._onPause.bind(this),onScreenChange:this._onScreenChange.bind(this),onPlay:this._onPlay.bind(this),infinite:this.state.infinite,showBullets:this.state.showBullets,showFullscreenButton:this.state.showFullscreenButton&&this.state.showGalleryFullscreenButton,showPlayButton:this.state.showPlayButton&&this.state.showGalleryPlayButton,showThumbnails:this.state.showThumbnails,showIndex:this.state.showIndex,showNav:this.state.showNav,isRTL:this.state.isRTL,thumbnailPosition:this.state.thumbnailPosition,slideDuration:parseInt(this.state.slideDuration),slideInterval:parseInt(this.state.slideInterval),slideOnThumbnailOver:this.state.slideOnThumbnailOver,additionalClass:\"app-image-gallery\"})))),/*#__PURE__*/React.createElement(Maps,{markers:[{id:this.props.match.params['id'],lat:this.state.event_data.location.coords.lat,lng:this.state.event_data.location.coords.lng,status:this.state.event_data.status}],googleMapURL:\"https://maps.googleapis.com/maps/api/js?key=AIzaSyD4aWR3SBGaa1oB0CuDf2vptnJfSMSguZU\",loadingElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\"}}),center:this.state.event_data.location.coords,zoom:17,containerElement:/*#__PURE__*/React.createElement(\"div\",{className:\"map-canvas\",id:\"map-canvas\"}),mapElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\",borderRadius:\"inherit\"}})}),/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h3\",null,\" MORE DETAILS... \")),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\",xl:\"3\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats mb-4 mb-xl-0\"},/*#__PURE__*/React.createElement(CardBody,{className:\"border rounded border-info\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(CardTitle,{tag:\"h5\",className:\"text-uppercase text-muted mb-0\"},\"Number of cars involved\"),/*#__PURE__*/React.createElement(\"span\",{className:\"h2 font-weight-bold mb-0\"},this.state.event_data.n_cars_involved)),/*#__PURE__*/React.createElement(Col,{className:\"col-auto\"},/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-success text-dark rounded-circle shadow\",id:\"toggler\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-car\"}))))))),/*#__PURE__*/React.createElement(Col,{lg:\"6\",xl:\"3\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats mb-4 mb-xl-0\"},/*#__PURE__*/React.createElement(CardBody,{className:\"border rounded border-info\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(CardTitle,{tag:\"h5\",className:\"text-uppercase text-muted mb-0\"},\"Number of persons involved\"),/*#__PURE__*/React.createElement(\"span\",{className:\"h2 font-weight-bold mb-0\"},this.state.event_data.n_people_involved)),/*#__PURE__*/React.createElement(Col,{className:\"col-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-info text-dark rounded-circle shadow\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-users\"}))))))),/*#__PURE__*/React.createElement(Col,{lg:\"6\",xl:\"3\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats mb-4 mb-xl-0\"},/*#__PURE__*/React.createElement(CardBody,{className:\"border rounded border-info\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(CardTitle,{tag:\"h5\",className:\"text-uppercase text-muted mb-0\"},\"Number of persons injured\"),/*#__PURE__*/React.createElement(\"span\",{className:\"h2 font-weight-bold mb-0\"},/*#__PURE__*/React.createElement(Button,{className:\" icon-sm icon-shapesm bg-warning text-dark shadow\",onClick:e=>this.handleClick(e,this.props.match.params['id'],-1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-minus\"})),this.state.event_data.n_people_injured,/*#__PURE__*/React.createElement(Button,{className:\" icon-sm icon-shapesm bg-success text-dark shadow\",onClick:e=>this.handleClick(e,this.props.match.params['id'],1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\"})))),/*#__PURE__*/React.createElement(Col,{className:\"col-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-danger text-dark rounded-circle shadow\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-user-injured\"}))))))),/*#__PURE__*/React.createElement(Col,{lg:\"6\",xl:\"3\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats mb-4 mb-xl-0\"},/*#__PURE__*/React.createElement(CardBody,{className:\"border rounded border-info\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(CardTitle,{tag:\"h5\",className:\"text-uppercase text-muted mb-0\"},\"Severity of the event\"),/*#__PURE__*/React.createElement(\"span\",{className:this.getBarColor(this.state.event_data.damage)},this.state.event_data.damage)),/*#__PURE__*/React.createElement(Col,{className:\"col-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-yellow text-dark rounded-circle shadow\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-exclamation-triangle\"})))))))),/*#__PURE__*/React.createElement(UncontrolledCollapse,{toggler:\"#toggler\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,this.state.event_data[\"car\"].map(this.renderCars)))))))))));}}export default EventDetails;","map":{"version":3,"sources":["/home/filipe/Desktop/AMS/Projeto/react_frontend/src/views/examples/EventDetails.js"],"names":["React","ImageGallery","Card","CardHeader","CardBody","Container","Row","Col","CardTitle","Button","UncontrolledCollapse","ButtonDropdown","DropdownToggle","DropdownMenu","DropdownItem","Badge","Header","Maps","Redirect","PREFIX_URL","MEDIA_URL","fix_date","st","date","split","year","time","EventDetails","Component","constructor","props","get_data","id","fetch","response","json","result","setState","prevState","event_data","car","location","address","coords","lat","lng","damage","n_cars_involved","n_people_involved","n_people_injured","parseInt","status","video_total","dropDownValue","init_text_dropdown","resp","res","numImg","media","state","i","push","thumbnail","original","source","renderItem","_renderVideo","bind","images","renderCars","value","index","String","onGoBack","handleClick","e","preventDefault","new_injured","set_injured","timer","toggle","changeValue","showIndex","showBullets","infinite","showThumbnails","showFullscreenButton","showGalleryFullscreenButton","showPlayButton","showGalleryPlayButton","showNav","isRTL","slideDuration","slideInterval","slideOnThumbnailOver","thumbnailPosition","showVideo","photos_total","dropDownOpen","imageSet","srcSet","originalClass","thumbnailClass","componentDidMount","match","params","setInterval","componentDidUpdate","prevProps","_imageGallery","pause","play","componentWillUnmount","clearInterval","_onImageClick","event","console","debug","target","getCurrentIndex","_onImageLoad","src","_onSlide","_resetVideo","_onPause","_onScreenChange","fullScreenElement","_onPlay","_toggleShowVideo","url","Boolean","item","description","right","left","height","updateDBToSelectedStatus","currentTarget","textContent","getBarColor","setStatusColor","method","headers","body","JSON","stringify","render","require","width","borderRadius","map"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport ImageGallery from './ImageGallery';\nimport \"../../assets/css/custom.css\"\n\n// reactstrap components\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Container,\n  Row,\n  Col,\n  CardTitle,\n  Button,\n  UncontrolledCollapse,\n  ButtonDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem, Badge\n} from \"reactstrap\";\n// core components\nimport Header from \"../../components/Headers/Header.js\";\nimport Maps from \"./Maps_Component.js\";\nimport {Redirect} from \"react-router-dom\";\n\nconst PREFIX_URL = 'https://raw.githubusercontent.com/xiaolin/react-image-gallery/master/static/';\nconst MEDIA_URL='/media/'\n\nfunction fix_date(st) {\n  let date = st.split('T');\n  let year = date[0];\n  let time  = date[1].split('.')[0];\n  return year + \" \" + time;\n}\n\nclass EventDetails extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.timer = null;\n\n    this.toggle = this.toggle.bind(this);\n    this.changeValue = this.changeValue.bind(this);\n\n    this.state = {\n      showIndex: false,\n      showBullets: true,\n      infinite: true,\n      showThumbnails: true,\n      showFullscreenButton: true,\n      showGalleryFullscreenButton: true,\n      showPlayButton: false,\n      showGalleryPlayButton: false,\n      showNav: true,\n      isRTL: false,\n      slideDuration: 5,\n      slideInterval: 2000,\n      slideOnThumbnailOver: false,\n      thumbnailPosition: 'left',\n      showVideo: {},\n      video_total:0,\n      photos_total:0,\n      event_data: {\n        car: [],\n        location: {\n          address: \" \",\n          coords: {lat: 40, lng: 30 },\n        },\n        damage: 0.0,\n        date: \" \",\n        n_cars_involved: 0,\n        n_people_involved: 0,\n        n_people_injured: 0, \n      },\n      dropDownValue: 0,\n      dropDownOpen: false,\n    };\n    this.numImg=0\n    this.images = [\n      {\n        thumbnail: ``,\n        original: ``,\n        source: '',\n        renderItem: this._renderVideo.bind(this)\n      },\n      {\n        original: ``,\n        thumbnail: ``,\n        imageSet: [\n          {\n            srcSet: `${PREFIX_URL}image_set_cropped.jpg`,\n            media : '(max-width: 1280px)',\n          },\n          {\n            srcSet: `${PREFIX_URL}image_set_default.jpg`,\n            media : '(min-width: 1280px)',\n          }\n        ]\n      },\n      {\n        original: `${PREFIX_URL}1.jpg`,\n        thumbnail: `${PREFIX_URL}1t.jpg`,\n        originalClass: 'featured-slide',\n        thumbnailClass: 'featured-thumb',\n      }\n    ]\n  }\n\n\n  get_data = async (id) => {\n    const response = await fetch(\n      `/event/${id}`);\n    const result = await response.json();\n    this.setState(prevState => (\n      {\n        event_data:  {\n          car: result['cars'],\n          location: \n          {\n            address: result['location']['address'],\n            coords: {lat: result['location']['lat'],lng: result['location']['lng']}\n          },\n          damage: result['damage'],\n          date: fix_date(result['date']),\n          n_cars_involved: result['n_cars_involved'],\n          n_people_involved: result['n_people'],\n          n_people_injured: parseInt(result['n_people_injured']),\n          status: result['status']\n        },\n        video_total:parseInt(result['video_total']),\n        dropDownValue: this.init_text_dropdown(parseInt(result['status']))\n      }\n    ));\n    const resp =await fetch(\n      `/Nmedia/${id}/photos`);\n    const res = await resp.json();\n    this.numImg = parseInt(res)\n    const media=[]\n    if (this.state.video_total >0){\n      for (let i = 1; i < this.state.video_total+1; i++) {\n        media.push({\n        thumbnail: `/media/${id}/video/${i}T.jpg`,\n        original: `/media/${id}/video/${i}T.jpg`,\n        source: `/media/${id}/video/${i}.mp4`,\n        renderItem: this._renderVideo.bind(this)\n      })\n    }\n    }else{\n      media.push({\n        thumbnail: `/media/novideo.png`,\n        original: `/media/novideo.png`\n      })\n    }\n    for (let i = 0; i < this.numImg; i++) {\n      media.push({\n        thumbnail: `/media/${id}/photos/${i}.jpeg`,\n        original: `/media/${id}/photos/${i}.jpeg`\n      })\n    }\n\n    this.setState(prevState => (\n        this.images= media\n    ));\n\n\n  }\n\n  componentDidMount() {\n    let id = this.props.match.params['id']\n    this.get_data(id)\n    this.timer = setInterval(() => this.get_data(id),5000)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.slideInterval !== prevState.slideInterval ||\n        this.state.slideDuration !== prevState.slideDuration) {\n      // refresh setInterval\n      this._imageGallery.pause();\n      this._imageGallery.play();\n    };\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.timer)\n    this.timer = null\n  }\n\n  renderCars = (value,index) => {\n    return(\n      <CardBody className=\"border rounded\">\n        <CardTitle\n          tag=\"h4\"\n          className=\"text-uppercase text-muted mb-0\"\n        >\n          Car {index + 1}\n        </CardTitle>\n        <CardBody className=\"align-content-center\">\n          <Row>\n            <span className=\"font-weight-bold\">Activated ABS</span>\n            <span>: {String(value['ABS'])}</span>\n          </Row>\n          <Row>\n            <span className=\"font-weight-bold\">Fired Airbag</span>\n            <span>: {String(value['airbag'])}</span>\n          </Row>\n          <Row>\n            <span className=\"font-weight-bold\">Passengers</span>\n            <span>: {value['n_people']} </span>\n          </Row>\n          <Row>\n            <span className=\"font-weight-bold\">Overturned</span>\n            <span>: {String(value['overturned'])}</span>\n          </Row>\n          <Row>\n            <span className=\"font-weight-bold\">Temperature</span>\n            <span>: {value['temperature']}</span>\n          </Row>\n          <Row>\n            <span className=\"font-weight-bold\">Collision velocity</span>\n            <span>: {value['velocity']}</span>\n          </Row>\n        </CardBody>\n      </CardBody>\n    )\n  }\n\n  _onImageClick(event) {\n    console.debug('clicked on image', event.target, 'at index', this._imageGallery.getCurrentIndex());\n  }\n\n  _onImageLoad(event) {\n    console.debug('loaded image', event.target.src);\n  }\n\n  _onSlide(index) {\n    this._resetVideo();\n    console.debug('slid to index', index);\n  }\n\n  _onPause(index) {\n    console.debug('paused on index', index);\n  }\n\n  _onScreenChange(fullScreenElement) {\n    console.debug('isFullScreen?', !!fullScreenElement);\n  }\n\n  _onPlay(index) {\n    console.debug('playing from index', index);\n  }\n\n  _resetVideo() {\n    this.setState({showVideo: {}});\n\n    if (this.state.showPlayButton) {\n      this.setState({showGalleryPlayButton: true});\n    }\n\n    if (this.state.showFullscreenButton) {\n      this.setState({showGalleryFullscreenButton: true});\n    }\n  }\n\n  _toggleShowVideo(url) {\n    this.state.showVideo[url] = !Boolean(this.state.showVideo[url]);\n    this.setState({\n      showVideo: this.state.showVideo\n    });\n\n    if (this.state.showVideo[url]) {\n      if (this.state.showPlayButton) {\n        this.setState({showGalleryPlayButton: false});\n      }\n\n      if (this.state.showFullscreenButton) {\n        this.setState({showGalleryFullscreenButton: false});\n      }\n    }\n  }\n\n  _renderVideo(item) {\n    return (\n      <div>\n        {\n          this.state.showVideo[item.source] ?\n            <div className='video-wrapper'>\n                <a\n                  className='close-video'\n                  onClick={this._toggleShowVideo.bind(this, item.source)}\n                >\n                </a>\n                <video autoPlay controls>\n                  // width='100%'\n                  // height='100%'\n                  <source \n                  src={item.source}\n                  type=\"video/mp4\">\n\n                  </source>\n                  // frameBorder='0'\n                  // allowFullScreen\n                >\n                </video>\n            </div>\n          :\n            <a onClick={this._toggleShowVideo.bind(this, item.source)}>\n              <div className='play-button'/>\n              <img className='image-gallery-image' src={item.original} />\n              {\n                item.description &&\n                  <span\n                    className='image-gallery-description'\n                    style={{right: '0', left: 'initial', height:'100%'}}\n                  >\n                    {item.description}\n                  </span>\n              }\n            </a>\n        }\n      </div>\n    );\n  }\n\n  onGoBack = () => {\n      return <Redirect to=\"/admin/events\"/>\n  }\n\n  /* Status dropdown functions */\n  toggle() {\n    this.setState({dropDownOpen: !this.state.dropDownOpen});\n  }\n\n  changeValue(e) {\n    this.updateDBToSelectedStatus(e.currentTarget.textContent)\n    this.setState({dropDownValue: e.currentTarget.textContent})\n\n  }\n\n  getBarColor(damage){\n      if(damage<30){return\"h2 font-weight-bold mb-0 text-success\"\n      }else if(damage < 45){return\"h2 font-weight-bold mb-0 text-teal\"\n      }else if(damage < 75){return \"h2 font-weight-bold mb-0 text-orange\"\n      }else{return \"h2 font-weight-bold mb-0 text-red\"}\n  }\n\n  setStatusColor() {\n    if(this.state.dropDownValue === \"event resolved\"){\n      return(\n        <Badge color=\"\" className=\"badge-dot badge-lg\">\n          <i className=\"bg-lime\" />\n        </Badge>\n      )\n    }\n    if(this.state.dropDownValue === \"Emergency services are on their way\"){\n      return(\n        <Badge color=\"\" className=\"badge-dot badge-lg\">\n          <i className=\"bg-yellow\" />\n        </Badge>\n      )\n    }\n    else {\n       return(\n        <Badge color=\"\" className=\"badge-dot badge-lg\">\n          <i className=\"bg-red\" />\n        </Badge>\n      )\n    }\n  }\n\n  init_text_dropdown(id) {\n    if(id === 2 ){\n      return(\"event resolved\")\n    }else if(id ===1){\n      return(\"Emergency services are on their way\")\n    }else{return(\"event still not answered\")}\n  }\n\n  updateDBToSelectedStatus(value) {\n    if(value === \"event resolved\"){\n      fetch(`/set_event_status/${this.props.match.params['id']}`,{\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          \"status\": 2\n        })\n      })\n    }\n    if(value === \"Emergency services are on their way\"){\n      fetch(`/set_event_status/${this.props.match.params['id']}`,{\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          \"status\": 1\n        })\n      })\n    }\n    else {\n      fetch(`/set_event_status/${this.props.match.params['id']}`,{\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          \"status\": 0\n        })\n      })\n    }\n  }\n  handleClick = (e,id,value) => {\n    e.preventDefault();\n    let new_injured = this.state.event_data.n_people_injured+value\n    if (new_injured >=0) {\n      this.setState(() => (this.state.event_data.n_people_injured = new_injured))\n      this.set_injured(id, new_injured);\n    }\n  };\n\n  set_injured(id,value){\n      fetch(`/set_event_injured/${id}`,{\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          \"injured\": `${value}`\n        })\n      })\n       }\n\n  render() {\n    return (\n      <>\n        <Header />\n        <Container className=\" mt--7\" fluid>\n          <Row>\n            <Col className=\" col\">\n              <Card className=\" shadow\">\n                <CardHeader className=\" bg-transparent\">\n                  <Row>\n                    <Col>\n                      <div className=\"d-flex\">\n                        <Button\n                          className=\"icon icon-shape bg-info text-white rounded-circle shadow\"\n                          href=\"/#admin/events\"\n                          onClick= {this.onGoBack()}\n                        >\n                          <i className=\"fas fa-angle-left\"/>\n                        </Button>\n                        <h2 className=\" mt-2 ml-4 \">Event Details</h2>\n                      </div>\n                    </Col>\n                    <Col>\n                      <div className=\"row justify-content-end\">\n                        <div className=\"mr-2\">\n                          {this.setStatusColor()}\n                        </div>\n                        <div className=\"mr-2 \">\n                          <ButtonDropdown className=\"dropdown-width\" isOpen={this.state.dropDownOpen} toggle={this.toggle}>\n                            <DropdownToggle caret>\n                              {this.state.dropDownValue}\n                            </DropdownToggle>\n                            <DropdownMenu right>\n                              <DropdownItem onClick={this.changeValue}>event still not answered</DropdownItem>\n                              <DropdownItem onClick={this.changeValue}>Emergency services are on their way</DropdownItem>\n                              <DropdownItem onClick={this.changeValue}>event resolved</DropdownItem>\n                            </DropdownMenu>\n                          </ButtonDropdown>\n                        </div>\n                      </div>\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <CardBody>\n                  <Row className=\"h-75 \">\n                    <Col>\n                      <Row >\n                        <div className=\"col\">\n                          <img src={require(\"../../assets/img/brand/event.png\")} style={{height:\"100%\",width:\"100%\"}} />\n                        </div>\n                      </Row>\n                      <Row>\n                        <div className=\"col\">\n                          <p><strong>Address:</strong> {this.state.event_data.location.address}</p>\n                        </div>\n                      </Row>\n                      <Row>\n                        <div className=\"col-sm\">\n                          <p><strong>Lat:</strong> {this.state.event_data.location.coords.lat}</p>\n                        </div>\n                        <div className=\"col-sm\">\n                          <p><strong>Lng:</strong> {this.state.event_data.location.coords.lng}</p>\n                        </div>\n                      </Row>\n                    </Col>\n                    <Col>\n                      <CardBody>\n                        <ImageGallery\n                          ref={i => this._imageGallery = i}\n                          items={this.images}\n                          lazyLoad={false}\n                          onClick={this._onImageClick.bind(this)}\n                          onImageLoad={this._onImageLoad}\n                          onSlide={this._onSlide.bind(this)}\n                          onPause={this._onPause.bind(this)}\n                          onScreenChange={this._onScreenChange.bind(this)}\n                          onPlay={this._onPlay.bind(this)}\n                          infinite={this.state.infinite}\n                          showBullets={this.state.showBullets}\n                          showFullscreenButton={this.state.showFullscreenButton && this.state.showGalleryFullscreenButton}\n                          showPlayButton={this.state.showPlayButton && this.state.showGalleryPlayButton}\n                          showThumbnails={this.state.showThumbnails}\n                          showIndex={this.state.showIndex}\n                          showNav={this.state.showNav}\n                          isRTL={this.state.isRTL}\n                          thumbnailPosition={this.state.thumbnailPosition}\n                          slideDuration={parseInt(this.state.slideDuration)}\n                          slideInterval={parseInt(this.state.slideInterval)}\n                          slideOnThumbnailOver={this.state.slideOnThumbnailOver}\n                          additionalClass=\"app-image-gallery\"\n                        />\n                      </CardBody>\n                    </Col>\n                  </Row>\n                  <Maps\n                        markers = {[{id: this.props.match.params['id'],\n                                    lat: this.state.event_data.location.coords.lat,\n                                    lng: this.state.event_data.location.coords.lng,\n                                    status: this.state.event_data.status}]}\n                        googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyD4aWR3SBGaa1oB0CuDf2vptnJfSMSguZU\"\n                        loadingElement={<div style={{ height: `100%` }} />}\n                        center = {this.state.event_data.location.coords}\n                        zoom = {17}\n\n                        containerElement={\n                          <div\n                            className=\"map-canvas\"\n                            id=\"map-canvas\"\n                          />\n                        }\n                        mapElement={\n                          <div style={{ height: `100%`, borderRadius: \"inherit\" }} />\n                        }\n\n                      />\n                  <CardHeader>\n                    <h3> MORE DETAILS... </h3>\n                  </CardHeader>\n\t\t\t\t\t<Row>\n                     <Col lg=\"6\" xl=\"3\">\n                        <Card className=\"card-stats mb-4 mb-xl-0\">\n                          <CardBody className=\"border rounded border-info\">\n                              <Row>\n                                <div className=\"col\">\n                                  <CardTitle\n                                    tag=\"h5\"\n                                    className=\"text-uppercase text-muted mb-0\"\n                                  >\n                                    Number of cars involved\n                                  </CardTitle>\n                                  <span className=\"h2 font-weight-bold mb-0\">{this.state.event_data.n_cars_involved}</span>\n                                </div>\n                                  <Col className=\"col-auto\">\n                                    <Button className=\"icon icon-shape bg-success text-dark rounded-circle shadow\" id=\"toggler\">\n                                      <i className=\"fas fa-car\"/>\n                                    </Button>\n                                  </Col>\n                              </Row>\n                          </CardBody>\n                        </Card>\n                      </Col>\n                      <Col lg=\"6\" xl=\"3\">\n                        <Card className=\"card-stats mb-4 mb-xl-0\">\n                          <CardBody className=\"border rounded border-info\">\n\n                              <Row>\n                                <div className=\"col\">\n                                  <CardTitle\n                                    tag=\"h5\"\n                                    className=\"text-uppercase text-muted mb-0\"\n                                  >\n                                    Number of persons involved\n                                  </CardTitle>\n                                  <span className=\"h2 font-weight-bold mb-0\">\n                                    {this.state.event_data.n_people_involved}\n                                  </span>\n                                </div>\n                                <Col className=\"col-auto\">\n                                  <div className=\"icon icon-shape bg-info text-dark rounded-circle shadow\">\n                                    <i className=\"fas fa-users\"/>\n                                  </div>\n                                </Col>\n                              </Row>\n\n                          </CardBody>\n                        </Card>\n                      </Col>\n                      <Col lg=\"6\" xl=\"3\">\n                        <Card className=\"card-stats mb-4 mb-xl-0\">\n                          <CardBody className=\"border rounded border-info\">\n                            <Row>\n                              <div className=\"col\">\n                                <CardTitle\n                                  tag=\"h5\"\n                                  className=\"text-uppercase text-muted mb-0\"\n                                >\n                                  Number of persons injured\n                                </CardTitle>\n\n                                <span className=\"h2 font-weight-bold mb-0\">\n                                  <Button className=\" icon-sm icon-shapesm bg-warning text-dark shadow\" onClick={(e)=>this.handleClick(e,this.props.match.params['id'],-1)}>\n                                      <i className=\"fas fa-minus\"/>\n                                </Button>\n                                  {this.state.event_data.n_people_injured}\n                                  <Button className=\" icon-sm icon-shapesm bg-success text-dark shadow\"onClick={(e)=>this.handleClick(e,this.props.match.params['id'],1)}>\n                                      <i className=\"fas fa-plus\"/>\n                                </Button>\n                                </span>\n\n                              </div>\n                              <Col className=\"col-auto\">\n                                <div className=\"icon icon-shape bg-danger text-dark rounded-circle shadow\">\n                                  <i className=\"fas fa-user-injured\"/>\n                                </div>\n                              </Col>\n                            </Row>\n                          </CardBody>\n                        </Card>\n                      </Col>\n                      <Col lg=\"6\" xl=\"3\">\n                        <Card className=\"card-stats mb-4 mb-xl-0\">\n                          <CardBody className=\"border rounded border-info\">\n                            <Row>\n                              <div className=\"col\">\n                                <CardTitle\n                                  tag=\"h5\"\n                                  className=\"text-uppercase text-muted mb-0\"\n                                >\n                                  Severity of the event\n                                </CardTitle>\n                                <span className={this.getBarColor(this.state.event_data.damage)}>\n                                  {this.state.event_data.damage}\n                                </span>\n                              </div>\n                              <Col className=\"col-auto\">\n                                <div className=\"icon icon-shape bg-yellow text-dark rounded-circle shadow\">\n                                  <i className=\"fas fa-exclamation-triangle\"/>\n                                </div>\n                              </Col>\n                            </Row>\n                          </CardBody>\n                        </Card>\n                      </Col>\n                    </Row>\n                    <UncontrolledCollapse toggler=\"#toggler\">\n                      <Card>\n                        <CardBody>\n                          <Row>\n                            {this.state.event_data[\"car\"].map(this.renderCars)}\n                          </Row>\n                        </CardBody>\n                      </Card>\n                    </UncontrolledCollapse>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default EventDetails;\n"]},"metadata":{},"sourceType":"module"}