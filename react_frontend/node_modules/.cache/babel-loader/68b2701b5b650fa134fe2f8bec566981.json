{"ast":null,"code":"import _regeneratorRuntime from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React from\"react\";import{Redirect}from\"react-router-dom\";import\"../../assets/css/custom.css\";// reactstrap components\nimport{Badge,Card,CardHeader,Media,Table,Container,Row,Button,Col,Progress,DropdownToggle,DropdownMenu,DropdownItem,ButtonDropdown}from\"reactstrap\";// core components\nimport Header from\"../../components/Headers/Header.js\";import Maps from\"./Maps_Component.js\";function fix_date(st){let date=st.split('T');let year=date[0];let time=date[1].split('.')[0];return[year,time];}class Users_table extends React.Component{constructor(props){var _this;super(props);_this=this;this.redirect_to_details=index=>{return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/accident_details/\".concat(index)});};this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response1,result1;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(_this.state);_context.prev=1;_context.next=4;return fetch(\"/all_users\");case 4:response1=_context.sent;_context.next=7;return response1.json();case 7:result1=_context.sent;if(result1.length===0)_this.setState(prevState=>({error:\"No users to Show\"}));else _this.setState(prevState=>({table_data:result1,error:false}));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);_this.setState(prevState=>({error:\"No users to Show\"}));case 14:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));this.renderArray=(value,index)=>{return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"id\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"Username\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"email\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"role\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"role_type\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},this.state.edit_mode&&/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-success text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-check\"})),/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-yellow text-white rounded-circle\",type:\"button\",onClick:this.setEditMode},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-pencil-alt\"})),/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-danger text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"}))));};this.handleClick=(e,id)=>{e.preventDefault();this.state.curent_page=id;this.getData();};this.timer=null;this.toggleDrop1=this.toggleDrop1.bind(this);this.changeValueDrop1=this.changeValueDrop1.bind(this);this.setEditMode=this.setEditMode.bind(this);this.state={table_data:[],table_buttons:[],curent_page:1,num_accidents:0,num_to_show:10,dropDown1Value:\"Date/Hour\",dropdownIndex:\"between\",dropDown1Open:false,error:false,edit_mode:false};}renderButtons(){if(this.state.num_accidents>this.state.num_to_show){const Buttons=[];if(this.state.curent_page>1)Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,this.state.curent_page-1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-left\"}))));for(let i=1;i<Math.ceil(this.state.num_accidents/this.state.num_to_show)+1;i++){if(i==this.state.curent_page){Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item active\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,\"\".concat(i))},i)));}else{Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,\"\".concat(i))},i)));}}if(this.state.curent_page<Math.ceil(this.state.num_accidents/this.state.num_to_show))Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,parseInt(this.state.curent_page)+1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-right\"}))));return/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"nav\",{\"aria-label\":\"Page navigation example\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"pagination\"},Buttons)));}else{return;}}componentDidMount(){//this.getData(this.state.curent_page);\nthis.getData();this.timer=setInterval(()=>this.getData(),10000);}componentWillUnmount(){clearInterval(this.timer);this.timer=null;}/* DropDown functions */toggleDrop1(){this.setState({dropDown1Open:!this.state.dropDown1Open});}changeValueDrop1(e,id){const a=[\"\",\"between\",\"cars\",\"people\",\"injured\",\"severity\",\"status\"];this.state.dropDown1Value=e.currentTarget.textContent;this.state.dropdownIndex=\"\".concat(a[id]);this.getData(id);}setEditMode(){console.log(this.state);this.setState(prevState=>({edit_mode:true}));}/**************************/render(){if(this.state.error){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"mb-0\",style:{paddingLeft:20}},\"Users\"))))),/*#__PURE__*/React.createElement(\"h1\",{className:\"text-danger mb-0\",style:{textAlign:\"center\"}},\" \",this.state.error),/*#__PURE__*/React.createElement(\"br\",null))))));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"mb-0\",style:{paddingLeft:20}},\"Users\"))),/*#__PURE__*/React.createElement(Col,null,this.renderButtons()))),/*#__PURE__*/React.createElement(Table,{bordered:true,className:\"align-items-center table-flush\",hover:true},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col \",style:{textAlign:\"center\"}},\"ID\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Username\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Email\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Role\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Role ID\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}}))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state[\"table_data\"].map(this.renderArray))),/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"row justify-content-center\"},this.renderButtons()))))))));}}}export default Users_table;","map":{"version":3,"sources":["/home/filipe/Desktop/PEI/git/PEI/react_frontend/src/views/examples/Users_table.js"],"names":["React","Redirect","Badge","Card","CardHeader","Media","Table","Container","Row","Button","Col","Progress","DropdownToggle","DropdownMenu","DropdownItem","ButtonDropdown","Header","Maps","fix_date","st","date","split","year","time","Users_table","Component","constructor","props","redirect_to_details","index","getData","console","log","state","fetch","response1","json","result1","length","setState","prevState","error","table_data","renderArray","value","textAlign","edit_mode","setEditMode","handleClick","e","id","preventDefault","curent_page","timer","toggleDrop1","bind","changeValueDrop1","table_buttons","num_accidents","num_to_show","dropDown1Value","dropdownIndex","dropDown1Open","renderButtons","Buttons","push","i","Math","ceil","parseInt","componentDidMount","setInterval","componentWillUnmount","clearInterval","a","currentTarget","textContent","render","paddingLeft","map"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport \"../../assets/css/custom.css\"\n\n// reactstrap components\nimport {\n    Badge,\n    Card,\n    CardHeader,\n    Media,\n    Table,\n    Container,\n    Row,\n    Button, Col, Progress, DropdownToggle, DropdownMenu, DropdownItem, ButtonDropdown,\n} from \"reactstrap\";\n// core components\nimport Header from \"../../components/Headers/Header.js\";\nimport Maps from \"./Maps_Component.js\"\n\n\nfunction fix_date(st) {\n  let date = st.split('T');\n  let year = date[0];\n  let time  = date[1].split('.')[0];\n  return [year,time];\n}\n\nclass Users_table extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.timer = null\n\n    this.toggleDrop1 = this.toggleDrop1.bind(this);\n    this.changeValueDrop1 = this.changeValueDrop1.bind(this);\n    this.setEditMode=this.setEditMode.bind(this)\n\n    this.state = {\n      table_data : [],\n      table_buttons:[],\n      curent_page:1,\n      num_accidents:0,\n      num_to_show:10,\n      dropDown1Value: \"Date/Hour\",\n      dropdownIndex:\"between\",\n      dropDown1Open: false,\n      error:false,\n      edit_mode:false\n    }\n  }\n\n  redirect_to_details = (index) => {\n    return <Redirect to={`/admin/accident_details/${index}`}/>\n  }\n\n  getData = async () => {\n      console.log(this.state)\n      try {\n           /*const response = await fetch(\n              `/num_accidents?quantity=${this.state.dropdownIndex2}`\n          );\n\n          const result = await response.json();\n          this.setState(\n              prevState => (\n                  {\n                      num_accidents: result\n                  }\n              )\n          );*/\n          const response1 = await fetch(\n              `/all_users`\n          );\n\n          const result1 = await response1.json();\n         if(result1.length===0)\n              this.setState(\n             prevState => (\n                 {\n                     error: \"No users to Show\"\n                 }\n             )\n         );\n          else\n              this.setState(\n                  prevState => (\n                      {\n                          table_data: result1,\n                          error: false\n                      }\n                  )\n              );\n      }\n    catch(e){\n         this.setState(\n             prevState => (\n                 {\n                     error: \"No users to Show\"\n                 }\n             )\n         );\n     }\n  }\n\n\n\n  renderArray = (value,index) => {\n\n    return(\n      <tr key={index} >\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"id\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"Username\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"email\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"role\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"role_type\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n            {this.state.edit_mode && (\n                <Button\n                className=\"icon icon-shape bg-success text-white rounded-circle\"\n            >\n               <i className=\"fas fa-check\"></i>\n           </Button>\n            ) }\n           <Button\n                className=\"icon icon-shape bg-yellow text-white rounded-circle\"\n                type=\"button\"\n                 onClick={this.setEditMode}\n            >\n               <i className=\"fas fa-pencil-alt\"></i>\n           </Button>\n           <Button\n                className=\"icon icon-shape bg-danger text-white rounded-circle\"\n\n            >\n             <i className=\"fas fa-trash\"/>\n           </Button>\n        </th>\n      </tr>\n    )\n  }\n\n  renderButtons(){\n     if(this.state.num_accidents > this.state.num_to_show){\n      const Buttons = []\n      if(this.state.curent_page >1)\n        Buttons.push(\n            <li className=\"page-item\">\n                <a className=\"page-link\" onClick={(e)=>this.handleClick(e,this.state.curent_page-1)}>\n                    <i className=\"fas fa-angle-left\"/>\n                </a>\n            </li>\n        )\n      for (let i = 1; i < Math.ceil(this.state.num_accidents/this.state.num_to_show)+1; i++) {\n        if(i==this.state.curent_page){\n          Buttons.push(<li className=\"page-item active\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,`${i}`)}>{i}</a></li>)\n        }\n        else{\n          Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,`${i}`)}>{i}</a></li>)\n        }\n      }\n      if(this.state.curent_page < Math.ceil(this.state.num_accidents/this.state.num_to_show) )\n        Buttons.push(\n            <li className=\"page-item\">\n                <a className=\"page-link\" onClick={(e)=>this.handleClick(e,parseInt(this.state.curent_page)+1)}>\n                    <i className=\"fas fa-angle-right\"/>\n                </a>\n            </li>\n        )\n\n      return(\n              <div className=\"row justify-content-center\">\n                 <nav aria-label=\"Page navigation example\">\n                     <ul className=\"pagination\">\n                        {Buttons}\n                     </ul>\n                 </nav>\n              </div>\n      )}\n      else{\n          return\n      }\n  }\n\n  componentDidMount() {\n    //this.getData(this.state.curent_page);\n    this.getData();\n    this.timer = setInterval(() => this.getData(), 10000)\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.timer)\n    this.timer = null\n  }\n\n  handleClick = (e,id) => {\n    e.preventDefault();\n    this.state.curent_page=id\n    this.getData();\n  };\n\n /* DropDown functions */\n  toggleDrop1() {\n    this.setState({dropDown1Open: !this.state.dropDown1Open});\n  }\n\n  changeValueDrop1(e,id) {\n\n      const a = [\"\",\"between\",\"cars\",\"people\",\"injured\",\"severity\",\"status\"]\n      this.state.dropDown1Value= e.currentTarget.textContent\n      this.state.dropdownIndex= `${a[id]}`\n      this.getData(id)\n  }\n  setEditMode(){\n      console.log(this.state)\n      this.setState(\n                  prevState => (\n                      {\n                          edit_mode:true\n                      }\n                  )\n              );\n  }\n\n\n  /**************************/\n\n  render() {\n      if(this.state.error ){\n        return (\n         <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          {/* Dark table */}\n          <Row className=\"mt-5\">\n            <div className=\"col\">\n              <Card className=\"shadow\">\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col>\n                      <div className=\"row ml\">\n                        <h1 className=\"mb-0\" style={{ paddingLeft: 20}} >Users</h1>\n                      </div>\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <h1 className=\"text-danger mb-0\" style={{textAlign:\"center\"}}> {this.state.error}</h1>\n                  <br/>\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>);\n    }else{\n    return (\n      <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          {/* Dark table */}\n          <Row className=\"mt-5\">\n            <div className=\"col\">\n              <Card className=\"shadow\">\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col>\n                      <div className=\"row ml\">\n                        <h1 className=\"mb-0\" style={{ paddingLeft: 20}} >Users</h1>\n                      </div>\n                    </Col>\n                    <Col >\n                      {this.renderButtons()}\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <Table bordered\n                  className=\"align-items-center table-flush\"\n                  hover\n                >\n                  <thead className=\"thead-light\">\n                    <tr >\n                      <th scope=\"col \" style={{textAlign:\"center\"}}>ID</th>\n                      <th scope=\"col\"  style={{textAlign:\"center\"}}>Username</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>Email</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>Role</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>Role ID</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}   />\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state[\"table_data\"].map(this.renderArray)}\n                  </tbody>\n                </Table>\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col className=\"row justify-content-center\">\n                      {this.renderButtons()}\n                    </Col>\n                  </Row>\n                </CardHeader>\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>\n    );\n  }}\n}\n\nexport default Users_table;\n"]},"metadata":{},"sourceType":"module"}