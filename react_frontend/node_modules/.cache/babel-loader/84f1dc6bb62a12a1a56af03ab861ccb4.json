{"ast":null,"code":"import _regeneratorRuntime from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React from\"react\";import{Redirect}from\"react-router-dom\";import\"../../assets/css/custom.css\";// reactstrap components\nimport{Badge,Card,CardHeader,Media,Table,Container,Row,Button,Col,Progress,DropdownToggle,DropdownMenu,DropdownItem,ButtonDropdown}from\"reactstrap\";// core components\nimport Header from\"../../components/Headers/Header.js\";import Maps from\"./Maps_Component.js\";function fix_date(st){let date=st.split('T');let year=date[0];let time=date[1].split('.')[0];return[year,time];}class Users_table extends React.Component{constructor(props){var _this;super(props);_this=this;this.redirect_to_details=index=>{return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/accident_details/\".concat(index)});};this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response1,result1,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(_this.state);_context.prev=1;_context.next=4;return fetch(\"/all_users\");case 4:response1=_context.sent;_context.next=7;return response1.json();case 7:result1=_context.sent;if(result1.length===0){if(_this.state.edit_mode.length==0){for(i=0;i<result1.length;i++){_this.state.edit_mode.push(false);}}_this.setState(prevState=>({error:\"No users to Show\"}));}else _this.setState(prevState=>({table_data:result1,error:false}));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);_this.setState(prevState=>({error:\"No users to Show\"}));case 14:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));this.renderArray=(value,index)=>{return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"id\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"Username\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"email\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"role\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"role_type\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"last_login\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},this.state.edit_mode[index]&&/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-success text-white rounded-circle\",type:\"button\",onClick:e=>this.setEditMode(index,false)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-check\"})),/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-yellow text-white rounded-circle\",type:\"button\",onClick:e=>this.setEditMode(index,true)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-pencil-alt\"})),/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-danger text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"}))));};this.handleClick=(e,id)=>{e.preventDefault();this.state.curent_page=id;this.getData();};this.timer=null;this.toggleDrop1=this.toggleDrop1.bind(this);this.changeValueDrop1=this.changeValueDrop1.bind(this);this.setEditMode=this.setEditMode.bind(this);this.NewUser=this.NewUser.bind(this);this.renderNewUser=this.renderNewUser.bind(this);this.state={table_data:[],table_buttons:[],curent_page:1,num_accidents:0,num_to_show:10,dropDown1Value:\"Date/Hour\",dropdownIndex:\"between\",dropDown1Open:false,error:false,edit_mode:[],addUser:false};}renderNewUser(){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},\"teste\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}}),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}}),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}}),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}}),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}}),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}}));}renderButtons(){if(this.state.num_accidents>this.state.num_to_show){const Buttons=[];if(this.state.curent_page>1)Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,this.state.curent_page-1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-left\"}))));for(let i=1;i<Math.ceil(this.state.num_accidents/this.state.num_to_show)+1;i++){if(i==this.state.curent_page){Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item active\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,\"\".concat(i))},i)));}else{Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,\"\".concat(i))},i)));}}if(this.state.curent_page<Math.ceil(this.state.num_accidents/this.state.num_to_show))Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,parseInt(this.state.curent_page)+1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-right\"}))));return/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"nav\",{\"aria-label\":\"Page navigation example\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"pagination\"},Buttons)));}else{return;}}componentDidMount(){//this.getData(this.state.curent_page);\nthis.getData();this.timer=setInterval(()=>this.getData(),10000);}componentWillUnmount(){clearInterval(this.timer);this.timer=null;}/* DropDown functions */toggleDrop1(){this.setState({dropDown1Open:!this.state.dropDown1Open});}changeValueDrop1(e,id){const a=[\"\",\"between\",\"cars\",\"people\",\"injured\",\"severity\",\"status\"];this.state.dropDown1Value=e.currentTarget.textContent;this.state.dropdownIndex=\"\".concat(a[id]);this.getData(id);}setEditMode(index,value){this.state.edit_mode[parseInt(index)]=value;this.setState(prevState=>({}));}NewUser(){console.log(this.state);this.setState(prevState=>({addUser:true}));}/**************************/render(){if(this.state.error){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"mb-0\",style:{paddingLeft:20}},\"Users\"))))),/*#__PURE__*/React.createElement(\"h1\",{className:\"text-danger mb-0\",style:{textAlign:\"center\"}},\" \",this.state.error),/*#__PURE__*/React.createElement(\"br\",null))))));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"mb-0\",style:{paddingLeft:20,paddingRight:20}},\"Users\"),/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-green text-white rounded-circle\",type:\"button\",onClick:e=>this.NewUser()},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\"})))),/*#__PURE__*/React.createElement(Col,null,this.renderButtons()))),/*#__PURE__*/React.createElement(Table,{bordered:true,className:\"align-items-center table-flush\",hover:true},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col \",style:{textAlign:\"center\"}},\"ID\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Username\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Email\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Role\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Role ID\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},\"Last Login\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}}))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.addUser&&/*#__PURE__*/React.createElement(\"renderNewUser\",null),this.state[\"table_data\"].map(this.renderArray))),/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"row justify-content-center\"},this.renderButtons()))))))));}}}export default Users_table;","map":{"version":3,"sources":["/home/filipe/Desktop/PEI/git/PEI/react_frontend/src/views/examples/Users_table.js"],"names":["React","Redirect","Badge","Card","CardHeader","Media","Table","Container","Row","Button","Col","Progress","DropdownToggle","DropdownMenu","DropdownItem","ButtonDropdown","Header","Maps","fix_date","st","date","split","year","time","Users_table","Component","constructor","props","redirect_to_details","index","getData","console","log","state","fetch","response1","json","result1","length","edit_mode","i","push","setState","prevState","error","table_data","renderArray","value","textAlign","e","setEditMode","handleClick","id","preventDefault","curent_page","timer","toggleDrop1","bind","changeValueDrop1","NewUser","renderNewUser","table_buttons","num_accidents","num_to_show","dropDown1Value","dropdownIndex","dropDown1Open","addUser","renderButtons","Buttons","Math","ceil","parseInt","componentDidMount","setInterval","componentWillUnmount","clearInterval","a","currentTarget","textContent","render","paddingLeft","paddingRight","map"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport \"../../assets/css/custom.css\"\n\n// reactstrap components\nimport {\n    Badge,\n    Card,\n    CardHeader,\n    Media,\n    Table,\n    Container,\n    Row,\n    Button, Col, Progress, DropdownToggle, DropdownMenu, DropdownItem, ButtonDropdown,\n} from \"reactstrap\";\n// core components\nimport Header from \"../../components/Headers/Header.js\";\nimport Maps from \"./Maps_Component.js\"\n\n\nfunction fix_date(st) {\n  let date = st.split('T');\n  let year = date[0];\n  let time  = date[1].split('.')[0];\n  return [year,time];\n}\n\nclass Users_table extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.timer = null\n\n    this.toggleDrop1 = this.toggleDrop1.bind(this);\n    this.changeValueDrop1 = this.changeValueDrop1.bind(this);\n    this.setEditMode=this.setEditMode.bind(this)\n    this.NewUser = this.NewUser.bind(this)\n    this.renderNewUser = this.renderNewUser.bind(this)\n\n    this.state = {\n      table_data : [],\n      table_buttons:[],\n      curent_page:1,\n      num_accidents:0,\n      num_to_show:10,\n      dropDown1Value: \"Date/Hour\",\n      dropdownIndex:\"between\",\n      dropDown1Open: false,\n      error:false,\n      edit_mode:[],\n      addUser:false\n    }\n  }\n\n  redirect_to_details = (index) => {\n    return <Redirect to={`/admin/accident_details/${index}`}/>\n  }\n\n  getData = async () => {\n      console.log(this.state)\n      try {\n           /*const response = await fetch(\n              `/num_accidents?quantity=${this.state.dropdownIndex2}`\n          );\n\n          const result = await response.json();\n          this.setState(\n              prevState => (\n                  {\n                      num_accidents: result\n                  }\n              )\n          );*/\n          const response1 = await fetch(\n              `/all_users`\n          );\n\n          const result1 = await response1.json();\n         if(result1.length===0){\n             if (this.state.edit_mode.length==0){\n                 for (let i = 0; i < result1.length; i++) {\n                      this.state.edit_mode.push(false)\n                    }\n             }\n              this.setState(\n             prevState => (\n                 {\n                     error: \"No users to Show\"\n                 }\n             )\n         );}\n          else\n              this.setState(\n                  prevState => (\n                      {\n                          table_data: result1,\n                          error: false\n                      }\n                  )\n              );\n      }\n    catch(e){\n         this.setState(\n             prevState => (\n                 {\n                     error: \"No users to Show\"\n                 }\n             )\n         );\n     }\n  }\n\n  renderNewUser(){\n    return(\n      <tr  >\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n            teste\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n\n        </th>\n      </tr>\n    )\n  }\n\n\n\n  renderArray = (value,index) => {\n    return(\n      <tr key={index} >\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"id\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"Username\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"email\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"role\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"role_type\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"last_login\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n            {this.state.edit_mode[index] && (\n                <Button\n                className=\"icon icon-shape bg-success text-white rounded-circle\"\n                type=\"button\"\n                onClick={(e)=>this.setEditMode(index,false)}\n            >\n               <i className=\"fas fa-check\"></i>\n           </Button>\n            ) }\n           <Button\n                className=\"icon icon-shape bg-yellow text-white rounded-circle\"\n                type=\"button\"\n                onClick={(e)=>this.setEditMode(index,true)}\n            >\n               <i className=\"fas fa-pencil-alt\"></i>\n           </Button>\n           <Button\n                className=\"icon icon-shape bg-danger text-white rounded-circle\"\n            >\n             <i className=\"fas fa-trash\"/>\n           </Button>\n        </th>\n      </tr>\n    )\n  }\n\n  renderButtons(){\n     if(this.state.num_accidents > this.state.num_to_show){\n      const Buttons = []\n      if(this.state.curent_page >1)\n        Buttons.push(\n            <li className=\"page-item\">\n                <a className=\"page-link\" onClick={(e)=>this.handleClick(e,this.state.curent_page-1)}>\n                    <i className=\"fas fa-angle-left\"/>\n                </a>\n            </li>\n        )\n      for (let i = 1; i < Math.ceil(this.state.num_accidents/this.state.num_to_show)+1; i++) {\n        if(i==this.state.curent_page){\n          Buttons.push(<li className=\"page-item active\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,`${i}`)}>{i}</a></li>)\n        }\n        else{\n          Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,`${i}`)}>{i}</a></li>)\n        }\n      }\n      if(this.state.curent_page < Math.ceil(this.state.num_accidents/this.state.num_to_show) )\n        Buttons.push(\n            <li className=\"page-item\">\n                <a className=\"page-link\" onClick={(e)=>this.handleClick(e,parseInt(this.state.curent_page)+1)}>\n                    <i className=\"fas fa-angle-right\"/>\n                </a>\n            </li>\n        )\n\n      return(\n              <div className=\"row justify-content-center\">\n                 <nav aria-label=\"Page navigation example\">\n                     <ul className=\"pagination\">\n                        {Buttons}\n                     </ul>\n                 </nav>\n              </div>\n      )}\n      else{\n          return\n      }\n  }\n\n  componentDidMount() {\n    //this.getData(this.state.curent_page);\n    this.getData();\n    this.timer = setInterval(() => this.getData(), 10000)\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.timer)\n    this.timer = null\n  }\n\n  handleClick = (e,id) => {\n    e.preventDefault();\n    this.state.curent_page=id\n    this.getData();\n  };\n\n /* DropDown functions */\n  toggleDrop1() {\n    this.setState({dropDown1Open: !this.state.dropDown1Open});\n  }\n\n  changeValueDrop1(e,id) {\n\n      const a = [\"\",\"between\",\"cars\",\"people\",\"injured\",\"severity\",\"status\"]\n      this.state.dropDown1Value= e.currentTarget.textContent\n      this.state.dropdownIndex= `${a[id]}`\n      this.getData(id)\n  }\n  setEditMode(index,value){\n      this.state.edit_mode[parseInt(index)]=value\n      this.setState(\n                  prevState => (\n                      {\n\n                      }\n                  )\n              );\n  }\n  NewUser(){\n      console.log(this.state)\n      this.setState(\n                  prevState => (\n                      {\n                        addUser:true\n                      }\n                  )\n              );\n  }\n\n\n  /**************************/\n\n  render() {\n      if(this.state.error ){\n        return (\n         <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          {/* Dark table */}\n          <Row className=\"mt-5\">\n            <div className=\"col\">\n              <Card className=\"shadow\">\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col>\n                      <div className=\"row ml\">\n                        <h1 className=\"mb-0\" style={{ paddingLeft: 20}} >Users</h1>\n                      </div>\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <h1 className=\"text-danger mb-0\" style={{textAlign:\"center\"}}> {this.state.error}</h1>\n                  <br/>\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>);\n    }else{\n    return (\n      <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          {/* Dark table */}\n          <Row className=\"mt-5\">\n            <div className=\"col\">\n              <Card className=\"shadow\">\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col>\n                      <div className=\"row ml\">\n                        <h1 className=\"mb-0\" style={{ paddingLeft: 20, paddingRight: 20}} >Users</h1>\n                        <Button\n                            className=\"icon icon-shape bg-green text-white rounded-circle\"\n                            type=\"button\"\n                            onClick={(e)=>this.NewUser()}\n                        >\n                         <i className=\"fas fa-plus\"/>\n                       </Button>\n                      </div>\n                    </Col>\n                    <Col >\n                      {this.renderButtons()}\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <Table bordered\n                  className=\"align-items-center table-flush\"\n                  hover\n                >\n                  <thead className=\"thead-light\">\n                    <tr >\n                      <th scope=\"col \" style={{textAlign:\"center\"}}>ID</th>\n                      <th scope=\"col\"  style={{textAlign:\"center\"}}>Username</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>Email</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>Role</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>Role ID</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>Last Login</th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}   />\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.addUser && <renderNewUser/>}\n                    {this.state[\"table_data\"].map(this.renderArray)}\n                  </tbody>\n                </Table>\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col className=\"row justify-content-center\">\n                      {this.renderButtons()}\n                    </Col>\n                  </Row>\n                </CardHeader>\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>\n    );\n  }}\n}\n\nexport default Users_table;\n"]},"metadata":{},"sourceType":"module"}