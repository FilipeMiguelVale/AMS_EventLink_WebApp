{"ast":null,"code":"import _regeneratorRuntime from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React from\"react\";import{compose,withProps}from\"recompose\";// reactstrap components\nimport{Card,Container,Row}from\"reactstrap\";// core components\nimport Header from\"../../components/Headers/Header.js\";import{withScriptjs,withGoogleMap,GoogleMap,Marker}from\"react-google-maps\";const MyMapComponent=compose(withProps({googleMapURL:\"https://maps.googleapis.com/maps/api/js?key=AIzaSyD4aWR3SBGaa1oB0CuDf2vptnJfSMSguZU\",loadingElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\"}}),containerElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:\"600px\"}}),mapElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100%\"}})}),withScriptjs,withGoogleMap)(props=>/*#__PURE__*/React.createElement(GoogleMap,{defaultZoom:8,defaultCenter:{lat:-34.397,lng:150.644}},props.isMarkerShown&&/*#__PURE__*/React.createElement(Marker,{position:{lat:-34.397,lng:150.644},onClick:props.onMarkerClick})));class Heat_Maps_Page extends React.PureComponent{constructor(...args){super(...args);this.state={markers:[],initial_position:{lat:0,lng:0}};this.delayedShowMarker=()=>{setTimeout(()=>{this.setState({isMarkerShown:true});},3000);};this.handleMarkerClick=()=>{this.setState({isMarkerShown:false});this.delayedShowMarker();};this.getAllLocations=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result,all_locations,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/list_accidents\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;all_locations=[];for(i=0;i<result.length;i++){all_locations.push({lat:result[i][\"location\"][\"lat\"],lng:result[i][\"location\"][\"lng\"],id:result[i][\"id\"]});}return _context.abrupt(\"return\",all_locations);case 9:case\"end\":return _context.stop();}},_callee);}));this.get_my_location=function(){if(navigator.geolocation){return new Promise((resolve,reject)=>navigator.geolocation.getCurrentPosition(resolve,reject));}else{return new Promise(resolve=>resolve({}));}};}componentDidMount(){Promise.all([this.get_my_location(),this.getAllLocations()]).then(values=>{this.setState(prevState=>({markers:values[1],initial_position:{lat:values[0].coords.latitude,lng:values[0].coords.longitude}}));});}render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"shadow border-0\"},/*#__PURE__*/React.createElement(MyMapComponent,{isMarkerShown:this.state.isMarkerShown,onMarkerClick:this.handleMarkerClick}))))));}}export default Heat_Maps_Page;","map":{"version":3,"sources":["/home/filipe/Desktop/PEI/git/PEI/react_frontend/src/views/examples/Heat_Maps_Page.js"],"names":["React","compose","withProps","Card","Container","Row","Header","withScriptjs","withGoogleMap","GoogleMap","Marker","MyMapComponent","googleMapURL","loadingElement","height","containerElement","mapElement","props","lat","lng","isMarkerShown","onMarkerClick","Heat_Maps_Page","PureComponent","state","markers","initial_position","delayedShowMarker","setTimeout","setState","handleMarkerClick","getAllLocations","fetch","response","json","result","all_locations","i","length","push","id","get_my_location","navigator","geolocation","Promise","resolve","reject","getCurrentPosition","componentDidMount","all","then","values","prevState","coords","latitude","longitude","render"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\n\nimport React from \"react\"\nimport { compose, withProps } from \"recompose\"\n// reactstrap components\nimport {Card, Container, Row} from \"reactstrap\";\n// core components\nimport Header from \"../../components/Headers/Header.js\";\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\"\n\nconst MyMapComponent = compose(\n  withProps({\n    googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyD4aWR3SBGaa1oB0CuDf2vptnJfSMSguZU\",\n    loadingElement: <div style={{ height: `100%` }} />,\n    containerElement: <div style={{ height: `600px` }} />,\n    mapElement: <div style={{ height: `100%` }} />,\n  }),\n  withScriptjs,\n  withGoogleMap\n)((props) =>\n  <GoogleMap\n    defaultZoom={8}\n    defaultCenter={{ lat: -34.397, lng: 150.644 }}\n  >\n    {props.isMarkerShown && <Marker position={{ lat: -34.397, lng: 150.644 }} onClick={props.onMarkerClick} />}\n  </GoogleMap>\n)\n\n\nclass Heat_Maps_Page extends React.PureComponent {\n    state = {\n      markers: [],\n      initial_position: {\n        lat: 0,\n        lng: 0\n      }\n    }\n\n  componentDidMount() {\n\n    Promise.all([this.get_my_location(),this.getAllLocations()]).then((\n      (values =>\n        {\n          this.setState(prevState => (\n            {\n              markers: values[1],\n              initial_position:{\n                lat: values[0].coords.latitude,\n                lng: values[0].coords.longitude\n              }\n            }))\n        }\n      )))\n  }\n\n  delayedShowMarker = () => {\n    setTimeout(() => {\n      this.setState({ isMarkerShown: true })\n    }, 3000)\n  }\n\n  handleMarkerClick = () => {\n    this.setState({ isMarkerShown: false })\n    this.delayedShowMarker()\n  }\n\n  getAllLocations = async () => {\n\n    let response = await fetch(\n      `/list_accidents`);\n    let result = await response.json();\n    let all_locations = [];\n    for (let i=0; i < result.length; i++){\n      all_locations.push(\n        {\n          lat: result[i][\"location\"][\"lat\"],\n          lng: result[i][\"location\"][\"lng\"],\n          id: result[i][\"id\"]\n        }\n      )\n    }\n    return all_locations;\n  }\n\n  get_my_location = function () {\n    if (navigator.geolocation) {\n      return new Promise(\n        (resolve, reject) => navigator.geolocation.getCurrentPosition(resolve, reject)\n      )\n    } else {\n      return new Promise(\n        resolve => resolve({})\n      )\n    }\n  }\n\n  render(){\n    return (\n      <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          <Row>\n            <div className=\"col\">\n              <Card className=\"shadow border-0\">\n                <MyMapComponent\n                  isMarkerShown={this.state.isMarkerShown}\n                  onMarkerClick={this.handleMarkerClick}\n                />\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>\n    );\n  }\n}\nexport default Heat_Maps_Page;"]},"metadata":{},"sourceType":"module"}