{"ast":null,"code":"import _regeneratorRuntime from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React from\"react\";import{Redirect}from\"react-router-dom\";import\"../../assets/css/custom.css\";// reactstrap components\nimport{Badge,Card,CardHeader,Media,Table,Container,Row,Button,Col,Progress,DropdownToggle,DropdownMenu,DropdownItem,ButtonDropdown}from\"reactstrap\";// core components\nimport Header from\"../../components/Headers/Header.js\";import Maps from\"./Maps_Component.js\";function fix_date(st){let date=st.split('T');let year=date[0];let time=date[1].split('.')[0];return[year,time];}class Accidents extends React.Component{constructor(props){var _this;super(props);_this=this;this.redirect_to_details=index=>{return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/accident_details/\".concat(index)});};this.getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response,result,response1,result1;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/num_accidents\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;_this.setState(prevState=>({num_accidents:result}));_context.next=10;return fetch(\"/range_accidents?id=\".concat(id,\"&filter=\").concat(_this.state.dropdownIndex,\"&quantity=\").concat(_this.state.dropdownIndex2,\"&order=\").concat(_this.state.dropdownIndex3));case 10:response1=_context.sent;_context.next=13;return response1.json();case 13:result1=_context.sent;_this.setState(prevState=>({table_data:result1,error:false}));_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);_this.setState(prevState=>({error:\"No accidents do Show\"}));case 20:case\"end\":return _context.stop();}},_callee,null,[[0,17]]);}));return function(_x){return _ref.apply(this,arguments);};}();this.setStatus=value=>{if(value===2){return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-lime\"}));}else if(value===1){return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-yellow\"}));}else{return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-red\"}));}};this.renderArray=(value,index)=>{return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},fix_date(value[\"date\"])[0],/*#__PURE__*/React.createElement(\"br\",null),fix_date(value[\"date\"])[1])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",width:\"5%\"},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"location\"][\"address\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"n_cars_involved\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"n_people\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"n_people_injured\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mr-2\"},value[\"damage\"]),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Progress,{max:\"100\",value:value[\"damage\"],barClassName:this.getBarColor(value[\"damage\"])}))),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},this.setStatus(value[\"status\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-transparent border-default text-white rounded-circle\",href:\"/#admin/accident_details/\".concat(value[\"id\"]),onClick:this.redirect_to_details.bind(this,value['id'])},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-ellipsis-h\"}))));};this.handleClick=(e,id)=>{console.log(id);e.preventDefault();this.state.curent_page=id;this.getData(id);};this.getSortData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var response,result,response1,result1;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/num_accidents\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;_this.setState(prevState=>({num_accidents:result}));response1=[];if(!(id==1)){_context2.next=15;break;}_context2.next=12;return fetch(\"/range_accidents?id=\".concat(_this.state.curent_page,\"&filter=between\"));case 12:response1=_context2.sent;_context2.next=42;break;case 15:if(!(id==2)){_context2.next=21;break;}_context2.next=18;return fetch(\"/range_accidents?id=\".concat(_this.state.curent_page,\"&filter=cars\"));case 18:response1=_context2.sent;_context2.next=42;break;case 21:if(!(id==3)){_context2.next=27;break;}_context2.next=24;return fetch(\"/range_accidents?id=\".concat(_this.state.curent_page,\"&filter=people\"));case 24:response1=_context2.sent;_context2.next=42;break;case 27:if(!(id==4)){_context2.next=33;break;}_context2.next=30;return fetch(\"/range_accidents?id=\".concat(_this.state.curent_page,\"&filter=injured\"));case 30:response1=_context2.sent;_context2.next=42;break;case 33:if(!(id==5)){_context2.next=39;break;}_context2.next=36;return fetch(\"/range_accidents?id=\".concat(_this.state.curent_page,\"&filter=severity\"));case 36:response1=_context2.sent;_context2.next=42;break;case 39:_context2.next=41;return fetch(\"/range_accidents?id=\".concat(_this.state.curent_page,\"&filter=status\"));case 41:response1=_context2.sent;case 42:_context2.next=44;return response1.json();case 44:result1=_context2.sent;_this.setState(prevState=>({table_data:result1,error:false}));_context2.next=51;break;case 48:_context2.prev=48;_context2.t0=_context2[\"catch\"](0);_this.setState(prevState=>({error:\"No accidents do Show\"}));case 51:case\"end\":return _context2.stop();}},_callee2,null,[[0,48]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();this.timer=null;this.toggleDrop1=this.toggleDrop1.bind(this);this.changeValueDrop1=this.changeValueDrop1.bind(this);this.toggleDrop2=this.toggleDrop2.bind(this);this.changeValueDrop2=this.changeValueDrop2.bind(this);this.toggleDrop3=this.toggleDrop3.bind(this);this.changeValueDrop3=this.changeValueDrop3.bind(this);this.state={table_data:[],table_buttons:[],curent_page:1,num_accidents:0,num_to_show:10,dropDown1Value:\"Date/Hour\",dropdownIndex:\"between\",dropdownIndex2:\"Today\",dropdownIndex3:\"Ascending\",dropDown1Open:false,dropDown2Value:\"From\",dropDown2Open:false,dropDown3Value:\"Order by\",dropDown3Open:false,error:false};}getBarColor(damage){if(damage<30){return\"bg-gradient-success\";}else if(damage<45){return\"bg-gradient-info\";}else if(damage<75){return\"bg-gradient-warning\";}else{return\"bg-gradient-danger\";}}renderButtons(){if(this.state.num_accidents>this.state.num_to_show){const Buttons=[];if(this.state.curent_page>1)Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,this.state.curent_page-1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-left\"}))));for(let i=1;i<Math.ceil(this.state.num_accidents/this.state.num_to_show)+1;i++){if(i==this.state.curent_page){Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item active\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,\"\".concat(i))},i)));}else{Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,\"\".concat(i))},i)));}}if(this.state.curent_page<Math.ceil(this.state.num_accidents/this.state.num_to_show))Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,parseInt(this.state.curent_page)+1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-right\"}))));return/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"nav\",{\"aria-label\":\"Page navigation example\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"pagination\"},Buttons)));}else{return;}}componentDidMount(){this.getData(this.state.curent_page);this.timer=setInterval(()=>this.getData(this.state.curent_page),10000);}componentWillUnmount(){clearInterval(this.timer);this.timer=null;}/* DropDown functions */toggleDrop1(){this.setState({dropDown1Open:!this.state.dropDown1Open});}toggleDrop2(){this.setState({dropDown2Open:!this.state.dropDown2Open});}toggleDrop3(){this.setState({dropDown3Open:!this.state.dropDown3Open});}changeValueDrop1(e,id){const a=[\"\",\"between\",\"cars\",\"people\",\"injured\",\"severity\",\"status\"];console.log(a[id]);this.state.dropDown1Value=e.currentTarget.textContent;this.state.dropdownIndex=\"\".concat(a[id]);this.getData(this.state.curent_page);}changeValueDrop2(e,id){this.setState({dropDown2Value:e.currentTarget.textContent});console.log(id);//this.setState({dropDown2Value: e.currentTarget.textContent,dropdownIndex2:`${id}`})\n}changeValueDrop3(e){this.setState({dropDown3Value:e.currentTarget.textContent});}/**************************/render(){if(this.state.error){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"bg-default shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-white mb-0\",style:{paddingLeft:20}},\"Accidents\"))))),/*#__PURE__*/React.createElement(\"h1\",{className:\"text-white mb-0\",style:{textAlign:\"center\"}},\" \",this.state.error),/*#__PURE__*/React.createElement(\"br\",null))))));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"bg-default shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-white mb-0\",style:{paddingLeft:20}},\"Accidents\"))),/*#__PURE__*/React.createElement(Col,null,this.renderButtons()),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"mr-2 mt-2 text-white\"},\"Sort by: \"),/*#__PURE__*/React.createElement(ButtonDropdown,{isOpen:this.state.dropDown1Open,toggle:this.toggleDrop1},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true},this.state.dropDown1Value),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop1(e,1)},\"Date/Hour\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop1(e,2)},\"N\\xBA cars\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop1(e,3)},\"N\\xBA people\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop1(e,4)},\"N\\xBA injured\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop1(e,5)},\"Severity\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop1(e,6)},\"Status\"))),/*#__PURE__*/React.createElement(ButtonDropdown,{className:\"mr-2 ml-2\",isOpen:this.state.dropDown2Open,toggle:this.toggleDrop2},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true},this.state.dropDown2Value),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop2(e)},\"Today\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop2(e)},\"Yesterday\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop2(e)},\"Last Month\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop2(e)},\"All\"))),/*#__PURE__*/React.createElement(ButtonDropdown,{isOpen:this.state.dropDown3Open,toggle:this.toggleDrop3},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true},this.state.dropDown3Value),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop3(e)},\"Ascending\"),/*#__PURE__*/React.createElement(DropdownItem,{onClick:e=>this.changeValueDrop3(e)},\"Descending\"))))))),/*#__PURE__*/React.createElement(Table,{bordered:true,className:\"align-items-center table-dark table-responsive\",hover:true},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col \",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{align:\"center\",className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-calendar-alt\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Date/Hour\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-map-marked-alt\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Location\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-car\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"N\\xBA cars\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-users\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"N\\xBA people\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-user-injured\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"N\\xBAinjured\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-exclamation-triangle\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Severity\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-flag\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Status\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}}))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state[\"table_data\"].map(this.renderArray))),/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"row justify-content-center\"},this.renderButtons()))))))));}}}export default Accidents;","map":{"version":3,"sources":["/home/filipe/Desktop/PEI/git/PEI/react_frontend/src/views/examples/Accidents.js"],"names":["React","Redirect","Badge","Card","CardHeader","Media","Table","Container","Row","Button","Col","Progress","DropdownToggle","DropdownMenu","DropdownItem","ButtonDropdown","Header","Maps","fix_date","st","date","split","year","time","Accidents","Component","constructor","props","redirect_to_details","index","getData","id","fetch","response","json","result","setState","prevState","num_accidents","state","dropdownIndex","dropdownIndex2","dropdownIndex3","response1","result1","table_data","error","setStatus","value","renderArray","textAlign","getBarColor","bind","handleClick","e","console","log","preventDefault","curent_page","getSortData","timer","toggleDrop1","changeValueDrop1","toggleDrop2","changeValueDrop2","toggleDrop3","changeValueDrop3","table_buttons","num_to_show","dropDown1Value","dropDown1Open","dropDown2Value","dropDown2Open","dropDown3Value","dropDown3Open","damage","renderButtons","Buttons","push","i","Math","ceil","parseInt","componentDidMount","setInterval","componentWillUnmount","clearInterval","a","currentTarget","textContent","render","paddingLeft","map"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport \"../../assets/css/custom.css\"\n\n// reactstrap components\nimport {\n    Badge,\n    Card,\n    CardHeader,\n    Media,\n    Table,\n    Container,\n    Row,\n    Button, Col, Progress, DropdownToggle, DropdownMenu, DropdownItem, ButtonDropdown,\n} from \"reactstrap\";\n// core components\nimport Header from \"../../components/Headers/Header.js\";\nimport Maps from \"./Maps_Component.js\"\n\n\nfunction fix_date(st) {\n  let date = st.split('T');\n  let year = date[0];\n  let time  = date[1].split('.')[0];\n  return [year,time];\n}\n\nclass Accidents extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.timer = null\n\n    this.toggleDrop1 = this.toggleDrop1.bind(this);\n    this.changeValueDrop1 = this.changeValueDrop1.bind(this);\n\n    this.toggleDrop2 = this.toggleDrop2.bind(this);\n    this.changeValueDrop2 = this.changeValueDrop2.bind(this);\n\n    this.toggleDrop3 = this.toggleDrop3.bind(this);\n    this.changeValueDrop3 = this.changeValueDrop3.bind(this);\n\n    this.state = {\n      table_data : [],\n      table_buttons:[],\n      curent_page:1,\n      num_accidents:0,\n      num_to_show:10,\n      dropDown1Value: \"Date/Hour\",\n      dropdownIndex:\"between\",\n      dropdownIndex2:\"Today\",\n      dropdownIndex3:\"Ascending\",\n      dropDown1Open: false,\n      dropDown2Value: \"From\",\n      dropDown2Open: false,\n      dropDown3Value: \"Order by\",\n      dropDown3Open: false,\n      error:false\n    }\n  }\n\n  redirect_to_details = (index) => {\n    return <Redirect to={`/admin/accident_details/${index}`}/>\n  }\n\n  getData = async (id) => {\n      try {\n          const response = await fetch(\n              `/num_accidents`\n          );\n\n          const result = await response.json();\n          this.setState(\n              prevState => (\n                  {\n                      num_accidents: result\n                  }\n              )\n          );\n          const response1 = await fetch(\n              `/range_accidents?id=${id}&filter=${this.state.dropdownIndex}&quantity=${this.state.dropdownIndex2}&order=${this.state.dropdownIndex3}`\n          );\n\n          const result1 = await response1.json();\n          this.setState(\n              prevState => (\n                  {\n                      table_data: result1,\n                      error: false\n                  }\n              )\n          );\n      }\n    catch(e){\n         this.setState(\n             prevState => (\n                 {\n                     error: \"No accidents do Show\"\n                 }\n             )\n         );\n     }\n  }\n\n  /* Sets status colors\n  *     0 -> red (this accident was not answered yet)\n  *     1 -> yellow (emergency services are on their way)\n  *     2 -> green (accident resolved)\n  */\n  setStatus = (value) => {\n      if (value === 2) {\n          return (\n              <Badge color=\"\" className=\"badge-dot badge-lg\">\n                <i className=\"bg-lime\" />\n              </Badge>\n          )\n      }\n      else if (value === 1){\n          return (\n              <Badge color=\"\" className=\"badge-dot badge-lg\">\n                <i className=\"bg-yellow\" />\n              </Badge>\n          )\n      }\n      else {\n          return (\n              <Badge color=\"\" className=\"badge-dot badge-lg\">\n                <i className=\"bg-red\" />\n              </Badge>\n          )\n      }\n  }\n  getBarColor(damage){\n      if(damage<30){return\"bg-gradient-success\"\n      }else if(damage < 45){return\"bg-gradient-info\"\n      }else if(damage < 75){return\"bg-gradient-warning\"\n      }else{return\"bg-gradient-danger\"}\n  }\n\n  renderArray = (value,index) => {\n    return(\n      <tr key={index} >\n        <th scope=\"row\">\n          <span className=\"mb-0 text-sm\">\n            {fix_date(value[\"date\"])[0]}<br/>{fix_date(value[\"date\"])[1]}\n          </span>\n        </th>\n        <th scope=\"row\" width=\"5%\">\n          <span className=\"mb-0 text-sm\">\n            {value[\"location\"][\"address\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"n_cars_involved\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"n_people\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"n_people_injured\"]}\n          </span>\n        </th>\n       <th scope = \"row\" style={{textAlign:\"center\"}}>\n           <span className=\"mr-2\">{value[\"damage\"]}</span>\n           <div>\n               <Progress\n                  max=\"100\"\n                  value={value[\"damage\"]}\n                  barClassName={this.getBarColor(value[\"damage\"])}\n                />\n            </div>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n            {this.setStatus(value[\"status\"])}\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n            <Button\n                className=\"icon icon-shape bg-transparent border-default text-white rounded-circle\"\n                href={`/#admin/accident_details/${value[\"id\"]}`}\n                onClick={this.redirect_to_details.bind(this,value['id'])}\n            >\n              <i className=\"fas fa-ellipsis-h\"/>\n            </Button>\n        </th>\n      </tr>\n    )\n  }\n\n  renderButtons(){\n\n     if(this.state.num_accidents > this.state.num_to_show){\n      const Buttons = []\n      if(this.state.curent_page >1)\n        Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,this.state.curent_page-1)}><i\n                       className=\"fas fa-angle-left\"></i></a></li>)\n      for (let i = 1; i < Math.ceil(this.state.num_accidents/this.state.num_to_show)+1; i++) {\n        if(i==this.state.curent_page){\n          Buttons.push(<li className=\"page-item active\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,`${i}`)}>{i}</a></li>)\n        }\n        else{\n          Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,`${i}`)}>{i}</a></li>)\n        }\n      }\n      if(this.state.curent_page < Math.ceil(this.state.num_accidents/this.state.num_to_show) )\n        Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,parseInt(this.state.curent_page)+1)}><i\n                       className=\"fas fa-angle-right\"></i></a></li>)\n\n      return(\n              <div className=\"row justify-content-center\">\n                 <nav aria-label=\"Page navigation example\">\n                     <ul className=\"pagination\">\n                        {Buttons}\n                     </ul>\n                 </nav>\n              </div>\n      )}\n      else{\n          return\n      }\n  }\n\n  componentDidMount() {\n    this.getData(this.state.curent_page);\n    this.timer = setInterval(() => this.getData(this.state.curent_page), 10000)\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.timer)\n    this.timer = null\n  }\n\n  handleClick = (e,id) => {\n    console.log(id)\n    e.preventDefault();\n    this.state.curent_page=id\n    this.getData(id);\n  };\n\n /* DropDown functions */\n  toggleDrop1() {\n    this.setState({dropDown1Open: !this.state.dropDown1Open});\n  }\n\n  toggleDrop2() {\n      this.setState({dropDown2Open: !this.state.dropDown2Open});\n  }\n\n  toggleDrop3() {\n      this.setState({dropDown3Open: !this.state.dropDown3Open});\n  }\n\n  changeValueDrop1(e,id) {\n\n      const a = [\"\",\"between\",\"cars\",\"people\",\"injured\",\"severity\",\"status\"]\n      console.log(a[id])\n      this.state.dropDown1Value= e.currentTarget.textContent\n      this.state.dropdownIndex= `${a[id]}`\n      this.getData(this.state.curent_page)\n  }\n\n  changeValueDrop2(e,id) {\n      this.setState({dropDown2Value: e.currentTarget.textContent});\n      console.log(id)\n      //this.setState({dropDown2Value: e.currentTarget.textContent,dropdownIndex2:`${id}`})\n  }\n\n  changeValueDrop3(e) {\n      this.setState({dropDown3Value: e.currentTarget.textContent});\n  }\n\n  getSortData = async (id) => {\n     try {\n         const response = await fetch(\n             `/num_accidents`\n         );\n\n         const result = await response.json();\n         this.setState(\n             prevState => (\n                 {\n                     num_accidents: result\n                 }\n             )\n         );\n         const response1 = [];\n         if (id == 1) {\n             const response1 = await fetch(\n                 `/range_accidents?id=${this.state.curent_page}&filter=between`\n             );\n         } else if (id == 2) {\n             const response1 = await fetch(\n                 `/range_accidents?id=${this.state.curent_page}&filter=cars`\n             );\n         } else if (id == 3) {\n             const response1 = await fetch(\n                 `/range_accidents?id=${this.state.curent_page}&filter=people`\n             );\n         } else if (id == 4) {\n             const response1 = await fetch(\n                 `/range_accidents?id=${this.state.curent_page}&filter=injured`\n             );\n         } else if (id == 5) {\n             const response1 = await fetch(\n                 `/range_accidents?id=${this.state.curent_page}&filter=severity`\n             );\n         } else {\n             const response1 = await fetch(\n                 `/range_accidents?id=${this.state.curent_page}&filter=status`\n             )\n         }\n         const result1 = await response1.json();\n         this.setState(\n             prevState => (\n                 {\n                     table_data: result1,\n                     error:false\n                 }\n             )\n         );\n     }catch(e){\n         this.setState(\n             prevState => (\n                 {\n                     error: \"No accidents do Show\"\n                 }\n             )\n         );\n     }\n  }\n\n  /**************************/\n\n  render() {\n    if(this.state.error){\n        return (\n         <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          {/* Dark table */}\n          <Row className=\"mt-5\">\n            <div className=\"col\">\n              <Card className=\"bg-default shadow\">\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col>\n                      <div className=\"row ml\">\n                        <h1 className=\"text-white mb-0\" style={{ paddingLeft: 20}} >Accidents</h1>\n                      </div>\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <h1 className=\"text-white mb-0\" style={{textAlign:\"center\"}}> {this.state.error}</h1>\n                  <br/>\n              </Card>\n            </div>\n          </Row>\n        </Container>\n             </>);\n    }else{\n    return (\n      <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          {/* Dark table */}\n          <Row className=\"mt-5\">\n            <div className=\"col\">\n              <Card className=\"bg-default shadow\">\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col>\n                      <div className=\"row ml\">\n                        <h1 className=\"text-white mb-0\" style={{ paddingLeft: 20}} >Accidents</h1>\n                      </div>\n                    </Col>\n                    <Col >\n                      {this.renderButtons()}\n                    </Col>\n                    <Col>\n                      <div className=\"row justify-content-end\">\n                        <h4 className=\"mr-2 mt-2 text-white\">Sort by: </h4>\n                        <ButtonDropdown isOpen={this.state.dropDown1Open} toggle={this.toggleDrop1}>\n                          <DropdownToggle caret>\n                            {this.state.dropDown1Value}\n                          </DropdownToggle>\n                          <DropdownMenu right>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop1(e,1)}>Date/Hour</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop1(e,2)}>Nº cars</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop1(e,3)}>Nº people</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop1(e,4)}>Nº injured</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop1(e,5)}>Severity</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop1(e,6)}>Status</DropdownItem>\n                          </DropdownMenu>\n                        </ButtonDropdown>\n                        <ButtonDropdown className={\"mr-2 ml-2\"} isOpen={this.state.dropDown2Open} toggle={this.toggleDrop2}>\n                          <DropdownToggle caret>\n                            {this.state.dropDown2Value}\n                          </DropdownToggle>\n                          <DropdownMenu right>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop2(e)}>Today</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop2(e)}>Yesterday</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop2(e)}>Last Month</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop2(e)}>All</DropdownItem>\n                          </DropdownMenu>\n                        </ButtonDropdown>\n                        <ButtonDropdown isOpen={this.state.dropDown3Open} toggle={this.toggleDrop3}>\n                          <DropdownToggle caret>\n                            {this.state.dropDown3Value}\n                          </DropdownToggle>\n                          <DropdownMenu right>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop3(e)}>Ascending</DropdownItem>\n                            <DropdownItem onClick={(e)=>this.changeValueDrop3(e)}>Descending</DropdownItem>\n                          </DropdownMenu>\n                        </ButtonDropdown>\n                      </div>\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <Table bordered\n                  className=\"align-items-center table-dark table-responsive\"\n                  hover\n                >\n                  <thead className=\"thead-dark\">\n                    <tr >\n                      <th scope=\"col \" style={{textAlign:\"center\"}}>\n                       <div align=\"center\" className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                         <i className=\"fas fa-calendar-alt\"/>\n                       </div>\n                      <div >\n                         <span className=\"ml-1\">Date/Hour</span>\n                      </div>\n                      </th>\n                      <th scope=\"col\"  style={{textAlign:\"center\"}}>\n                       <div  className=\"icon icon-shape bg-transparent text-white rounded-circle\" >\n                         <i  className=\"fas fa-map-marked-alt\"/>\n                       </div>\n                       <div >\n                         <span className=\"ml-1\">Location</span>\n                       </div>\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                         <i className=\"fas fa-car\"/>\n                       </div>\n                       <div>\n                         <span className=\"ml-1\">Nº cars</span>\n                       </div>\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                         <i className=\"fas fa-users\"/>\n                       </div>\n                      <div>\n                         <span className=\"ml-1\">Nº people</span>\n                       </div>\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>\n                        <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                          <i className=\"fas fa-user-injured\"/>\n                       </div>\n                      <div>\n                       <span className=\"ml-1\">Nºinjured</span>\n                      </div>\n                      </th>\n                      <th scope=\"col\"style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                         <i className=\"fas fa-exclamation-triangle\"/>\n                       </div>\n                      <div>\n                       <span className=\"ml-1\">Severity</span>\n                      </div>\n                      </th>\n                      <th scope=\"col\"style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                         <i className=\"fas fa-flag\"/>\n                       </div>\n                      <div>\n                       <span className=\"ml-1\">Status</span>\n                      </div>\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}   />\n\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state[\"table_data\"].map(this.renderArray)}\n                  </tbody>\n                </Table>\n                <CardHeader className=\"bg-transparent border-0\">\n                  <Row >\n                    <Col className=\"row justify-content-center\">\n                      {this.renderButtons()}\n                    </Col>\n                  </Row>\n                </CardHeader>\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>\n    );\n  }}\n}\n\nexport default Accidents;\n"]},"metadata":{},"sourceType":"module"}