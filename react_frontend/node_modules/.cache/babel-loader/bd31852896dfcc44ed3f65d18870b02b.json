{"ast":null,"code":"import _regeneratorRuntime from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filipe/Desktop/PEI/git/PEI/react_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React from\"react\";import{Redirect}from\"react-router-dom\";import\"../../assets/css/custom.css\";// reactstrap components\nimport{Badge,Card,CardHeader,Media,Table,Container,Row,Button,Col,Progress}from\"reactstrap\";// core components\nimport Header from\"../../components/Headers/Header.js\";import Maps from\"./Maps_Component.js\";function fix_date(st){let date=st.split('T');let year=date[0];let time=date[1].split('.')[0];return[year,time];}class Tables extends React.Component{constructor(props){var _this;super(props);_this=this;this.redirect_to_details=index=>{return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/accident_details/\".concat(index)});};this.getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response,result,response1,result1;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/num_accidents\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;_this.setState(prevState=>({num_accidents:result}));_context.next=9;return fetch(\"/range_accidents/\".concat(id));case 9:response1=_context.sent;_context.next=12;return response1.json();case 12:result1=_context.sent;_this.setState(prevState=>({table_data:result1}));case 14:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();this.setStatus=value=>{if(value===2){return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-lime\"}));}else if(value===1){return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-yellow\"}));}else{return/*#__PURE__*/React.createElement(Badge,{color:\"\",className:\"badge-dot badge-lg\"},/*#__PURE__*/React.createElement(\"i\",{className:\"bg-red\"}));}};this.renderArray=(value,index)=>{return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},fix_date(value[\"date\"])[0],/*#__PURE__*/React.createElement(\"br\",null),fix_date(value[\"date\"])[1])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",width:\"5%\"},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"location\"][\"address\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"n_cars_involved\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"n_people\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mb-0 text-sm\"},value[\"n_people_injured\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"mr-2\"},value[\"damage\"]),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Progress,{max:\"100\",value:value[\"damage\"],barClassName:this.getBarColor(value[\"damage\"])}))),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},this.setStatus(value[\"status\"])),/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(Button,{className:\"icon icon-shape bg-transparent border-default text-white rounded-circle\",href:\"/#admin/accident_details/\".concat(value[\"id\"]),onClick:this.redirect_to_details.bind(this,value['id'])},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-ellipsis-h\"}))));};this.handleClick=(e,id)=>{e.preventDefault();this.state.curent_page=id;this.getData(id);};this.state={table_data:[],table_buttons:[],curent_page:1,num_accidents:0,num_to_show:10};}getBarColor(damage){if(damage<30){return\"bg-gradient-success\";}else if(damage<40){return\"bg-gradient-info\";}else if(damage<75){return\"bg-gradient-warning\";}else{return\"bg-gradient-danger\";}}renderButtons(){if(this.state.num_accidents>this.state.num_to_show){const Buttons=[];if(this.state.curent_page>1)Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,this.state.curent_page-1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-left\"}))));for(let i=1;i<Math.ceil(this.state.num_accidents/this.state.num_to_show)+1;i++){Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,\"\".concat(i))},i)));}if(this.state.curent_page<Math.ceil(this.state.num_accidents/this.state.num_to_show))Buttons.push(/*#__PURE__*/React.createElement(\"li\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"a\",{className:\"page-link\",onClick:e=>this.handleClick(e,this.state.curent_page+1)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-right\"}))));return/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"nav\",{\"aria-label\":\"Page navigation example\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"pagination\"},Buttons)));}else{return;}}componentDidMount(){this.getData(1);}render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{className:\"mt--7\",fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(Card,{className:\"bg-default shadow\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-white mb-0\",style:{paddingLeft:20}},\"Accidents\"))),/*#__PURE__*/React.createElement(Col,null,this.renderButtons()),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\",align:\"left\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary dropdown-toggle\",type:\"button\",id:\"dropdownMenuButton\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},\"Sort by\"),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton\"},/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"Date/Hour\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"N\\xBA cars\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"N\\xBA people\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"N\\xBA injured\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"Severity\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"Status\"))))))),/*#__PURE__*/React.createElement(Table,{bordered:true,className:\"align-items-center table-dark table-responsive\",hover:true},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col-lg-3 \",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{align:\"center\",className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-calendar-alt\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Date/Hour\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col-lg-3\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-map-marked-alt\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Location\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-car\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"N\\xBA cars\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-users\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"N\\xBA people\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-user-injured\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"N\\xBAinjured\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-exclamation-triangle\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Severity\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon-shape bg-transparent text-white rounded-circle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-flag\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-1\"},\"Status\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",style:{textAlign:\"center\"}}))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state[\"table_data\"].map(this.renderArray))),/*#__PURE__*/React.createElement(CardHeader,{className:\"bg-transparent border-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row ml\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-white mb-0\",style:{paddingLeft:20}}))),/*#__PURE__*/React.createElement(Col,null,this.renderButtons()),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\",align:\"left\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary dropdown-toggle\",type:\"button\",id:\"dropdownMenuButton\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},\"Sort by\"),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton\"},/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"Date/Hour\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"N\\xBA cars\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"N\\xBA people\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"N\\xBA injured\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"Severity\"),/*#__PURE__*/React.createElement(\"a\",{className:\"dropdown-item\",href:\"#\"},\"Status\"))))))))))));}}export default Tables;","map":{"version":3,"sources":["/home/filipe/Desktop/PEI/git/PEI/react_frontend/src/views/examples/Accidents.js"],"names":["React","Redirect","Badge","Card","CardHeader","Media","Table","Container","Row","Button","Col","Progress","Header","Maps","fix_date","st","date","split","year","time","Tables","Component","constructor","props","redirect_to_details","index","getData","id","fetch","response","json","result","setState","prevState","num_accidents","response1","result1","table_data","setStatus","value","renderArray","textAlign","getBarColor","bind","handleClick","e","preventDefault","state","curent_page","table_buttons","num_to_show","damage","renderButtons","Buttons","push","i","Math","ceil","componentDidMount","render","paddingLeft","map"],"mappings":"yUAAA;;;;;;;;;;;;;;;;EAiBA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,MAAO,6BAAP,CAEA;AACA,OACIC,KADJ,CAEIC,IAFJ,CAGIC,UAHJ,CAIIC,KAJJ,CAKIC,KALJ,CAMIC,SANJ,CAOIC,GAPJ,CAQIC,MARJ,CAQYC,GARZ,CAQiBC,QARjB,KASO,YATP,CAUA;AACA,MAAOC,CAAAA,MAAP,KAAmB,oCAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,qBAAjB,CAGA,QAASC,CAAAA,QAAT,CAAkBC,EAAlB,CAAsB,CACpB,GAAIC,CAAAA,IAAI,CAAGD,EAAE,CAACE,KAAH,CAAS,GAAT,CAAX,CACA,GAAIC,CAAAA,IAAI,CAAGF,IAAI,CAAC,CAAD,CAAf,CACA,GAAIG,CAAAA,IAAI,CAAIH,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAZ,CACA,MAAO,CAACC,IAAD,CAAMC,IAAN,CAAP,CACD,CAED,KAAMC,CAAAA,MAAN,QAAqBpB,CAAAA,KAAK,CAACqB,SAAU,CAEnCC,WAAW,CAACC,KAAD,CAAQ,WACjB,MAAMA,KAAN,CADiB,iBAWnBC,mBAXmB,CAWIC,KAAD,EAAW,CAC/B,mBAAO,oBAAC,QAAD,EAAU,EAAE,mCAA6BA,KAA7B,CAAZ,EAAP,CACD,CAbkB,MAenBC,OAfmB,0FAeT,iBAAOC,EAAP,6KACgBC,CAAAA,KAAK,kBADrB,QACDC,QADC,qCAKaA,CAAAA,QAAQ,CAACC,IAAT,EALb,QAKFC,MALE,eAMR,KAAI,CAACC,QAAL,CACEC,SAAS,GACP,CACEC,aAAa,CAAGH,MADlB,CADO,CADX,EANQ,sBAagBH,CAAAA,KAAK,4BACLD,EADK,EAbrB,QAaFQ,SAbE,sCAiBcA,CAAAA,SAAS,CAACL,IAAV,EAjBd,SAiBFM,OAjBE,eAkBR,KAAI,CAACJ,QAAL,CACEC,SAAS,GACP,CACEI,UAAU,CAAGD,OADf,CADO,CADX,EAlBQ,sDAfS,oEA+CnBE,SA/CmB,CA+CNC,KAAD,EAAW,CACnB,GAAIA,KAAK,GAAK,CAAd,CAAiB,CACb,mBACI,oBAAC,KAAD,EAAO,KAAK,CAAC,EAAb,CAAgB,SAAS,CAAC,oBAA1B,eACE,yBAAG,SAAS,CAAC,SAAb,EADF,CADJ,CAKH,CAND,IAOK,IAAIA,KAAK,GAAK,CAAd,CAAgB,CACjB,mBACI,oBAAC,KAAD,EAAO,KAAK,CAAC,EAAb,CAAgB,SAAS,CAAC,oBAA1B,eACE,yBAAG,SAAS,CAAC,WAAb,EADF,CADJ,CAKH,CANI,IAOA,CACD,mBACI,oBAAC,KAAD,EAAO,KAAK,CAAC,EAAb,CAAgB,SAAS,CAAC,oBAA1B,eACE,yBAAG,SAAS,CAAC,QAAb,EADF,CADJ,CAKH,CACJ,CArEkB,MA6EnBC,WA7EmB,CA6EL,CAACD,KAAD,CAAOd,KAAP,GAAiB,CAC7B,mBACE,0BAAI,GAAG,CAAEA,KAAT,eACE,0BAAI,KAAK,CAAC,KAAV,eACE,4BAAM,SAAS,CAAC,cAAhB,EACGX,QAAQ,CAACyB,KAAK,CAAC,MAAD,CAAN,CAAR,CAAwB,CAAxB,CADH,cAC8B,8BAD9B,CACoCzB,QAAQ,CAACyB,KAAK,CAAC,MAAD,CAAN,CAAR,CAAwB,CAAxB,CADpC,CADF,CADF,cAME,0BAAI,KAAK,CAAC,KAAV,CAAgB,KAAK,CAAC,IAAtB,eACE,4BAAM,SAAS,CAAC,cAAhB,EACGA,KAAK,CAAC,UAAD,CAAL,CAAkB,SAAlB,CADH,CADF,CANF,cAWE,0BAAI,KAAK,CAAG,KAAZ,CAAkB,KAAK,CAAE,CAACE,SAAS,CAAC,QAAX,CAAzB,eACE,4BAAM,SAAS,CAAC,cAAhB,EACGF,KAAK,CAAC,iBAAD,CADR,CADF,CAXF,cAgBE,0BAAI,KAAK,CAAG,KAAZ,CAAkB,KAAK,CAAE,CAACE,SAAS,CAAC,QAAX,CAAzB,eACE,4BAAM,SAAS,CAAC,cAAhB,EACGF,KAAK,CAAC,UAAD,CADR,CADF,CAhBF,cAqBE,0BAAI,KAAK,CAAG,KAAZ,CAAkB,KAAK,CAAE,CAACE,SAAS,CAAC,QAAX,CAAzB,eACE,4BAAM,SAAS,CAAC,cAAhB,EACGF,KAAK,CAAC,kBAAD,CADR,CADF,CArBF,cA0BC,0BAAI,KAAK,CAAG,KAAZ,CAAkB,KAAK,CAAE,CAACE,SAAS,CAAC,QAAX,CAAzB,eACI,4BAAM,SAAS,CAAC,MAAhB,EAAwBF,KAAK,CAAC,QAAD,CAA7B,CADJ,cAEI,4CACI,oBAAC,QAAD,EACG,GAAG,CAAC,KADP,CAEG,KAAK,CAAEA,KAAK,CAAC,QAAD,CAFf,CAGG,YAAY,CAAE,KAAKG,WAAL,CAAiBH,KAAK,CAAC,QAAD,CAAtB,CAHjB,EADJ,CAFJ,CA1BD,cAoCE,0BAAI,KAAK,CAAG,KAAZ,CAAkB,KAAK,CAAE,CAACE,SAAS,CAAC,QAAX,CAAzB,EACK,KAAKH,SAAL,CAAeC,KAAK,CAAC,QAAD,CAApB,CADL,CApCF,cAuCE,0BAAI,KAAK,CAAG,KAAZ,CAAkB,KAAK,CAAE,CAACE,SAAS,CAAC,QAAX,CAAzB,eACI,oBAAC,MAAD,EACI,SAAS,CAAC,yEADd,CAEI,IAAI,oCAA8BF,KAAK,CAAC,IAAD,CAAnC,CAFR,CAGI,OAAO,CAAE,KAAKf,mBAAL,CAAyBmB,IAAzB,CAA8B,IAA9B,CAAmCJ,KAAK,CAAC,IAAD,CAAxC,CAHb,eAKE,yBAAG,SAAS,CAAC,mBAAb,EALF,CADJ,CAvCF,CADF,CAmDD,CAjIkB,MAmKnBK,WAnKmB,CAmKL,CAACC,CAAD,CAAGlB,EAAH,GAAU,CACtBkB,CAAC,CAACC,cAAF,GACA,KAAKC,KAAL,CAAWC,WAAX,CAAuBrB,EAAvB,CACA,KAAKD,OAAL,CAAaC,EAAb,EACD,CAvKkB,CAEjB,KAAKoB,KAAL,CAAa,CACXV,UAAU,CAAG,EADF,CAEXY,aAAa,CAAC,EAFH,CAGXD,WAAW,CAAC,CAHD,CAIXd,aAAa,CAAC,CAJH,CAKXgB,WAAW,CAAC,EALD,CAAb,CAOD,CA6DDR,WAAW,CAACS,MAAD,CAAQ,CACf,GAAGA,MAAM,CAAC,EAAV,CAAa,CAAC,MAAM,qBAAN,CACb,CADD,IACM,IAAGA,MAAM,CAAG,EAAZ,CAAe,CAAC,MAAM,kBAAN,CACrB,CADK,IACA,IAAGA,MAAM,CAAG,EAAZ,CAAe,CAAC,MAAM,qBAAN,CACrB,CADK,IACD,CAAC,MAAM,oBAAN,CAA2B,CACpC,CAwDDC,aAAa,EAAE,CAEZ,GAAG,KAAKL,KAAL,CAAWb,aAAX,CAA2B,KAAKa,KAAL,CAAWG,WAAzC,CAAqD,CACpD,KAAMG,CAAAA,OAAO,CAAG,EAAhB,CACA,GAAG,KAAKN,KAAL,CAAWC,WAAX,CAAwB,CAA3B,CACEK,OAAO,CAACC,IAAR,cAAa,0BAAI,SAAS,CAAC,WAAd,eAA0B,yBAAG,SAAS,CAAC,WAAb,CAAyB,OAAO,CAAGT,CAAD,EAAK,KAAKD,WAAL,CAAiBC,CAAjB,CAAmB,KAAKE,KAAL,CAAWC,WAAX,CAAuB,CAA1C,CAAvC,eAAqF,yBAC7G,SAAS,CAAC,mBADmG,EAArF,CAA1B,CAAb,EAEF,IAAK,GAAIO,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGC,IAAI,CAACC,IAAL,CAAU,KAAKV,KAAL,CAAWb,aAAX,CAAyB,KAAKa,KAAL,CAAWG,WAA9C,EAA2D,CAA/E,CAAkFK,CAAC,EAAnF,CAAuF,CACrFF,OAAO,CAACC,IAAR,cAAa,0BAAI,SAAS,CAAC,WAAd,eAA0B,yBAAG,SAAS,CAAC,WAAb,CAAyB,OAAO,CAAGT,CAAD,EAAK,KAAKD,WAAL,CAAiBC,CAAjB,WAAsBU,CAAtB,EAAvC,EAAoEA,CAApE,CAA1B,CAAb,EACD,CACD,GAAG,KAAKR,KAAL,CAAWC,WAAX,CAAyBQ,IAAI,CAACC,IAAL,CAAU,KAAKV,KAAL,CAAWb,aAAX,CAAyB,KAAKa,KAAL,CAAWG,WAA9C,CAA5B,CACEG,OAAO,CAACC,IAAR,cAAa,0BAAI,SAAS,CAAC,WAAd,eAA0B,yBAAG,SAAS,CAAC,WAAb,CAAyB,OAAO,CAAGT,CAAD,EAAK,KAAKD,WAAL,CAAiBC,CAAjB,CAAmB,KAAKE,KAAL,CAAWC,WAAX,CAAuB,CAA1C,CAAvC,eAAqF,yBAC7G,SAAS,CAAC,oBADmG,EAArF,CAA1B,CAAb,EAGF,mBACQ,2BAAK,SAAS,CAAC,4BAAf,eACG,2BAAK,aAAW,yBAAhB,eACI,0BAAI,SAAS,CAAC,YAAd,EACIK,OADJ,CADJ,CADH,CADR,CAQE,CApBH,IAqBK,CACA,OACH,CACJ,CAEDK,iBAAiB,EAAG,CAClB,KAAKhC,OAAL,CAAa,CAAb,EACD,CAQDiC,MAAM,EAAG,CACP,mBACE,qDACE,oBAAC,MAAD,MADF,cAGE,oBAAC,SAAD,EAAW,SAAS,CAAC,OAArB,CAA6B,KAAK,KAAlC,eAEE,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,oBAAC,IAAD,EAAM,SAAS,CAAC,mBAAhB,eACI,oBAAC,UAAD,EAAY,SAAS,CAAC,yBAAtB,eACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,mBACI,2BAAK,SAAS,CAAC,QAAf,eACA,0BAAI,SAAS,CAAC,iBAAd,CAAgC,KAAK,CAAE,CAAEC,WAAW,CAAE,EAAf,CAAvC,cADA,CADJ,CADF,cAME,oBAAC,GAAD,MACK,KAAKR,aAAL,EADL,CANF,cASE,oBAAC,GAAD,mBACI,2BAAK,SAAS,CAAC,yBAAf,eACA,2BAAK,SAAS,CAAC,UAAf,CAA0B,KAAK,CAAC,MAAhC,eACI,8BAAQ,SAAS,CAAC,mCAAlB,CAAsD,IAAI,CAAC,QAA3D,CACQ,EAAE,CAAC,oBADX,CACgC,cAAY,UAD5C,CACuD,gBAAc,MADrE,CAEQ,gBAAc,OAFtB,YADJ,cAMI,2BAAK,SAAS,CAAC,eAAf,CAA+B,kBAAgB,oBAA/C,eACI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,cADJ,cAEI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,eAFJ,cAGI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,iBAHJ,cAII,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,kBAJJ,cAKI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,aALJ,cAMI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,WANJ,CANJ,CADA,CADJ,CATF,CADF,CADJ,cAgCE,oBAAC,KAAD,EAAO,QAAQ,KAAf,CACE,SAAS,CAAC,gDADZ,CAEE,KAAK,KAFP,eAIE,6BAAO,SAAS,CAAC,YAAjB,eACE,2CACE,0BAAI,KAAK,CAAC,WAAV,CAAsB,KAAK,CAAE,CAACX,SAAS,CAAC,QAAX,CAA7B,eACC,2BAAK,KAAK,CAAC,QAAX,CAAoB,SAAS,CAAC,0DAA9B,eACI,yBAAG,SAAS,CAAC,qBAAb,EADJ,CADD,cAIA,4CACK,4BAAM,SAAS,CAAC,MAAhB,cADL,CAJA,CADF,cAUE,0BAAI,KAAK,CAAC,UAAV,CAAsB,KAAK,CAAE,CAACA,SAAS,CAAC,QAAX,CAA7B,eACC,2BAAM,SAAS,CAAC,0DAAhB,eACI,yBAAI,SAAS,CAAC,uBAAd,EADJ,CADD,cAIC,4CACI,4BAAM,SAAS,CAAC,MAAhB,aADJ,CAJD,CAVF,cAkBE,0BAAI,KAAK,CAAC,KAAV,CAAgB,KAAK,CAAE,CAACA,SAAS,CAAC,QAAX,CAAvB,eACC,2BAAK,SAAS,CAAC,0DAAf,eACI,yBAAG,SAAS,CAAC,YAAb,EADJ,CADD,cAII,4CACC,4BAAM,SAAS,CAAC,MAAhB,eADD,CAJJ,CAlBF,cA2BE,0BAAI,KAAK,CAAC,KAAV,CAAgB,KAAK,CAAE,CAACA,SAAS,CAAC,QAAX,CAAvB,eACC,2BAAK,SAAS,CAAC,0DAAf,eACI,yBAAG,SAAS,CAAC,cAAb,EADJ,CADD,cAIA,4CACK,4BAAM,SAAS,CAAC,MAAhB,iBADL,CAJA,CA3BF,cAmCE,0BAAI,KAAK,CAAC,KAAV,CAAgB,KAAK,CAAE,CAACA,SAAS,CAAC,QAAX,CAAvB,eACE,2BAAK,SAAS,CAAC,0DAAf,eACG,yBAAG,SAAS,CAAC,qBAAb,EADH,CADF,cAIA,4CACC,4BAAM,SAAS,CAAC,MAAhB,iBADD,CAJA,CAnCF,cA2CE,0BAAI,KAAK,CAAC,KAAV,CAAe,KAAK,CAAE,CAACA,SAAS,CAAC,QAAX,CAAtB,eACC,2BAAK,SAAS,CAAC,0DAAf,eACI,yBAAG,SAAS,CAAC,6BAAb,EADJ,CADD,cAIA,4CACC,4BAAM,SAAS,CAAC,MAAhB,aADD,CAJA,CA3CF,cAmDE,0BAAI,KAAK,CAAC,KAAV,CAAe,KAAK,CAAE,CAACA,SAAS,CAAC,QAAX,CAAtB,eACC,2BAAK,SAAS,CAAC,0DAAf,eACI,yBAAG,SAAS,CAAC,aAAb,EADJ,CADD,cAIA,4CACC,4BAAM,SAAS,CAAC,MAAhB,WADD,CAJA,CAnDF,cA2DE,0BAAI,KAAK,CAAC,KAAV,CAAgB,KAAK,CAAE,CAACA,SAAS,CAAC,QAAX,CAAvB,EA3DF,CADF,CAJF,cAoEE,iCACG,KAAKM,KAAL,CAAW,YAAX,EAAyBc,GAAzB,CAA6B,KAAKrB,WAAlC,CADH,CApEF,CAhCF,cAwGE,oBAAC,UAAD,EAAY,SAAS,CAAC,yBAAtB,eACI,oBAAC,GAAD,mBACE,oBAAC,GAAD,mBACI,2BAAK,SAAS,CAAC,QAAf,eACA,0BAAI,SAAS,CAAC,iBAAd,CAAgC,KAAK,CAAE,CAAEoB,WAAW,CAAE,EAAf,CAAvC,EADA,CADJ,CADF,cAME,oBAAC,GAAD,MACK,KAAKR,aAAL,EADL,CANF,cASE,oBAAC,GAAD,mBACI,2BAAK,SAAS,CAAC,yBAAf,eACA,2BAAK,SAAS,CAAC,UAAf,CAA0B,KAAK,CAAC,MAAhC,eACI,8BAAQ,SAAS,CAAC,mCAAlB,CAAsD,IAAI,CAAC,QAA3D,CACQ,EAAE,CAAC,oBADX,CACgC,cAAY,UAD5C,CACuD,gBAAc,MADrE,CAEQ,gBAAc,OAFtB,YADJ,cAMI,2BAAK,SAAS,CAAC,eAAf,CAA+B,kBAAgB,oBAA/C,eACI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,cADJ,cAEI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,eAFJ,cAGI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,iBAHJ,cAII,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,kBAJJ,cAKI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,aALJ,cAMI,yBAAG,SAAS,CAAC,eAAb,CAA6B,IAAI,CAAC,GAAlC,WANJ,CANJ,CADA,CADJ,CATF,CADJ,CAxGF,CADF,CADF,CAFF,CAHF,CADF,CAqJD,CAjUkC,CAoUrC,cAAehC,CAAAA,MAAf","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport \"../../assets/css/custom.css\"\n\n// reactstrap components\nimport {\n    Badge,\n    Card,\n    CardHeader,\n    Media,\n    Table,\n    Container,\n    Row,\n    Button, Col, Progress,\n} from \"reactstrap\";\n// core components\nimport Header from \"../../components/Headers/Header.js\";\nimport Maps from \"./Maps_Component.js\"\n\n\nfunction fix_date(st) {\n  let date = st.split('T');\n  let year = date[0];\n  let time  = date[1].split('.')[0];\n  return [year,time];\n}\n\nclass Tables extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      table_data : [],\n      table_buttons:[],\n      curent_page:1,\n      num_accidents:0,\n      num_to_show:10\n    }\n  }\n\n  redirect_to_details = (index) => {\n    return <Redirect to={`/admin/accident_details/${index}`}/>\n  }\n\n  getData = async (id) => {\n     const response = await fetch(\n        `/num_accidents`\n    );\n\n    const result = await response.json();\n    this.setState(\n      prevState => (\n        {\n          num_accidents : result\n        }\n      )\n    );\n    const response1 = await fetch(\n        `/range_accidents/${id}`\n    );\n\n    const result1 = await response1.json();\n    this.setState(\n      prevState => (\n        {\n          table_data : result1\n        }\n      )\n    );\n  }\n\n  /* Sets status colors\n  *     0 -> red (this accident was not answered yet)\n  *     1 -> yellow (emergency services are on their way)\n  *     2 -> green (accident resolved)\n  */\n  setStatus = (value) => {\n      if (value === 2) {\n          return (\n              <Badge color=\"\" className=\"badge-dot badge-lg\">\n                <i className=\"bg-lime\" />\n              </Badge>\n          )\n      }\n      else if (value === 1){\n          return (\n              <Badge color=\"\" className=\"badge-dot badge-lg\">\n                <i className=\"bg-yellow\" />\n              </Badge>\n          )\n      }\n      else {\n          return (\n              <Badge color=\"\" className=\"badge-dot badge-lg\">\n                <i className=\"bg-red\" />\n              </Badge>\n          )\n      }\n  }\n  getBarColor(damage){\n      if(damage<30){return\"bg-gradient-success\"\n      }else if(damage < 40){return\"bg-gradient-info\"\n      }else if(damage < 75){return\"bg-gradient-warning\"\n      }else{return\"bg-gradient-danger\"}\n  }\n\n  renderArray = (value,index) => {\n    return(\n      <tr key={index} >\n        <th scope=\"row\">\n          <span className=\"mb-0 text-sm\">\n            {fix_date(value[\"date\"])[0]}<br/>{fix_date(value[\"date\"])[1]}\n          </span>\n        </th>\n        <th scope=\"row\" width=\"5%\">\n          <span className=\"mb-0 text-sm\">\n            {value[\"location\"][\"address\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"n_cars_involved\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"n_people\"]}\n          </span>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n          <span className=\"mb-0 text-sm\">\n            {value[\"n_people_injured\"]}\n          </span>\n        </th>\n       <th scope = \"row\" style={{textAlign:\"center\"}}>\n           <span className=\"mr-2\">{value[\"damage\"]}</span>\n           <div>\n               <Progress\n                  max=\"100\"\n                  value={value[\"damage\"]}\n                  barClassName={this.getBarColor(value[\"damage\"])}\n                />\n            </div>\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n            {this.setStatus(value[\"status\"])}\n        </th>\n        <th scope = \"row\" style={{textAlign:\"center\"}}>\n            <Button\n                className=\"icon icon-shape bg-transparent border-default text-white rounded-circle\"\n                href={`/#admin/accident_details/${value[\"id\"]}`}\n                onClick={this.redirect_to_details.bind(this,value['id'])}\n            >\n              <i className=\"fas fa-ellipsis-h\"/>\n            </Button>\n        </th>\n      </tr>\n    )\n  }\n\n  renderButtons(){\n\n     if(this.state.num_accidents > this.state.num_to_show){\n      const Buttons = []\n      if(this.state.curent_page >1)\n        Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,this.state.curent_page-1)}><i\n                       className=\"fas fa-angle-left\"></i></a></li>)\n      for (let i = 1; i < Math.ceil(this.state.num_accidents/this.state.num_to_show)+1; i++) {\n        Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,`${i}`)}>{i}</a></li>)\n      }\n      if(this.state.curent_page < Math.ceil(this.state.num_accidents/this.state.num_to_show) )\n        Buttons.push(<li className=\"page-item\"><a className=\"page-link\" onClick={(e)=>this.handleClick(e,this.state.curent_page+1)}><i\n                       className=\"fas fa-angle-right\"></i></a></li>)\n\n      return(\n              <div className=\"row justify-content-center\">\n                 <nav aria-label=\"Page navigation example\">\n                     <ul className=\"pagination\">\n                        {Buttons}\n                     </ul>\n                 </nav>\n              </div>\n      )}\n      else{\n          return\n      }\n  }\n\n  componentDidMount() {\n    this.getData(1);\n  }\n\n  handleClick = (e,id) => {\n    e.preventDefault();\n    this.state.curent_page=id\n    this.getData(id);\n  };\n\n  render() {\n    return (\n      <>\n        <Header />\n        {/* Page content */}\n        <Container className=\"mt--7\" fluid>\n          {/* Dark table */}\n          <Row className=\"mt-5\">\n            <div className=\"col\">\n              <Card className=\"bg-default shadow\">\n                  <CardHeader className=\"bg-transparent border-0\">\n                    <Row >\n                      <Col>\n                          <div className=\"row ml\">\n                          <h1 className=\"text-white mb-0\" style={{ paddingLeft: 20}} >Accidents</h1>\n                              </div>\n                      </Col>\n                      <Col >\n                          {this.renderButtons()}\n                      </Col>\n                      <Col>\n                          <div className=\"row justify-content-end\">\n                          <div className=\"dropdown\" align=\"left\">\n                              <button className=\"btn btn-secondary dropdown-toggle\" type=\"button\"\n                                      id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                                      aria-expanded=\"false\">\n                                  Sort by\n                              </button>\n                              <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                                  <a className=\"dropdown-item\" href=\"#\">Date/Hour</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Nº cars</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Nº people</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Nº injured</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Severity</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Status</a>\n                              </div>\n                          </div>\n                          </div>\n                      </Col>\n                    </Row>\n                  </CardHeader>\n                <Table bordered\n                  className=\"align-items-center table-dark table-responsive\"\n                  hover\n                >\n                  <thead className=\"thead-dark\">\n                    <tr >\n                      <th scope=\"col-lg-3 \" style={{textAlign:\"center\"}}>\n                       <div align=\"center\" className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                           <i className=\"fas fa-calendar-alt\"/>\n                       </div>\n                      <div >\n                           <span className=\"ml-1\">Date/Hour</span>\n                      </div>\n\n                      </th>\n                      <th scope=\"col-lg-3\"  style={{textAlign:\"center\"}}>\n                       <div  className=\"icon icon-shape bg-transparent text-white rounded-circle\" >\n                           <i  className=\"fas fa-map-marked-alt\"/>\n                       </div>\n                       <div >\n                           <span className=\"ml-1\">Location</span>\n                       </div>\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                           <i className=\"fas fa-car\"/>\n                       </div>\n                          <div>\n                           <span className=\"ml-1\">Nº cars</span>\n                       </div>\n\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                           <i className=\"fas fa-users\"/>\n                       </div>\n                      <div>\n                           <span className=\"ml-1\">Nº people</span>\n                       </div>\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}>\n                        <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                           <i className=\"fas fa-user-injured\"/>\n                       </div>\n                      <div>\n                       <span className=\"ml-1\">Nºinjured</span>\n                      </div>\n                      </th>\n                      <th scope=\"col\"style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                           <i className=\"fas fa-exclamation-triangle\"/>\n                       </div>\n                      <div>\n                       <span className=\"ml-1\">Severity</span>\n                      </div>\n                      </th>\n                      <th scope=\"col\"style={{textAlign:\"center\"}}>\n                       <div className=\"icon icon-shape bg-transparent text-white rounded-circle\">\n                           <i className=\"fas fa-flag\"/>\n                       </div>\n                      <div>\n                       <span className=\"ml-1\">Status</span>\n                      </div>\n                      </th>\n                      <th scope=\"col\" style={{textAlign:\"center\"}}   />\n\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state[\"table_data\"].map(this.renderArray)}\n                  </tbody>\n                </Table>\n                <CardHeader className=\"bg-transparent border-0\">\n                    <Row >\n                      <Col>\n                          <div className=\"row ml\">\n                          <h1 className=\"text-white mb-0\" style={{ paddingLeft: 20}} ></h1>\n                              </div>\n                      </Col>\n                      <Col >\n                          {this.renderButtons()}\n                      </Col>\n                      <Col>\n                          <div className=\"row justify-content-end\">\n                          <div className=\"dropdown\" align=\"left\">\n                              <button className=\"btn btn-secondary dropdown-toggle\" type=\"button\"\n                                      id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                                      aria-expanded=\"false\">\n                                  Sort by\n                              </button>\n                              <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                                  <a className=\"dropdown-item\" href=\"#\">Date/Hour</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Nº cars</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Nº people</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Nº injured</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Severity</a>\n                                  <a className=\"dropdown-item\" href=\"#\">Status</a>\n                              </div>\n                          </div>\n                          </div>\n                      </Col>\n                    </Row>\n                  </CardHeader>\n              </Card>\n            </div>\n          </Row>\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default Tables;\n"]},"metadata":{},"sourceType":"module"}